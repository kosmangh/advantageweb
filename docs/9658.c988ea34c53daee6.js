"use strict";(self.webpackChunkadvantageweb=self.webpackChunkadvantageweb||[]).push([[9658],{4874:(U,f,l)=>{l.d(f,{i:()=>a});var p=l(5879);let a=(()=>{var d;class h{transform(g){return g.trim().split("_").map(v=>v.trim()).join(" ")}}return(d=h).\u0275fac=function(g){return new(g||d)},d.\u0275pipe=p.Yjl({name:"removeHyphen",type:d,pure:!0,standalone:!0}),h})()},9658:(U,f,l)=>{l.r(f),l.d(f,{EstatePropertiesComponent:()=>ne});var p=l(6814),a=l(95),d=l(4740),h=l(2458),y=l(5176),g=l(2735),A=l(8624),v=l(3519),u=l.n(v),q=l(5861),k=l(1392),Z=l(995),I=l(1693),P=l(3221),e=l(5879),M=l(6593),_=l(6842),F=l(7177),C=l(4981),E=l(7236),S=l(1449);function J(o,i){if(1&o&&(e.TgZ(0,"ng-option",37),e._uU(1),e.qZA()),2&o){const s=i.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function O(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function B(o,i){if(1&o&&(e.TgZ(0,"ng-option",37),e._uU(1),e.qZA()),2&o){const s=i.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.block," ")}}function w(o,i){1&o&&(e.TgZ(0,"div",38),e._UZ(1,"app-required-field"),e.qZA())}function Q(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function R(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function Y(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function x(o,i){if(1&o&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&o){const s=i.$implicit;e.Q6J("value",s.dataValue),e.xp6(1),e.hij(" ",s.dataLabel," ")}}function G(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}const m=function(o){return{"is-invalid":o}};function z(o,i){if(1&o&&(e.TgZ(0,"li")(1,"div",39),e._UZ(2,"input",40),e.TgZ(3,"label",41),e._uU(4),e.qZA()()()),2&o){const s=i.$implicit,r=e.oxw();e.xp6(2),e.s9C("value",s.dataValue),e.Q6J("id",s.dataValue)("ngClass",e.VKq(5,m,((null==r.propertyForm.category?null:r.propertyForm.category.touched)||(null==r.propertyForm.category?null:r.propertyForm.category.dirty)||r.submitted)&&(null==r.propertyForm.category?null:r.propertyForm.category.errors))),e.xp6(1),e.s9C("for",s.dataValue),e.xp6(1),e.Oqu(s.dataLabel)}}function K(o,i){1&o&&(e.TgZ(0,"div",42),e._UZ(1,"app-required-field"),e.qZA())}function $(o,i){1&o&&(e.ynx(0),e.TgZ(1,"div",43),e._UZ(2,"input",44),e.TgZ(3,"label",45),e._uU(4," Save & create new property "),e.qZA()(),e.BQk())}function L(o,i){if(1&o){const s=e.EpF();e.TgZ(0,"div",34)(1,"button",46),e.NdJ("click",function(){e.CHM(s);const t=e.oxw();return e.KtG(t.deleteBlock())}),e._uU(2," Delete "),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(1),e.Q6J("disabled",!s.propertyFormGroup.valid)("title",s.propertyFormGroup.invalid?"There must be errors on the form":"")}}function D(o,i){if(1&o){const s=e.EpF();e.TgZ(0,"div",34)(1,"button",47),e.NdJ("click",function(){e.CHM(s);const t=e.oxw();return e.KtG(t.updateBlock())}),e._uU(2," Update "),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(1),e.Q6J("title",s.propertyFormGroup.invalid?"There must be errors on the form":"")}}function j(o,i){if(1&o){const s=e.EpF();e.TgZ(0,"div",34)(1,"button",47),e.NdJ("click",function(){e.CHM(s);const t=e.oxw();return e.KtG(t.saveBlock())}),e._uU(2," Save "),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(1),e.Q6J("title",s.propertyFormGroup.invalid?"There must be errors on the form":"")}}let H=(()=>{var o;class i{constructor(r,t,n,c,b,N,T){this.title=r,this.addEstateBsModalRef=t,this.fb=n,this.accountService=c,this.alertService=b,this.logger=N,this.settingsService=T,this.submitted=!1,this.accountService.currentUser.subscribe(ie=>this.currentUser=ie)}ngOnInit(){this.submitted=!1,this.createNewForm(),this.isAddMode?(this.estateHeaderMsg="New estateId property",this.title.setTitle(this.estateHeaderMsg)):(this.estateHeaderMsg="Edit "+this.estateProperty.propertyName,this.title.setTitle(this.estateHeaderMsg),this.propertyFormGroup.patchValue(this.estateProperty)),this.listOfCategories=this.settingsService.getPropertyCategories(),this.listOfUsages=this.settingsService.getPropertyUsage(),this.addEstateBsModalRef.setClass("gray modal-md modal-dialog-top"),this.fetchEstates(),this.fetchBlocks()}createNewForm(){this.propertyFormGroup=this.fb.group({estateId:["",[a.kI.required]],blockId:["",[a.kI.required]],propertyNo:["",{updateOn:"blur",validators:[a.kI.required]}],propertyName:["",{updateOn:"blur",validators:[a.kI.required]}],propertySize:["",{updateOn:"blur",validators:[a.kI.required]}],usage:["",[a.kI.required]],category:["",[a.kI.required]],description:["",""],recordId:[""],saveAndNew:[!1]})}get propertyForm(){return this.propertyFormGroup.controls}fetchEstates(){this.listOfEstates=[],this.settingsService.getEstates().subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estates.length<=0?(this.alertService.showInfoMsgGeneral("No zones found"),void this.logger.info("No zones found")):void(this.listOfEstates=r.estates);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}fetchBlocks(){this.listOfBlocks=[],this.settingsService.getEstateBlocks(this.currentUser,this.propertyForm.estateId.value).subscribe({next:r=>{if(this.logger.info("getEstateBlocks response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estateBlocks.length<=0?(this.alertService.showInfoMsgGeneral("No blocks found"),void this.logger.info("No blocks found")):void(this.listOfBlocks=r.estateBlocks);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}saveBlock(){if(this.alertService.clear(),this.submitted=!0,!this.propertyFormGroup.valid)return;let r=this.propertyForm.propertyName.value;u().fire({title:"Confirmation",text:`Do you want to save property  ${r}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, create",cancelButtonText:"No, cancel"}).then(t=>{if(t.value){if(this.alertService.clear(),this.propertyFormGroup.invalid)return;this.settingsService.createEstateProperty(this.currentUser,this.propertyFormGroup.value).subscribe({next:n=>{"000"===n.headerResponse.responseCode?(this.alertService.showSuccessMsg(`${r} created successfully`),this.propertyForm.saveAndNew.value||(this.addEstateBsModalRef.hide(),this.accountService.reloadCurrentRoute()),this.propertyFormGroup.reset(),this.submitted=!1,this.logAction(`created estateId ${r}`,Z.h.SETTINGS)):this.alertService.showErrorMsg(n.headerResponse.responseMessage)},error:n=>{this.alertService.showInfoMsg(n)}})}else u()})}updateBlock(){if(this.alertService.clear(),this.submitted=!0,!this.propertyFormGroup.valid)return;let r=this.propertyForm.propertyName.value;u().fire({position:"top",title:"Confirmation",text:`Do you want to update property ${r}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, update"}).then(t=>{if(t.value){if(this.alertService.clear(),this.propertyFormGroup.invalid)return;this.settingsService.updateEstateProperty(this.currentUser,this.propertyFormGroup.value).subscribe({next:n=>{this.logger.info("updateUserAccount response:"+JSON.stringify(n)),"000"===n.headerResponse.responseCode?(this.alertService.showSuccessMsg(`${r} updated successfully`),this.addEstateBsModalRef.hide(),this.logAction(`Updated ${r}`,Z.h.SETTINGS),this.accountService.reloadCurrentRoute()):this.alertService.showErrorMsg(n.headerResponse.responseMessage)},error:n=>{this.alertService.showInfoMsg(n.message)}})}else u()})}deleteBlock(){if(this.alertService.clear(),this.submitted=!0,!this.propertyFormGroup.valid)return;let r=this.propertyForm.propertyName.value;u().fire({position:"top",title:"Confirmation",text:`Do you want to delete property ${r}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, delete"}).then(t=>{if(t.value){if(this.alertService.clear(),this.propertyFormGroup.invalid)return;this.settingsService.updateEstateProperty(this.currentUser,this.propertyForm.estateId.value).subscribe({next:n=>{this.logger.info("delete blockId response:"+JSON.stringify(n)),"000"===n.headerResponse.responseCode?(this.alertService.showSuccessMsg(`${r} deleted successfully`),this.addEstateBsModalRef.hide(),this.logAction(`Deleted ${r}`,Z.h.SETTINGS),this.accountService.reloadCurrentRoute()):this.alertService.showErrorMsg(n.headerResponse.responseMessage)},error:n=>{this.alertService.showInfoMsg(n.message)}})}else u()})}logAction(r,t){var n=this;return(0,q.Z)(function*(){yield n.accountService.logUserAudit(r,t)})()}}return(o=i).\u0275fac=function(r){return new(r||o)(e.Y36(M.Dx),e.Y36(_.UZ),e.Y36(a.qu),e.Y36(F.e),e.Y36(C.c),e.Y36(E.Kf),e.Y36(S.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:82,vars:51,consts:[["novalidate","",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"row","gy-3","mt-3"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["id","estateid","formControlName","estateId",3,"clearable","ngClass","change"],["value","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["id","estateid","formControlName","blockId",3,"clearable","ngClass"],["class","text-danger",4,"ngIf"],["type","number","formControlName","propertyNo","id","blockId","autocomplete","off",1,"form-control",3,"ngClass"],["labelName","Property Name",3,"labelForName"],["type","text","formControlName","propertyName","id","propertyName","autocomplete","off",1,"form-control",3,"ngClass"],["labelName","Property Size",3,"labelForName"],[1,"form-text-hint"],[1,"overline-title"],["type","number","formControlName","propertySize","id","propertySize","autocomplete","off",1,"form-control",3,"ngClass"],[1,"form-control-select"],["id","usage","formControlName","usage",1,"form-control",3,"ngClass"],["value","","selected","","disabled","",1,"fs-6"],[1,"form-check-label",3,"labelForName","labelName"],[1,"custom-control-group"],[4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],[1,"col-sm-12"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],["data-bs-dismiss","modal",1,"btn","btn-outline-light","btn-sm",3,"click"],["class","col-auto",4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"custom-control","custom-radio","custom-control-pro","no-control"],["formControlName","category","name","category","type","radio",1,"custom-control-input","form-check-input",3,"id","value","ngClass"],[1,"custom-control-label","form-check-label",3,"for"],[1,"text-danger","mt-1"],[1,"custom-control","custom-control-sm","custom-checkbox","checked"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew","id","saveAndNew",1,"custom-control-input"],["for","saveAndNew",1,"custom-control-label","fw-bolder"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"btn","btn-primary","btn-sm",3,"title","click"]],template:function(r,t){1&r&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h6",2),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return null==t.addEstateBsModalRef?null:t.addEstateBsModalRef.hide()}),e.TgZ(6,"span",4),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",5),e._UZ(9,"app-required-fields-notice"),e.TgZ(10,"div",6)(11,"div",7)(12,"div",8),e._UZ(13,"app-form-label",9),e.TgZ(14,"div",10)(15,"ng-select",11),e.NdJ("change",function(){return t.fetchBlocks()}),e.TgZ(16,"ng-option",12),e._uU(17,"Select One"),e.qZA(),e.YNc(18,J,2,2,"ng-option",13),e.qZA(),e.TgZ(19,"span",14),e.YNc(20,O,2,0,"div",15),e.qZA()()()(),e.TgZ(21,"div",7)(22,"div",8),e._UZ(23,"app-form-label",9),e.TgZ(24,"div",10)(25,"ng-select",16)(26,"ng-option",12),e._uU(27,"Select One"),e.qZA(),e.YNc(28,B,2,2,"ng-option",13),e.qZA(),e.TgZ(29,"span",14),e.YNc(30,w,2,0,"div",17),e.qZA()()()(),e.TgZ(31,"div",7)(32,"div",8),e._UZ(33,"app-form-label",9),e.TgZ(34,"div",10),e._UZ(35,"input",18),e.TgZ(36,"span",14),e.YNc(37,Q,2,0,"div",15),e.qZA()()()(),e.TgZ(38,"div",7)(39,"div",8),e._UZ(40,"app-form-label",19),e.TgZ(41,"div",10),e._UZ(42,"input",20),e.TgZ(43,"span",14),e.YNc(44,R,2,0,"div",15),e.qZA()()()(),e.TgZ(45,"div",7)(46,"div",8),e._UZ(47,"app-form-label",21),e.TgZ(48,"div",10)(49,"div",22)(50,"span",23),e._uU(51,"Acre(s)"),e.qZA()(),e._UZ(52,"input",24),e.TgZ(53,"span",14),e.YNc(54,Y,2,0,"div",15),e.qZA()()()(),e.TgZ(55,"div",7)(56,"div",8),e._UZ(57,"app-form-label",9),e.TgZ(58,"div",10)(59,"div",25)(60,"select",26)(61,"option",27),e._uU(62,"Select One"),e.qZA(),e.YNc(63,x,2,2,"option",13),e.qZA(),e.TgZ(64,"span",14),e.YNc(65,G,2,0,"div",15),e.qZA()()()()(),e.TgZ(66,"div",7)(67,"div",8),e._UZ(68,"app-form-label",28),e.TgZ(69,"div",10)(70,"ul",29),e.YNc(71,z,5,7,"li",30),e.qZA(),e.YNc(72,K,2,0,"div",31),e.qZA()()(),e.TgZ(73,"div",32),e.YNc(74,$,5,0,"ng-container",15),e.qZA()()(),e.TgZ(75,"div",33)(76,"div",34)(77,"button",35),e.NdJ("click",function(){return null==t.addEstateBsModalRef?null:t.addEstateBsModalRef.hide()}),e._uU(78," Close "),e.qZA()(),e.YNc(79,L,3,2,"div",36),e.YNc(80,D,3,1,"div",36),e.YNc(81,j,3,1,"div",36),e.qZA()()),2&r&&(e.Q6J("formGroup",t.propertyFormGroup),e.xp6(3),e.hij("",e.lcZ(4,37,t.estateHeaderMsg)," Block"),e.xp6(10),e.Q6J("labelForName","estateId")("labelName","Estate"),e.xp6(2),e.Q6J("clearable",!0)("ngClass",e.VKq(39,m,((null==t.propertyForm.estateId?null:t.propertyForm.estateId.touched)||(null==t.propertyForm.estateId?null:t.propertyForm.estateId.dirty)||t.submitted)&&(null==t.propertyForm.estateId?null:t.propertyForm.estateId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(2),e.Q6J("ngIf",(null==t.propertyForm.estateId||null==t.propertyForm.estateId.errors?null:t.propertyForm.estateId.errors.required)||t.submitted),e.xp6(3),e.Q6J("labelForName","blockId")("labelName","Block"),e.xp6(2),e.Q6J("clearable",!0)("ngClass",e.VKq(41,m,((null==t.propertyForm.blockId?null:t.propertyForm.blockId.touched)||(null==t.propertyForm.blockId?null:t.propertyForm.blockId.dirty)||t.submitted)&&(null==t.propertyForm.blockId?null:t.propertyForm.blockId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfBlocks),e.xp6(2),e.Q6J("ngIf",null==t.propertyForm.blockId||null==t.propertyForm.blockId.errors?null:t.propertyForm.blockId.errors.required),e.xp6(3),e.Q6J("labelForName","propertyNo")("labelName","Property No."),e.xp6(2),e.Q6J("ngClass",e.VKq(43,m,((null==t.propertyForm.propertyNo?null:t.propertyForm.propertyNo.touched)||(null==t.propertyForm.propertyNo?null:t.propertyForm.propertyNo.dirty)||t.submitted)&&(null==t.propertyForm.propertyNo?null:t.propertyForm.propertyNo.errors))),e.xp6(2),e.Q6J("ngIf",null==t.propertyForm.propertyNo||null==t.propertyForm.propertyNo.errors?null:t.propertyForm.propertyNo.errors.required),e.xp6(3),e.Q6J("labelForName","propertyName"),e.xp6(2),e.Q6J("ngClass",e.VKq(45,m,((null==t.propertyForm.propertyName?null:t.propertyForm.propertyName.touched)||(null==t.propertyForm.propertyName?null:t.propertyForm.propertyName.dirty)||t.submitted)&&(null==t.propertyForm.propertyName?null:t.propertyForm.propertyName.errors))),e.xp6(2),e.Q6J("ngIf",null==t.propertyForm.propertyName||null==t.propertyForm.propertyName.errors?null:t.propertyForm.propertyName.errors.required),e.xp6(3),e.Q6J("labelForName","propertySize"),e.xp6(5),e.Q6J("ngClass",e.VKq(47,m,((null==t.propertyForm.propertySize?null:t.propertyForm.propertySize.touched)||(null==t.propertyForm.propertySize?null:t.propertyForm.propertySize.dirty)||t.submitted)&&(null==t.propertyForm.propertySize?null:t.propertyForm.propertySize.errors))),e.xp6(2),e.Q6J("ngIf",null==t.propertyForm.propertySize||null==t.propertyForm.propertySize.errors?null:t.propertyForm.propertySize.errors.required),e.xp6(3),e.Q6J("labelForName","usage")("labelName","Usage"),e.xp6(3),e.Q6J("ngClass",e.VKq(49,m,((null==t.propertyForm.usage?null:t.propertyForm.usage.touched)||(null==t.propertyForm.usage?null:t.propertyForm.usage.dirty)||t.submitted)&&(null==t.propertyForm.usage?null:t.propertyForm.usage.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfUsages),e.xp6(2),e.Q6J("ngIf",null==t.propertyForm.usage||null==t.propertyForm.usage.errors?null:t.propertyForm.usage.errors.required),e.xp6(3),e.Q6J("labelForName","category")("labelName","Category"),e.xp6(3),e.Q6J("ngForOf",t.listOfCategories),e.xp6(1),e.Q6J("ngIf",t.submitted&&(null==t.propertyForm.category.errors?null:t.propertyForm.category.errors.required)),e.xp6(2),e.Q6J("ngIf",t.isAddMode),e.xp6(5),e.Q6J("ngIf",!t.isAddMode),e.xp6(1),e.Q6J("ngIf",!t.isAddMode),e.xp6(1),e.Q6J("ngIf",t.isAddMode))},dependencies:[p.ez,p.mk,p.sg,p.O5,p.rS,a.u5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.Wl,a.EJ,a._,a.JJ,a.JL,a.UX,a.sg,a.u,d.A0,d.w9,d.jq,k._8,P.z,g.h,I.M],encapsulation:2}),i})();var V=l(4874),X=l(9972);function W(o,i){if(1&o&&(e.TgZ(0,"ng-option",20),e._uU(1),e.qZA()),2&o){const s=i.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function ee(o,i){if(1&o&&(e.TgZ(0,"ng-option",20),e._uU(1),e.qZA()),2&o){const s=i.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.block," ")}}function te(o,i){if(1&o){const s=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._UZ(3,"em",24),e.qZA(),e.TgZ(4,"input",25),e.NdJ("ngModelChange",function(t){e.CHM(s);const n=e.oxw();return e.KtG(n.searchedKeyword=t)}),e.qZA()()()}if(2&o){const s=e.oxw();e.xp6(4),e.Q6J("ngModel",s.searchedKeyword)}}function re(o,i){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"SN"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Property"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Property No."),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Property Size"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Estate"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Block"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Usage"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Category"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Actions"),e.qZA()())}function oe(o,i){if(1&o){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"removeHyphen"),e.ALo(18,"titlecase"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"titlecase"),e.qZA(),e.TgZ(22,"td")(23,"div",26),e.NdJ("click",function(){const n=e.CHM(s).$implicit,c=e.oxw();return e.KtG(c.openEstateModalComponent(n,!1))}),e.TgZ(24,"div",27)(25,"span"),e._UZ(26,"em",28),e.qZA()()()()()}if(2&o){const s=i.$implicit,r=i.rowIndex;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(s.propertyName),e.xp6(2),e.Oqu(e.lcZ(7,8,s.propertyNo)),e.xp6(3),e.Oqu(e.lcZ(10,10,s.propertySize)),e.xp6(3),e.Oqu(null==s?null:s.estateName),e.xp6(2),e.Oqu(s.block),e.xp6(2),e.Oqu(e.lcZ(17,12,e.lcZ(18,14,s.usage))),e.xp6(4),e.Oqu(e.lcZ(21,16,s.category))}}const se=function(){return[5,10,25,50]};let ne=(()=>{var o;class i{constructor(r,t,n,c,b,N){this.addPropertyBsModalRef=r,this.addPropertyModalService=t,this.accountService=n,this.settingsService=c,this.alertService=b,this.logger=N,this.accountService.currentUser.subscribe(T=>this.currentUser=T)}ngOnInit(){this.searchBy="ALL",this.estate="A",this.block="A",this.fetchEstates()}ngOnDestroy(){this.addPropertyModalService.hide(),u().close()}refreshButton(){this.fetchEstateProperties()}fetchEstates(){this.listOfEstates=[],this.settingsService.getEstates().subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estates.length<=0?(this.alertService.showInfoMsgGeneral("No zones found"),void this.logger.info("No zones found")):void(this.listOfEstates=r.estates);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}fetchEstateBlocks(){this.block="A",this.listOfEstateBlocks=[],this.settingsService.getEstateBlocks(this.currentUser,this.estate).subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estateBlocks.length<=0?(this.block="No blocks found",this.alertService.showInfoMsgGeneral("No blocks found"),void this.logger.info("No blocks found ")):void(this.listOfEstateBlocks=r.estateBlocks);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r.message),this.alertService.showInfoMsg(r.message)}})}fetchEstateProperties(){this.listOfProperties=[],this.settingsService.getEstateProperties(this.currentUser,this.block,!1,"").subscribe({next:r=>{if(this.logger.info("getEstateProperties response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.properties.length<=0?(this.alertService.showInfoMsgGeneral("No properties found"),void this.logger.info("No properties found ")):void(this.listOfProperties=r.properties);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}openEstateModalComponent(r,t){const n={initialState:{isAddMode:t,estateProperty:r}};this.addPropertyModalService.config.ignoreBackdropClick=!0,this.addPropertyModalService.config.animated=!0,this.addPropertyBsModalRef=this.addPropertyModalService.show(H,n),this.addPropertyBsModalRef.content.closeBtnName="Close"}}return(o=i).\u0275fac=function(r){return new(r||o)(e.Y36(_.UZ),e.Y36(_.tT),e.Y36(F.e),e.Y36(S.g),e.Y36(C.c),e.Y36(E.Kf))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-estate-properties"]],standalone:!0,features:[e.jDz],decls:32,vars:24,consts:[[3,"pageTitleName","description"],[1,"newItemName"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-plus"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],[1,"col-sm-3"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["id","estate",3,"clearable","ngModel","ngModelChange","change"],["value","A","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],["id","block",3,"clearable","ngModel","ngModelChange","change"],["class","col-sm-2",4,"ngIf"],[1,"col-auto"],["type","button","title","",1,"btn","btn-dim","btn-primary","mt-4",3,"click"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[3,"value"],[1,"col-sm-2"],[1,"form-control-wrap","mt-4"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search property here",1,"form-control",3,"ngModel","ngModelChange"],[1,"align-center","select-cursor",3,"click"],[1,"user-avatar","user-avatar-sm","bg-light"],[1,"icon","ni","ni-edit"]],template:function(r,t){1&r&&(e.TgZ(0,"app-add-item",0)(1,"span",1)(2,"a",2),e.NdJ("click",function(){return t.openEstateModalComponent(null,!0)}),e._UZ(3,"em",3),e.TgZ(4,"span"),e._uU(5,"Add estate property"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e._UZ(9,"app-form-label",7),e.TgZ(10,"div",8)(11,"ng-select",9),e.NdJ("ngModelChange",function(c){return t.estate=c})("change",function(){return t.fetchEstateBlocks()}),e.TgZ(12,"ng-option",10),e._uU(13,"Select Estate"),e.qZA(),e.YNc(14,W,2,2,"ng-option",11),e.qZA()()()(),e.TgZ(15,"div",5)(16,"div",6),e._UZ(17,"app-form-label",7),e.TgZ(18,"div",8)(19,"ng-select",12),e.NdJ("ngModelChange",function(c){return t.block=c})("change",function(){return t.fetchEstateProperties()}),e.TgZ(20,"ng-option",10),e._uU(21,"Select Block"),e.qZA(),e.YNc(22,ee,2,2,"ng-option",11),e.qZA()()()(),e.YNc(23,te,5,1,"div",13),e.TgZ(24,"div",14)(25,"button",15),e.NdJ("click",function(){return t.refreshButton()}),e._uU(26," Search "),e.qZA()()(),e.TgZ(27,"p-table",16,17),e.ALo(29,"filter"),e.YNc(30,re,19,0,"ng-template",18),e.YNc(31,oe,27,18,"ng-template",19),e.qZA()),2&r&&(e.Q6J("pageTitleName","Estate properties")("description","Setup properties estate blocks"),e.xp6(9),e.Q6J("labelForName","estate")("labelName","Estates"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",t.estate),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(3),e.Q6J("labelForName","block")("labelName","Blocks"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",t.block),e.xp6(3),e.Q6J("ngForOf",t.listOfEstateBlocks),e.xp6(1),e.Q6J("ngIf",t.estate),e.xp6(4),e.Q6J("value",e.xi3(29,20,t.listOfProperties,t.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(23,se))("resizableColumns",!0)("autoLayout",!0))},dependencies:[p.ez,p.sg,p.O5,p.JJ,p.rS,h.U$,h.iA,X.jx,a.u5,a.Fj,a.JJ,a.On,d.A0,d.w9,d.jq,y.L,A.$,g.h,V.i],encapsulation:2}),i})()}}]);