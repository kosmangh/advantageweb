import{a as oe,b as le}from"./chunk-MKJDMB7D.js";import{c as Qe}from"./chunk-QQMX5O62.js";import{a as re}from"./chunk-IP4FBAZW.js";import{a as ae}from"./chunk-L66UILBA.js";import{b as Z,c as ee,d as ne,e as Ye}from"./chunk-7PQCCLGB.js";import{a as Ke}from"./chunk-T45HSKH6.js";import{b as We,c as Xe,d as ie}from"./chunk-WH3N5QDN.js";import{i as Q,r as Ue,s as He,t as Je}from"./chunk-KPCRGR73.js";import{h as j,i as te}from"./chunk-543WOPA4.js";import"./chunk-5WO4BOAD.js";import{a as je}from"./chunk-NEQ5BFSP.js";import{b as Be,c as q,e as I,f as G,g as Te,k as Y,l as De,m as ke,o as Ae,p as Re,q as Le,r as Pe,s as Ve,u as qe,v as O,w as Ge,x as ze}from"./chunk-B2QESFZG.js";import{b as $e}from"./chunk-Y725X6Z7.js";import{b as Oe,c as z}from"./chunk-R55IMLXW.js";import"./chunk-LPKVFVKE.js";import{b as A,d as M,e as D,f as Ne,g as R}from"./chunk-IHPVOZWG.js";import"./chunk-HPGLX4ZN.js";import{g as we,m as Fe,p as Me}from"./chunk-7DWKZ4XI.js";import{Ab as pe,Eb as n,Fb as g,Gb as _,Ib as Ce,Ic as Ie,Kc as ye,Lc as P,Mb as w,Nb as be,Ob as B,Qc as k,Rc as X,Sa as o,Sc as xe,Ta as v,Tc as V,Uc as F,Wb as c,Xb as u,Yb as T,bb as d,ca as he,ia as W,ib as h,ja as Se,la as x,nb as t,ob as i,pb as p,qa as C,qb as Ee,ra as b,rb as _e,s as H,tb as y,wb as S,xb as f}from"./chunk-QRSQYA3Q.js";import{d as ge,e as U}from"./chunk-5FZOKLP6.js";function pt(l,s){l&1&&(t(0,"tr")(1,"th"),n(2,"SN"),i(),t(3,"th"),n(4,"Block"),i(),t(5,"th",18),n(6,"Block Size / Acres"),i(),t(7,"th",18),n(8,"Properties"),i()())}function ct(l,s){if(l&1&&(t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td",18),n(6),t(7,"span",19),n(8),i()(),t(9,"td",18),n(10),c(11,"number"),i()()),l&2){let m=s.$implicit,a=s.rowIndex;o(2),g(a+1),o(2),g(m.block),o(2),_("",m.blockSize," "),o(2),_("(",m==null?null:m.blockSizeLeft," left)"),o(2),g(u(11,5,m.properties))}}var tt=(()=>{let s=class s{constructor(a,r,e,E,N){this.viewEstateBlockBsModalRef=a,this.accountService=r,this.settingsService=e,this.alertService=E,this.logger=N,this.accountService.currentUser.subscribe($=>this.currentUser=$)}ngOnInit(){this.viewEstateBlockBsModalRef.setClass("gray modal-md modal-dialog-top"),this.fetchEstates()}fetchEstates(){this.listOfEstateBlocks=[],this.settingsService.getEstateBlocks(this.currentUser,this.estate.recordId).subscribe({next:a=>{if(this.logger.info("getEstates response "+JSON.stringify(a)),a.headerResponse.responseCode!=="000"){this.alertService.error(a.headerResponse.responseMessage);return}if(a.estateBlocks.length<=0){this.alertService.showInfoMsgGeneral("No blocks found"),this.logger.info("No blocks found ");return}this.listOfEstateBlocks=a.estateBlocks},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}};s.\u0275fac=function(r){return new(r||s)(v(j),v(R),v(ie),v(z),v(A))},s.\u0275cmp=x({type:s,selectors:[["ng-component"]],standalone:!0,features:[w],decls:25,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right","border","border-gray",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],[1,"col-auto"],[1,"form-control-wrap"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search here",1,"form-control",3,"ngModel","ngModelChange"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-end"],[1,"text-primary"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"h6",1),n(2),c(3,"titlecase"),i(),t(4,"button",2),S("click",function(){return e.viewEstateBlockBsModalRef==null?null:e.viewEstateBlockBsModalRef.hide()}),t(5,"span",3),n(6,"\xD7"),i()()(),t(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),p(13,"em",10),i(),t(14,"input",11),S("ngModelChange",function(N){return e.searchedKeyword=N}),i()()()(),t(15,"p-table",12,13),c(17,"filter"),h(18,pt,9,0,"ng-template",14)(19,ct,12,7,"ng-template",15),i()()(),t(20,"div",16)(21,"div",7)(22,"a",17),S("click",function(){return e.viewEstateBlockBsModalRef==null?null:e.viewEstateBlockBsModalRef.hide()}),t(23,"span"),n(24,"Close"),i()()()()),r&2&&(o(2),Ce("",u(3,10,e.estate.estateName),"'s blocks - ",e.estate.recordId," | ",e.estate.estateClass,""),o(12),d("ngModel",e.searchedKeyword),o(1),d("value",T(17,12,e.listOfEstateBlocks,e.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("resizableColumns",!0)("autoLayout",!0))},dependencies:[F,V,k,ee,Z,Q,O,q,G,Y,ne],encapsulation:2});let l=s;return l})();var ot=ge(Oe());var K=ge(Oe());var se=(()=>{let s=class s{constructor(a,r,e){this.utilsService=a,this.http=r,this.logger=e}getEstates(a,r,e){let E=new Xe;return E.searchBy=r,E.searchValue=e,E.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"ESTATE_LIST"),this.logger.info("estate list request "+JSON.stringify(E)),this.http.post(`${D.url+M.API_SETTINGS}estates`,E).pipe(H(D.timeout))}createEstate(a,r){return r.createdBy=a.username,r.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"CREATE_ESTATE"),this.logger.info("create zone request "+JSON.stringify(r)),this.http.post(`${D.url+M.API_SETTINGS}createestate`,r).pipe(H(D.timeout))}updateEstate(a,r){return r.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"UPDATE_ESTATE"),r.lastModifiedBy=a.username,this.logger.info("update zone request "+JSON.stringify(r)),this.http.post(`${D.url+M.API_SETTINGS}updateestate`,r).pipe(H(D.timeout))}deleteEstate(a,r){let e=new We;return e.recordId=r,e.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"DELETE_ESTATE"),this.logger.info("delete zone request "+JSON.stringify(e)),this.http.post(`${D.url+M.API_SETTINGS}deleteestate`,e).pipe(H(D.timeout))}};s.\u0275fac=function(r){return new(r||s)(W(Ne),W(we),W(A))},s.\u0275prov=he({token:s,factory:s.\u0275fac,providedIn:"root"});let l=s;return l})();function ft(l,s){if(l&1&&(t(0,"div",37),p(1,"br"),n(2),p(3,"br"),n(4),p(5,"br"),n(6),p(7,"br"),n(8),c(9,"json"),i()),l&2){let m=f();o(2),_("Dirty: ",m.estateFormGroup.dirty," "),o(2),_("Touched: ",m.estateFormGroup.touched," "),o(2),_("Valid: ",m.estateFormGroup.valid," "),o(2),_("Value: ",u(9,4,m.estateFormGroup.value),`
`)}}function vt(l,s){if(l&1&&(t(0,"option",38),n(1),i()),l&2){let m=s.$implicit;d("value",m.recordId),o(1),_(" ",m.regionName," ")}}function gt(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function ht(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function St(l,s){l&1&&(t(0,"div"),n(1," * Estate ID must be at least 2 characters long. "),i())}function Et(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function _t(l,s){l&1&&(t(0,"div"),n(1," * estate name must be longer than 3 characters. "),i())}function Ct(l,s){if(l&1&&(t(0,"option",38),n(1),i()),l&2){let m=s.$implicit;d("value",m.dataValue),o(1),_(" ",m.dataLabel," ")}}function bt(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function It(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function yt(l,s){l&1&&(t(0,"div"),p(1,"app-required-field"),i())}function xt(l,s){l&1&&(t(0,"div"),n(1," * estate name must be longer than 3 characters. "),i())}function wt(l,s){l&1&&(t(0,"span"),p(1,"app-required-field"),i())}function Ft(l,s){l&1&&(t(0,"span"),p(1,"app-required-field"),i())}function Mt(l,s){if(l&1){let m=y();t(0,"div",8)(1,"div",9)(2,"div",39)(3,"select",40)(4,"option",41),n(5,"Choose..."),i(),t(6,"option",42),n(7,"One"),i(),t(8,"option",43),n(9,"Two"),i(),t(10,"option",44),n(11,"Three"),i()(),t(12,"div",45)(13,"label",46),S("click",function(){C(m);let r=f();return b(r.fetchRegions())}),p(14,"em",47),i()()()()()}}function Nt(l,s){l&1&&(Ee(0),t(1,"div",48),p(2,"input",49),t(3,"label",50),n(4," Save & create new estate "),i()(),_e())}function Bt(l,s){if(l&1){let m=y();t(0,"div",34)(1,"button",51),S("click",function(){C(m);let r=f();return b(r.deleteEstate())}),n(2," Delete "),i()()}if(l&2){let m=f();o(1),d("title",m.estateFormGroup.invalid?"There must be errors on the form":"")}}function Tt(l,s){if(l&1){let m=y();t(0,"div",34)(1,"button",52),S("click",function(){C(m);let r=f();return b(r.updateEstate())}),n(2," Update estate "),i()()}if(l&2){let m=f();o(1),d("title",m.estateFormGroup.invalid?"There must be errors on the form":"")}}function Dt(l,s){if(l&1){let m=y();t(0,"div",34)(1,"button",52),S("click",function(){C(m);let r=f();return b(r.saveEstate())}),n(2," Create estate "),i()()}if(l&2){let m=f();o(1),d("title",m.estateFormGroup.invalid?"There must be errors on the form":"")}}var L=l=>({"is-invalid":l}),nt=(()=>{let s=class s{constructor(a,r,e,E,N,$,me,de){this.title=a,this.addEstateBsModalRef=r,this.fb=e,this.accountService=E,this.alertService=N,this.logger=$,this.settingsService=me,this.estateService=de,this.submitted=!1,this.router=Se(Me),this.accountService.currentUser.subscribe(lt=>this.currentUser=lt)}ngOnInit(){if(this.createNewForm(),this.isAddMode)this.estateHeaderMsg="New estate",this.title.setTitle(this.estateHeaderMsg);else{if(this.estateHeaderMsg="Edit "+this.estate.estateName,this.title.setTitle(this.estateHeaderMsg),this.estateFormGroup.patchValue(this.estate),this.estate.leaseStartDate){let a=this.estate.leaseStartDate.toString().replace("[UTC]","");this.estateForm.leaseStartDate.setValue(new Date(a))}if(this.estate.leaseEndDate){let a=this.estate.leaseEndDate.toString().replace("[UTC]","");this.estateForm.leaseEndDate.setValue(new Date(a))}}this.addEstateBsModalRef.setClass("gray modal-md modal-dialog-top"),this.fetchRegions(),this.listOfEstateClasses=this.settingsService.getEstateClass()}createNewForm(){this.estateFormGroup=this.fb.group({estateName:["",{updateOn:"blur",validators:[I.required,I.minLength(3)]}],recordId:["",{updateOn:"blur",validators:[I.required,I.minLength(2)]}],landSize:["",{updateOn:"blur",validators:[I.required,I.minLength(3)]}],estateClass:["",[I.required]],estateLocation:["",{updateOn:"blur",validators:[I.required,I.minLength(3)]}],leaseStartDate:["",[I.required]],leaseEndDate:["",[I.required]],regionId:["",[I.required]],additionalInfo:["",""],saveAndNew:[!1]})}get estateForm(){return this.estateFormGroup.controls}fetchRegions(){this.listOfRegions=[],this.settingsService.getRegions().subscribe({next:a=>{if(this.logger.info("getRegions response "+JSON.stringify(a)),a.headerResponse.responseCode!=="000"){this.alertService.error(a.headerResponse.responseMessage);return}if(a.regions.length<=0){this.alertService.showInfoMsgGeneral("No regions found"),this.logger.info("No regions found");return}this.listOfRegions=a.regions},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}saveEstate(){if(this.alertService.clear(),this.submitted=!0,!this.estateFormGroup.valid)return;let a=this.estateForm.estateName.value;K.default.fire({title:"Confirmation",text:`Do you want to create estate  ${a}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, create",cancelButtonText:"No, cancel"}).then(r=>{if(r.value){if(this.alertService.clear(),this.estateFormGroup.invalid)return;this.estateService.createEstate(this.currentUser,this.estateFormGroup.value).subscribe({next:e=>{if(e.headerResponse.responseCode!=="000"){this.alertService.showErrorMsg(e.headerResponse.responseMessage);return}this.alertService.showSuccessMsg(`${a} created successfully`),this.estateForm.saveAndNew.value||(this.addEstateBsModalRef.hide(),this.accountService.reloadCurrentRoute()),this.estateFormGroup.reset(),this.submitted=!1,this.logAction(`created estate ${a}`,M.SETTINGS)},error:e=>{this.alertService.showInfoMsg(e)}})}else r.dismiss,K.default.DismissReason.cancel})}updateEstate(){if(this.alertService.clear(),this.submitted=!0,!this.estateFormGroup.valid)return;let a=this.estateForm.estateName.value;K.default.fire({position:"top",title:"Confirmation",text:`Do you want to update Estate ${a}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, update"}).then(r=>{if(r.value){if(this.alertService.clear(),this.estateFormGroup.invalid)return;this.estateService.updateEstate(this.currentUser,this.estateFormGroup.value).subscribe({next:e=>{if(this.logger.info("updateUserAccount response:"+JSON.stringify(e)),e.headerResponse.responseCode!=="000"){this.alertService.showErrorMsg(e.headerResponse.responseMessage);return}this.alertService.showSuccessMsg(`${a} updated successfully`),this.addEstateBsModalRef.hide(),this.logAction(`Updated ${a}`,M.SETTINGS),this.accountService.reloadCurrentRoute()},error:e=>{this.alertService.showInfoMsg(e.message)}})}else r.dismiss,K.default.DismissReason.cancel})}deleteEstate(){throw new Error("Method not implemented.")}reloadCurrentRoute(){return U(this,null,function*(){let a=this.router.url;alert("Current route reload "+a),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([a])})})}logAction(a,r){return U(this,null,function*(){yield this.accountService.logUserAudit(a,r)})}};s.\u0275fac=function(r){return new(r||s)(v(Fe),v(j),v(qe),v(R),v(z),v(A),v(ie),v(se))},s.\u0275cmp=x({type:s,selectors:[["ng-component"]],standalone:!0,features:[w],decls:96,vars:67,consts:[["class","p-10",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right","border","border-gray",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"row","gy-3","mt-3"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],[1,"form-control-select"],["id","regionId","formControlName","regionId",1,"form-control",3,"ngClass"],["value","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","formControlName","recordId","id","recordId","autocomplete","off",1,"form-control",3,"ngClass"],["type","text","formControlName","estateName","id","estateName","autocomplete","off",1,"form-control",3,"ngClass"],["id","estateClass","formControlName","estateClass",1,"form-control",3,"ngClass"],["labelName","Land Size",3,"labelForName"],[1,"form-text-hint"],[1,"overline-title"],["type","number","formControlName","landSize","id","landSize","autocomplete","off",1,"form-control",3,"ngClass"],["labelForName","estateLocation","labelName","Location"],["type","text","formControlName","estateLocation","id","estateLocation","autocomplete","off",1,"form-control",3,"ngClass"],["yearRange","2000:2021","styleClass","w-100","formControlName","leaseStartDate","id","leaseStartDate","dateFormat","dd/mm/yy",3,"monthNavigator","yearNavigator","showIcon","ngClass"],["styleClass","w-100","formControlName","leaseEndDate","id","leaseEndDate","dateFormat","dd/mm/yy",3,"showIcon","ngClass"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-12"],[3,"labelForName","showRequired","labelName"],["type","additionalInfo","formControlName","additionalInfo","id","additionalInfo",1,"form-control",2,"min-height","30px"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],["data-bs-dismiss","modal",1,"btn","btn-outline-light","btn-sm",3,"click"],["class","col-auto",4,"ngIf"],[1,"p-10"],[3,"value"],[1,"input-group","mb-3"],["id","inputGroupSelect02",1,"custom-select"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"input-group-append"],["for","inputGroupSelect02","containerClass","customClass","tooltip","Click to refresh if region is not found",1,"input-group-text",3,"click"],[1,"icon","ni","fs-15px","ni-repeat","text-primary"],[1,"custom-control","custom-control-sm","custom-checkbox","checked"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew","id","saveAndNew",1,"custom-control-input"],["for","saveAndNew",1,"custom-control-label","fw-bolder"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"btn","btn-primary","btn-sm",3,"title","click"]],template:function(r,e){r&1&&(h(0,ft,10,6,"div",0),t(1,"form",1)(2,"div",2)(3,"h6",3),n(4),c(5,"titlecase"),i(),t(6,"button",4),S("click",function(){return e.addEstateBsModalRef==null?null:e.addEstateBsModalRef.hide()}),t(7,"span",5),n(8,"\xD7"),i()()(),t(9,"div",6),p(10,"app-required-fields-notice"),t(11,"div",7)(12,"div",8)(13,"div",9),p(14,"app-form-label",10),t(15,"div",11)(16,"div",12)(17,"select",13)(18,"option",14),n(19,"Select One"),i(),h(20,vt,2,2,"option",15),i(),t(21,"span",16),h(22,gt,2,0,"div",17),i()()()()(),t(23,"div",8)(24,"div",9),p(25,"app-form-label",10),t(26,"div",11),p(27,"input",18),t(28,"span",16),h(29,ht,2,0,"div",17)(30,St,2,0,"div",17),i()()()(),t(31,"div",8)(32,"div",9),p(33,"app-form-label",10),t(34,"div",11),p(35,"input",19),t(36,"span",16),h(37,Et,2,0,"div",17)(38,_t,2,0,"div",17),i()()()(),t(39,"div",8)(40,"div",9),p(41,"app-form-label",10),t(42,"div",11)(43,"div",12)(44,"select",20)(45,"option",14),n(46,"Select One"),i(),h(47,Ct,2,2,"option",15),i(),t(48,"span",16),h(49,bt,2,0,"div",17),i()()()()(),t(50,"div",8)(51,"div",9),p(52,"app-form-label",21),t(53,"div",11)(54,"div",22)(55,"span",23),n(56,"Acre(s)"),i()(),p(57,"input",24),t(58,"span",16),h(59,It,2,0,"div",17),i()()()(),t(60,"div",8)(61,"div",9),p(62,"app-form-label",25),t(63,"div",11),p(64,"input",26),t(65,"span",16),h(66,yt,2,0,"div",17)(67,xt,2,0,"div",17),i()()()(),t(68,"div",8)(69,"div",9),p(70,"app-form-label",10)(71,"p-calendar",27),t(72,"span",16),h(73,wt,2,0,"span",17),i()()(),t(74,"div",8)(75,"div",9),p(76,"app-form-label",10)(77,"p-calendar",28),t(78,"span",16),h(79,Ft,2,0,"span",17),i()()(),h(80,Mt,15,0,"div",29),t(81,"div",30)(82,"div",9),p(83,"app-form-label",31),t(84,"div",11)(85,"textarea",32),n(86,"                        "),i()()()(),t(87,"div",8),h(88,Nt,5,0,"ng-container",17),i()()(),t(89,"div",33)(90,"div",34)(91,"button",35),S("click",function(){return e.addEstateBsModalRef==null?null:e.addEstateBsModalRef.hide()}),n(92," Close "),i()(),h(93,Bt,3,1,"div",36)(94,Tt,3,1,"div",36)(95,Dt,3,1,"div",36),i()()),r&2&&(d("ngIf",!1),o(1),d("formGroup",e.estateFormGroup),o(3),g(u(5,49,e.estateHeaderMsg)),o(10),d("labelForName","regionId")("labelName","Region"),o(3),d("ngClass",B(51,L,((e.estateForm.regionId==null?null:e.estateForm.regionId.touched)||(e.estateForm.regionId==null?null:e.estateForm.regionId.dirty)||e.submitted)&&(e.estateForm.regionId==null?null:e.estateForm.regionId.errors))),o(3),d("ngForOf",e.listOfRegions),o(2),d("ngIf",e.estateForm.regionId==null||e.estateForm.regionId.errors==null?null:e.estateForm.regionId.errors.required),o(3),d("labelForName","recordId")("labelName","Estate ID"),o(2),d("ngClass",B(53,L,((e.estateForm.recordId==null?null:e.estateForm.recordId.touched)||(e.estateForm.recordId==null?null:e.estateForm.recordId.dirty)||e.submitted)&&(e.estateForm.recordId==null?null:e.estateForm.recordId.errors))),o(2),d("ngIf",e.estateForm.recordId==null||e.estateForm.recordId.errors==null?null:e.estateForm.recordId.errors.required),o(1),d("ngIf",e.estateForm.recordId==null||e.estateForm.recordId.errors==null?null:e.estateForm.recordId.errors.minlength),o(3),d("labelForName","estateName")("labelName","Estate Name"),o(2),d("ngClass",B(55,L,((e.estateForm.estateName==null?null:e.estateForm.estateName.touched)||(e.estateForm.estateName==null?null:e.estateForm.estateName.dirty)||e.submitted)&&(e.estateForm.estateName==null?null:e.estateForm.estateName.errors))),o(2),d("ngIf",e.estateForm.estateName==null||e.estateForm.estateName.errors==null?null:e.estateForm.estateName.errors.required),o(1),d("ngIf",e.estateForm.estateName==null||e.estateForm.estateName.errors==null?null:e.estateForm.estateName.errors.minlength),o(3),d("labelForName","estateClass")("labelName","Estate Class"),o(3),d("ngClass",B(57,L,((e.estateForm.estateClass==null?null:e.estateForm.estateClass.touched)||(e.estateForm.estateClass==null?null:e.estateForm.estateClass.dirty)||e.submitted)&&(e.estateForm.estateClass==null?null:e.estateForm.estateClass.errors))),o(3),d("ngForOf",e.listOfEstateClasses),o(2),d("ngIf",e.estateForm.estateClass==null||e.estateForm.estateClass.errors==null?null:e.estateForm.estateClass.errors.required),o(3),d("labelForName","landSize"),o(5),d("ngClass",B(59,L,((e.estateForm.landSize==null?null:e.estateForm.landSize.touched)||(e.estateForm.landSize==null?null:e.estateForm.landSize.dirty)||e.submitted)&&(e.estateForm.landSize==null?null:e.estateForm.landSize.errors))),o(2),d("ngIf",e.estateForm.landSize==null||e.estateForm.landSize.errors==null?null:e.estateForm.landSize.errors.required),o(5),d("ngClass",B(61,L,((e.estateForm.estateLocation==null?null:e.estateForm.estateLocation.touched)||(e.estateForm.estateLocation==null?null:e.estateForm.estateLocation.dirty)||e.submitted)&&(e.estateForm.estateLocation==null?null:e.estateForm.estateLocation.errors))),o(2),d("ngIf",e.estateForm.estateLocation==null||e.estateForm.estateLocation.errors==null?null:e.estateForm.estateLocation.errors.required),o(1),d("ngIf",e.estateForm.estateLocation==null||e.estateForm.estateLocation.errors==null?null:e.estateForm.estateLocation.errors.minlength),o(3),d("labelForName","leaseStartDate")("labelName","Lease Start Date"),o(1),d("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngClass",B(63,L,((e.estateForm.leaseStartDate==null?null:e.estateForm.leaseStartDate.touched)||(e.estateForm.leaseStartDate==null?null:e.estateForm.leaseStartDate.dirty)||e.submitted)&&(e.estateForm.leaseStartDate==null?null:e.estateForm.leaseStartDate.errors))),o(2),d("ngIf",e.estateForm.leaseStartDate==null||e.estateForm.leaseStartDate.errors==null?null:e.estateForm.leaseStartDate.errors.required),o(3),d("labelForName","leaseEndDate")("labelName","Lease End Date"),o(1),d("showIcon",!0)("ngClass",B(65,L,((e.estateForm.leaseEndDate==null?null:e.estateForm.leaseEndDate.touched)||(e.estateForm.leaseEndDate==null?null:e.estateForm.leaseEndDate.dirty)||e.submitted)&&(e.estateForm.leaseEndDate==null?null:e.estateForm.leaseEndDate.errors))),o(2),d("ngIf",e.estateForm.leaseEndDate==null||e.estateForm.leaseEndDate.errors==null?null:e.estateForm.leaseEndDate.errors.required),o(1),d("ngIf",!1),o(3),d("labelForName","additionalInfo")("showRequired",!1)("labelName","Addition Information"),o(5),d("ngIf",e.isAddMode),o(5),d("ngIf",!e.isAddMode),o(1),d("ngIf",!e.isAddMode),o(1),d("ngIf",e.isAddMode))},dependencies:[F,Ie,ye,P,xe,k,O,De,Pe,Ve,q,ke,Be,Le,G,Te,Ge,Ae,Re,Qe,He,Ue,Ke,ze,je,le,oe],encapsulation:2});let l=s;return l})();function kt(l,s){if(l&1&&(t(0,"li")(1,"span",9),n(2,"Properties"),i(),n(3," - "),t(4,"span",10),n(5),c(6,"number"),i()()),l&2){let m=f();o(5),g(u(6,1,m.estate.properties))}}var at=(()=>{let s=class s{constructor(a,r){this.viewEstateBsModalRef=a,this.accountService=r,this.accountService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.viewEstateBsModalRef.setClass("gray modal-md modal-dialog-top")}};s.\u0275fac=function(r){return new(r||s)(v(j),v(R))},s.\u0275cmp=x({type:s,selectors:[["ng-component"]],standalone:!0,features:[w],decls:127,vars:55,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right","border","border-gray",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"pricing-body"],[1,"pricing-features"],[1,"preview-title-lg","overline-title"],[1,"w-50","text-soft"],[1,"ms-auto","text-solid"],[4,"ngIf"],[1,"preview-title-lg","overline-title","mt-2"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"h6",1),n(2),c(3,"titlecase"),i(),t(4,"button",2),S("click",function(){return e.viewEstateBsModalRef==null?null:e.viewEstateBsModalRef.hide()}),t(5,"span",3),n(6,"\xD7"),i()()(),t(7,"div",4)(8,"div",5)(9,"div",6)(10,"ul",7)(11,"span",8),n(12,"Estate Information"),i(),t(13,"li")(14,"span",9),n(15,"Estate Name"),i(),n(16," - "),t(17,"span",10),n(18),i()(),t(19,"li")(20,"span",9),n(21,"Estate Class"),i(),n(22," - "),t(23,"span",10),n(24),c(25,"removeHyphen"),c(26,"titlecase"),i()(),t(27,"li")(28,"span",9),n(29,"Region"),i(),n(30," - "),t(31,"span",10),n(32),c(33,"titlecase"),i()(),t(34,"li")(35,"span",9),n(36,"Land Size "),t(37,"small"),n(38,"(Acres)"),i()(),n(39," - "),t(40,"span",10),n(41),c(42,"number"),i()(),t(43,"li")(44,"span",9),n(45,"Land Size Left"),t(46,"small"),n(47," (Acres)"),i()(),n(48," - "),t(49,"span",10),n(50),c(51,"number"),i()(),t(52,"li")(53,"span",9),n(54,"Lease Start Date"),i(),n(55," - "),t(56,"span",10),n(57),c(58,"date"),c(59,"cleanDate"),t(60,"small"),n(61),c(62,"timeAgo"),i()()(),t(63,"li")(64,"span",9),n(65,"Lease End Date"),i(),n(66," - "),t(67,"span",10),n(68),c(69,"date"),c(70,"cleanDate"),t(71,"small"),n(72),c(73,"timeAgo"),i()()(),t(74,"li")(75,"span",9),n(76,"Duration Left"),i(),n(77," - "),t(78,"span",10),n(79),i()(),t(80,"li")(81,"span",9),n(82,"Blocks"),i(),n(83," - "),t(84,"span",10),n(85),c(86,"number"),i()(),h(87,kt,7,3,"li",11),t(88,"span",12),n(89,"Estate activities"),i(),t(90,"li")(91,"span",9),n(92,"Created By"),i(),n(93," - "),t(94,"span",10),n(95),i()(),t(96,"li")(97,"span",9),n(98,"Created Date"),i(),n(99," - "),t(100,"span",10),n(101),c(102,"date"),t(103,"small"),n(104),c(105,"timeAgo"),i()()(),t(106,"li")(107,"span",9),n(108,"Last Modified By"),i(),n(109," - "),t(110,"span",10),n(111),i()(),t(112,"li")(113,"span",9),n(114,"Modified Date"),i(),n(115," - "),t(116,"span",10),n(117),c(118,"date"),t(119,"small"),n(120),c(121,"timeAgo"),i()()()()()()(),t(122,"div",13)(123,"div",14)(124,"a",15),S("click",function(){return e.viewEstateBsModalRef==null?null:e.viewEstateBsModalRef.hide()}),t(125,"span"),n(126,"Close"),i()()()()),r&2&&(o(2),_("",u(3,19,e.estate.estateName)," Details"),o(16),g(e.estate.estateName),o(6),g(u(25,21,u(26,23,e.estate.estateClass))),o(8),g(u(33,25,e.estate.regionName)),o(9),g(u(42,27,e.estate.landSize)),o(9),g(u(51,29,e.estate.landSizeLeft)),o(7),_(" ",u(58,31,u(59,33,e.estate.leaseStartDate))," , "),o(4),_("",u(62,35,e.estate.leaseStartDate==null?null:e.estate.leaseStartDate.toString())," "),o(7),_(" ",u(69,37,u(70,39,e.estate.leaseEndDate))," , "),o(4),_("",u(73,41,e.estate.leaseEndDate==null?null:e.estate.leaseEndDate.toString())," "),o(7),g(e.estate.durationLeft),o(6),g(u(86,43,e.estate.totalBlocks)),o(2),d("ngIf",!1),o(8),g(e.estate.createdBy),o(6),_("",T(102,45,e.estate.createdDate,"medium")," ,"),o(3),g(u(105,48,e.estate.createdDate==null?null:e.estate.createdDate.toString())),o(7),g(e.estate.createdBy),o(6),_("",T(118,50,e.estate.lastModifiedDate,"medium")," ,"),o(3),g(u(121,53,e.estate.lastModifiedDate==null?null:e.estate.lastModifiedDate.toString())))},dependencies:[F,P,V,k,X,Ye,re,ae],encapsulation:2});let l=s;return l})();var rt=(()=>{let s=class s{};s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=x({type:s,selectors:[["ng-component"]],standalone:!0,features:[w],decls:2,vars:0,template:function(r,e){r&1&&(t(0,"p"),n(1,"selected-estate-properties works!"),i())},dependencies:[F],encapsulation:2});let l=s;return l})();function At(l,s){l&1&&(t(0,"tr")(1,"th"),n(2,"SN"),i(),t(3,"th"),n(4,"Estate"),i(),t(5,"th"),n(6,"Estate Class"),i(),t(7,"th"),n(8,"Region"),i(),t(9,"th"),n(10,"Land Size / Acres"),i(),t(11,"th"),n(12,"Lease Start Date"),i(),t(13,"th"),n(14,"Lease End Date"),i(),t(15,"th"),n(16,"Duration Left"),i(),t(17,"th"),n(18,"Blocks"),i(),p(19,"th"),t(20,"th"),n(21,"More Actions"),i()())}function Rt(l,s){if(l&1){let m=y();t(0,"a",22),S("click",function(){C(m);let r=f().$implicit,e=f();return b(e.openEstateModalComponent(r,!1))}),p(1,"em",23),i()}}function Lt(l,s){if(l&1){let m=y();t(0,"a",24),S("click",function(){C(m);let r=f().$implicit,e=f();return b(e.openEstateDetailsModalComponent(r))}),p(1,"em",25),i()}}function Pt(l,s){if(l&1){let m=y();t(0,"li")(1,"a",31),S("click",function(){C(m);let r=f(2).$implicit,e=f();return b(e.openEstateBlocksModalComponent(r))}),p(2,"em",33),t(3,"span"),n(4,"Blocks"),i()()()}}function Vt(l,s){if(l&1){let m=y();t(0,"li")(1,"a",31),S("click",function(){C(m);let r=f(2).$implicit,e=f();return b(e.openEstatePropertiesModalComponent(r))}),p(2,"em",34),t(3,"span"),n(4,"Properties"),i()()()}}function qt(l,s){if(l&1){let m=y();t(0,"div",26)(1,"a",27),p(2,"em",28),i(),t(3,"div",29)(4,"ul",30)(5,"li")(6,"a",31),S("click",function(){C(m);let r=f().$implicit,e=f();return b(e.openEstateModalComponent(r,!1))}),p(7,"em",23),t(8,"span"),n(9,"Edit estate"),i()()(),t(10,"li")(11,"a",31),S("click",function(){C(m);let r=f().$implicit,e=f();return b(e.openEstateDetailsModalComponent(r))}),p(12,"em",25),t(13,"span"),n(14,"View details"),i()()(),h(15,Pt,5,0,"li",32)(16,Vt,5,0,"li",32),i()()()}l&2&&(o(15),d("ngIf",!1),o(1),d("ngIf",!1))}function Gt(l,s){if(l&1){let m=y();t(0,"tr",15),S("mouseenter",function(){let e=C(m).rowIndex,E=f();return b(E.showButtons(e))})("mouseleave",function(){C(m);let r=f();return b(r.hideButtons())}),t(1,"td"),n(2),i(),t(3,"td"),p(4,"app-full-name",16),i(),t(5,"td",17),n(6),c(7,"removeHyphen"),c(8,"titlecase"),i(),t(9,"td"),n(10),i(),t(11,"td"),n(12),t(13,"span",18),n(14),i()(),t(15,"td"),n(16),c(17,"date"),c(18,"cleanDate"),i(),t(19,"td"),n(20),c(21,"date"),c(22,"cleanDate"),i(),t(23,"td"),n(24),i(),t(25,"td"),n(26),c(27,"number"),i(),t(28,"td")(29,"span"),h(30,Rt,2,0,"a",19),i(),t(31,"span"),h(32,Lt,2,0,"a",20),i()(),t(33,"td"),h(34,qt,17,2,"div",21),i()()}if(l&2){let m=s.$implicit,a=s.rowIndex,r=f();o(2),g(a+1),o(2),pe("fullName",m==null?null:m.estateName),pe("otherFieldName",m==null?null:m.recordId),o(2),g(u(7,14,u(8,16,m.estateClass))),o(4),g(m==null?null:m.regionName),o(2),_("",m==null?null:m.landSize," "),o(2),_("(",m==null?null:m.landSizeLeft," left)"),o(2),g(T(17,18,u(18,21,m==null?null:m.leaseStartDate),"mediumDate")),o(4),g(T(21,23,u(22,26,m==null?null:m.leaseEndDate),"mediumDate")),o(4),_(" ",m==null?null:m.durationLeft," "),o(2),g(u(27,28,m==null?null:m.totalBlocks)),o(4),d("ngIf",r.showItemButtons&&r.selectedItem===a),o(2),d("ngIf",r.showItemButtons&&r.selectedItem===a),o(2),d("ngIf",!0)}}var Ot=()=>[5,10,25,50],Zi=(()=>{let s=class s{constructor(a,r,e,E,N,$,me){this.estateService=a,this.alertService=r,this.accountService=e,this.logger=E,this.estateModalService=N,this.estateBlockModalService=$,this.estatePropertyModalService=me,this.showActionButtons=!1,this.items=[{name:"Item 1"},{name:"Item 2"},{name:"Item 3"}],this.showItemButtons=!1,this.accountService.currentUser.subscribe(de=>this.currentUser=de)}showButtons(a){this.showItemButtons=!0,this.selectedItem=a}hideButtons(){this.showItemButtons=!1,this.selectedItem=null}editItem(a){}deleteItem(a){}ngOnInit(){this.searchBy="ALL",this.refreshButton(),this.logAction("Viewed estates page",M.SETTINGS)}ngOnDestroy(){this.estateModalService.hide(),ot.default.close()}refreshButton(){this.fetchEstates()}fetchEstates(){this.listOfEstates=[],this.estateService.getEstates(this.currentUser,this.searchBy,this.searchValue).subscribe({next:a=>{if(this.logger.info("getEstates response "+JSON.stringify(a)),a.headerResponse.responseCode!=="000"){this.alertService.error(a.headerResponse.responseMessage);return}if(a.estates.length<=0){this.alertService.showInfoMsgGeneral("No estates found"),this.logger.info("No estates found");return}this.listOfEstates=a.estates},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}openEstateModalComponent(a,r){let e={initialState:{isAddMode:r,estate:a}};this.estateModalService.config.ignoreBackdropClick=!0,this.estateModalService.config.animated=!0,this.addEstateBsModalRef=this.estateModalService.show(nt,e),this.addEstateBsModalRef.content.closeBtnName="Close"}openEstateDetailsModalComponent(a){let r={initialState:{estate:a}};this.estateModalService.config.ignoreBackdropClick=!1,this.estateModalService.config.animated=!0,this.addEstateBsModalRef=this.estateModalService.show(at,r),this.addEstateBsModalRef.content.closeBtnName="Close"}openEstateBlocksModalComponent(a){let r={initialState:{estate:a}};this.estateBlockModalService.config.ignoreBackdropClick=!1,this.estateBlockModalService.config.animated=!0,this.viewEstateBlockBsModalRef=this.estateModalService.show(tt,r),this.viewEstateBlockBsModalRef.content.closeBtnName="Close"}openEstatePropertiesModalComponent(a){let r={initialState:{estate:a}};this.estatePropertyModalService.config.ignoreBackdropClick=!1,this.estatePropertyModalService.config.animated=!0,this.viewEstatePropertyBsModalRef=this.estateModalService.show(rt,r),this.viewEstatePropertyBsModalRef.content.closeBtnName="Close"}logAction(a,r){return U(this,null,function*(){yield this.accountService.logUserAudit(a,r)})}};s.\u0275fac=function(r){return new(r||s)(v(se),v(z),v(R),v(A),v(te),v(te),v(te))},s.\u0275cmp=x({type:s,selectors:[["app-estate-list"]],standalone:!0,features:[w],decls:20,vars:14,consts:[[3,"pageTitleName","description"],[1,"newItemName"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-plus"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],[1,"col-auto"],[1,"form-control-wrap"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search here",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","",1,"btn","btn-dim","btn-primary",3,"click"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[3,"mouseenter","mouseleave"],[3,"fullName","otherFieldName"],[1,"text-capitalize"],[1,"text-primary"],["tooltip","Edit","class","btn btn-trigger btn-icon fs-15px","data-bs-toggle","tooltip","data-bs-placement","top","title","","data-bs-original-title","Wallet","aria-label","Wallet",3,"click",4,"ngIf"],["tooltip","View","class","btn btn-trigger btn-icon fs-15px","data-bs-toggle","tooltip","data-bs-placement","top","title","","data-bs-original-title","Send Email","aria-label","Send Email",3,"click",4,"ngIf"],["class","drodown",4,"ngIf"],["tooltip","Edit","data-bs-toggle","tooltip","data-bs-placement","top","title","","data-bs-original-title","Wallet","aria-label","Wallet",1,"btn","btn-trigger","btn-icon","fs-15px",3,"click"],[1,"icon","ni","ni-edit"],["tooltip","View","data-bs-toggle","tooltip","data-bs-placement","top","title","","data-bs-original-title","Send Email","aria-label","Send Email",1,"btn","btn-trigger","btn-icon","fs-15px",3,"click"],[1,"icon","ni","ni-eye"],[1,"drodown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-icon","btn-light"],[1,"icon","ni","ni-more-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"link-list-opt","no-bdr"],[3,"click"],[4,"ngIf"],[1,"icon","ni","ni-home"],[1,"icon","ni","ni-property"]],template:function(r,e){r&1&&(t(0,"app-add-item",0)(1,"span",1)(2,"a",2),S("click",function(){return e.openEstateModalComponent(null,!0)}),p(3,"em",3),t(4,"span"),n(5,"Add estate"),i()()()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),p(10,"em",8),i(),t(11,"input",9),S("ngModelChange",function(N){return e.searchedKeyword=N}),i()()(),t(12,"div",5)(13,"button",10),S("click",function(){return e.refreshButton()}),n(14," Refresh "),i()()(),t(15,"p-table",11,12),c(17,"filter"),h(18,At,22,0,"ng-template",13)(19,Gt,35,30,"ng-template",14),i()),r&2&&(d("pageTitleName","Estates")("description",`Estates are the demarcation of land within the Region
`),o(11),d("ngModel",e.searchedKeyword),o(4),d("value",T(17,10,e.listOfEstates,e.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",be(13,Ot))("resizableColumns",!0)("autoLayout",!0))},dependencies:[F,P,V,k,X,ee,Z,Q,O,q,G,Y,$e,Je,ne,re,ae,le,oe],encapsulation:2});let l=s;return l})();export{Zi as EstateListComponent};
