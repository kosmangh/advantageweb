import{a as Le,b as re}from"./chunk-6YXFCAQQ.js";import{a as te}from"./chunk-FMEHXA2G.js";import{a as Ke}from"./chunk-IP4FBAZW.js";import{a as Ge}from"./chunk-L66UILBA.js";import{b as Be,c as De,d as Ve}from"./chunk-7PQCCLGB.js";import{a as qe}from"./chunk-T45HSKH6.js";import{d as Pe}from"./chunk-WH3N5QDN.js";import{i as xe,r as W,s as Z,t as Re}from"./chunk-KPCRGR73.js";import{h as w,i as ee}from"./chunk-543WOPA4.js";import"./chunk-5WO4BOAD.js";import{a as we}from"./chunk-NEQ5BFSP.js";import{b as Ie,c as $,e as S,f as H,g as Fe,i as _e,k as ye,l as Ce,n as be,o as Oe,p as Ne,q as Y,r as J,s as z,u as Ee,v as X,w as Ae,x as Te}from"./chunk-B2QESFZG.js";import{b as Me}from"./chunk-Y725X6Z7.js";import{b as ke,c as Q}from"./chunk-R55IMLXW.js";import"./chunk-LPKVFVKE.js";import{b as U,d as V,f as ge,g as R}from"./chunk-IHPVOZWG.js";import"./chunk-HPGLX4ZN.js";import{m as Se}from"./chunk-7DWKZ4XI.js";import{Ab as b,Eb as i,Fb as u,Gb as O,Ic as fe,Kc as ve,Lc as B,Mb as k,Nb as ue,Ob as I,Pb as x,Qc as D,Rc as j,Sa as o,Ta as h,Tc as he,Uc as T,Wb as F,Xb as y,Yb as le,bb as r,ib as f,ja as ce,la as N,nb as t,ob as n,pb as m,qa as E,qb as q,ra as A,rb as P,tb as M,wb as v,xb as g}from"./chunk-QRSQYA3Q.js";import{a as K,d as me,e as L}from"./chunk-5FZOKLP6.js";var ne=me(ke());var G=me(ke());var je=(()=>{let d=class d{};d.\u0275fac=function(p){return new(p||d)},d.\u0275cmp=N({type:d,selectors:[["app-email-not-valid"]],standalone:!0,features:[k],decls:1,vars:0,template:function(p,e){p&1&&i(0," * Invalid email address ")},dependencies:[T],encapsulation:2});let l=d;return l})();function it(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}var _=l=>({"is-invalid":l});function ot(l,d){if(l&1&&(t(0,"li")(1,"div",63),m(2,"input",64),t(3,"label",65),i(4),n()()()),l&2){let a=d.$implicit,s=g();o(2),b("value",a.dataValue),r("id",a.dataValue)("ngClass",I(5,_,((s.personalInfoForm.occupantType==null?null:s.personalInfoForm.occupantType.touched)||(s.personalInfoForm.occupantType==null?null:s.personalInfoForm.occupantType.dirty))&&!(s.personalInfoForm.occupantType!=null&&s.personalInfoForm.occupantType.valid))),o(1),b("for",a.dataValue),o(1),u(a.dataLabel)}}function at(l,d){l&1&&(t(0,"div",66),m(1,"app-required-field"),n())}function lt(l,d){if(l&1&&(t(0,"li")(1,"div",63),m(2,"input",67),t(3,"label",65),i(4),n()()()),l&2){let a=d.$implicit,s=g();o(2),b("value",a.dataValue),r("id",a.dataValue)("ngClass",I(5,_,((s.personalInfoForm.gender==null?null:s.personalInfoForm.gender.touched)||(s.personalInfoForm.gender==null?null:s.personalInfoForm.gender.dirty))&&!(s.personalInfoForm.gender!=null&&s.personalInfoForm.gender.valid))),o(1),b("for",a.dataValue),o(1),u(a.dataLabel)}}function rt(l,d){l&1&&(t(0,"div",66),m(1,"app-required-field"),n())}function dt(l,d){l&1&&(t(0,"span"),m(1,"app-required-field"),n())}function pt(l,d){if(l&1&&(t(0,"option",68),i(1),n()),l&2){let a=d.$implicit;r("value",a.dataValue),o(1),O(" ",a.dataLabel," ")}}function st(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function mt(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function ct(l,d){if(l&1&&(t(0,"option",68),i(1),n()),l&2){let a=d.$implicit;r("value",a.dataValue),o(1),O(" ",a.dataLabel," ")}}function ut(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function ft(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function vt(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function ht(l,d){l&1&&(t(0,"div"),i(1," * Invalid mobile number "),n())}function St(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function gt(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function It(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function Ft(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function _t(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function yt(l,d){l&1&&(t(0,"div"),i(1," * Invalid mobile number "),n())}function Ct(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function bt(l,d){l&1&&(t(0,"div"),m(1,"app-email-not-valid"),n())}function Ot(l,d){if(l&1&&(t(0,"option",68),i(1),n()),l&2){let a=d.$implicit;r("value",a.dataValue),o(1),O(" ",a.dataLabel," ")}}function Nt(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function Et(l,d){if(l&1&&(t(0,"li")(1,"div",70),m(2,"input",71),t(3,"label",72),i(4),n()()()),l&2){let a=d.$implicit;o(2),b("value",a.dataValue),r("id",a.dataValue),o(1),b("for",a.dataValue),o(1),u(a.dataLabel)}}function At(l,d){l&1&&(t(0,"div"),m(1,"app-required-field"),n())}function kt(l,d){if(l&1&&(t(0,"div",69)(1,"div",24),m(2,"app-form-label",25),t(3,"div",26)(4,"ul",31),f(5,Et,5,4,"li",32),n(),t(6,"span",28),f(7,At,2,0,"div",29),n()()()()),l&2){let a=g();o(2),r("labelForName","relationship")("labelName","Relationship"),o(3),r("ngForOf",a.listOfRelationship),o(2),r("ngIf",a.nokForm.relationship==null||a.nokForm.relationship.errors==null?null:a.nokForm.relationship.errors.required)}}function Tt(l,d){l&1&&(q(0),t(1,"div",73),m(2,"input",74),t(3,"label",75),i(4," Save & create new occupant "),n()(),P())}function wt(l,d){if(l&1){let a=M();t(0,"div",43)(1,"button",76),v("click",function(){E(a);let p=g();return A(p.updateOccupant())}),i(2," Update occupant "),n()()}if(l&2){let a=g();o(1),r("disabled",!a.nokFormGroup.valid)("title",a.nokFormGroup.invalid?"There must be errors on the form":"")}}function Mt(l,d){if(l&1){let a=M();t(0,"div",43)(1,"button",76),v("click",function(){E(a);let p=g();return A(p.saveOccupant())}),i(2," Create occupant "),n()()}if(l&2){let a=g();o(1),r("disabled",!a.nokFormGroup.valid)("title",a.nokFormGroup.invalid?"There must be errors on the form":"")}}var pe=(l,d)=>({current:l,done:d}),se=(l,d)=>({"active ":l,done:d}),Ye=(()=>{let d=class d{constructor(s,p,e,c,C,ie,oe){this.title=s,this.addInstitutionOccupantBsModalRef=p,this.fb=e,this.accountService=c,this.alertService=C,this.logger=ie,this.settingsService=oe,this.currentStep=1,this.personalSubmitted=!1,this.occupantsService=ce(te),this.accountService.currentUser.subscribe(ae=>this.currentUser=ae)}continueStep(){this.currentStep<=3&&this.currentStep++}previousStep(){(this.currentStep<=3||this.currentStep<=0)&&this.currentStep--}ngOnInit(){if(this.currentStep=1,this.createPersonalInfoForm(),this.createContactAddressForm(),this.createNokForm(),this.isAddMode)this.headerMsg="New individual occupant",this.title.setTitle(this.headerMsg);else if(this.headerMsg="Edit "+this.occupant.occupantName,this.title.setTitle(this.headerMsg),this.personalInformGroup.patchValue(this.occupant),this.contactAddressFormGroup.patchValue(this.occupant),this.nokFormGroup.patchValue(this.occupant),this.occupant.dateOfBirth){let s=this.occupant.dateOfBirth.toString().replace("[UTC]","");this.personalInfoForm.dateOfBirth.setValue(new Date(s))}this.addInstitutionOccupantBsModalRef.setClass("gray modal-xl modal-dialog-top"),this.listOfGenders=this.settingsService.getGender(),this.listOfMaritalStatus=this.settingsService.getMaritalStatus(),this.listOfRelationship=this.settingsService.getRelationships(),this.listOfIdTypes=this.settingsService.getIdTypes(),this.listOfOccupantTypes=this.settingsService.getOccupantType()}createPersonalInfoForm(){this.personalInformGroup=this.fb.group({occupantName:["",{updateOn:"blur",validators:[S.required]}],occupantType:["",[S.required]],gender:["",[S.required]],dateOfBirth:["",[S.required]],maritalStatus:["",[S.required]],idType:["",[S.required]],idNo:["",{updateOn:"blur",validators:[S.required]}],occupation:["",{updateOn:"blur",validators:[S.required]}],recordId:[""]})}createContactAddressForm(){this.contactAddressFormGroup=this.fb.group({mobileNo:["",{updateOn:"blur",validators:[S.required,S.minLength(10),S.minLength(12)]}],emailAddress:["",[S.required]],homeTown:["",[S.required]],localAddress:["",[S.required]]})}createNokForm(){this.nokFormGroup=this.fb.group({nextOfKin:["",{updateOn:"blur",validators:[S.required]}],relationship:["",[S.required]],nokAddress:["",{updateOn:"blur",validators:[S.required]}],nokEmail:["",{updateOn:"blur",validators:[S.required,S.email]}],nokPhone:["",{updateOn:"blur",validators:[S.required,S.minLength(10),S.minLength(12)]}],saveAndNew:[!1],institutional:[!1]})}get personalInfoForm(){return this.personalInformGroup.controls}get contactAddressForm(){return this.contactAddressFormGroup.controls}get nokForm(){return this.nokFormGroup.controls}saveOccupant(){let s=this.personalInfoForm.occupantName.value;G.default.fire({title:"Confirmation",text:`Do you want to create  ${s}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, create",cancelButtonText:"No, cancel"}).then(p=>{if(p.value){if(this.alertService.clear(),this.nokFormGroup.invalid)return;let e=K(K(K({},this.personalInformGroup.value),this.contactAddressFormGroup.value),this.nokFormGroup.value);this.occupantsService.createOccupant(this.currentUser,e).subscribe({next:c=>{if(c.headerResponse.responseCode!=="000"){this.alertService.showErrorMsg(c.headerResponse.responseMessage);return}this.alertService.showSuccessMsg(`${s} created successfully`),this.nokForm.saveAndNew.value||(this.addInstitutionOccupantBsModalRef.hide(),this.accountService.reloadCurrentRoute()),this.personalInformGroup.reset(),this.contactAddressFormGroup.reset(),this.nokFormGroup.reset(),this.currentStep=1,this.logAction(`created individual occupant ${s}`,V.SETTINGS)},error:c=>{this.alertService.showInfoMsg(c)}})}else p.dismiss,G.default.DismissReason.cancel})}updateOccupant(){let s=this.personalInfoForm.occupantName.value;G.default.fire({position:"top",title:"Confirmation",text:`Do you want to update ${s}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, update"}).then(p=>{if(p.value){let e=Object.assign(this.personalInformGroup.value,this.contactAddressFormGroup.value,this.nokFormGroup.value);this.occupantsService.updateOccupant(this.currentUser,e).subscribe({next:c=>{if(this.logger.info("updateOccupant response:"+JSON.stringify(c)),c.headerResponse.responseCode!=="000"){this.alertService.showErrorMsg(c.headerResponse.responseMessage);return}this.alertService.showSuccessMsg(`${s} updated successfully`),this.addInstitutionOccupantBsModalRef.hide(),this.logAction(`Updated ${s}`,V.OCCUPANCY),this.accountService.reloadCurrentRoute()},error:c=>{this.alertService.showInfoMsg(c.message)}})}else p.dismiss,G.default.DismissReason.cancel})}logAction(s,p){return L(this,null,function*(){yield this.accountService.logUserAudit(s,p)})}};d.\u0275fac=function(p){return new(p||d)(h(Se),h(w),h(Ee),h(R),h(Q),h(U),h(Pe))},d.\u0275cmp=N({type:d,selectors:[["ng-component"]],standalone:!0,features:[k],decls:219,vars:140,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right","border","border-gray",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-bordered"],["action","#","id","stepper-create-profile","data-step-current","4","novalidate","novalidate",1,"nk-stepper","stepper-init","is-alter","nk-stepper-s1",2,"display","block"],[1,"row","g-0","col-sep","col-sep-md","col-sep-xl"],[1,"col-md-5","col-xl-5"],[1,"card-inner"],[1,"nk-stepper-nav","nk-stepper-nav-s1","stepper-nav","is-vr"],[3,"ngClass"],[1,"step-item"],[1,"step-text"],[1,"lead-text"],[1,"sub-text"],[1,"col-md-7","col-xl-7"],[1,"nk-stepper-content"],[1,"nk-stepper-steps","stepper-steps"],[1,"nk-stepper-step",3,"ngClass"],[1,"title","mb-2"],["novalidate","",3,"formGroup"],[1,"row","gy-4","mt-1"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["type","text","formControlName","occupantName","id","occupantName","autocomplete","off",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"],[1,"form-check-label",3,"labelForName","labelName"],[1,"custom-control-group"],[4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],["styleClass","w-100","formControlName","dateOfBirth","id","dateOfBirth","dateFormat","dd-mm-yy",3,"showIcon","ngClass"],[1,"form-control-select"],["id","maritalStatus","formControlName","maritalStatus",1,"form-control",3,"ngClass"],["value","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","occupation","id","occupation","autocomplete","off",1,"form-control",3,"ngClass"],["id","idType","formControlName","idType",1,"form-control",3,"ngClass"],["type","text","formControlName","idNo","id","idNo","autocomplete","off",1,"form-control",3,"ngClass"],[1,"row","gx-3","align-items-center","mt-2"],[1,"col-auto"],["type","button","title","",1,"btn","btn-outline-primary","mt-4",3,"click"],["type","button","title","",1,"btn","btn-primary","mt-4",3,"disabled","click"],[1,"row","gy-3","mt-1"],["type","tel","formControlName","mobileNo","id","mobileNo","autocomplete","off",1,"form-control",3,"ngClass"],["type","email","formControlName","emailAddress","id","emailAddress","autocomplete","off",1,"form-control",3,"ngClass"],["type","text","formControlName","homeTown","id","homeTown","autocomplete","off",1,"form-control",2,"min-height","30px",3,"ngClass"],[1,"col-sm-12"],["type","text","formControlName","localAddress","id","localAddress","autocomplete","off",1,"form-control",2,"min-height","30px",3,"ngClass"],[1,"title","mb-3"],["type","text","formControlName","nextOfKin","id","nextOfKin","autocomplete","off",1,"form-control",3,"ngClass"],["type","tel","formControlName","nokPhone","id","nokPhone","autocomplete","off",1,"form-control",3,"ngClass"],["type","email","formControlName","nokEmail","id","nokEmail","autocomplete","off",1,"form-control",3,"ngClass"],["id","relationship","formControlName","relationship",1,"form-control",3,"ngClass"],["class","col-12",4,"ngIf"],[3,"labelForName","showRequired","labelName"],["type","nokAddress","formControlName","nokAddress","id","nokAddress",1,"form-control",2,"min-height","30px"],[1,"row","gx-3","align-items-center","mt-5"],["type","button","title","",1,"btn","btn-outline-primary",3,"click"],["class","col-auto",4,"ngIf"],[1,"custom-control","custom-radio","custom-control-pro","no-control"],["formControlName","occupantType","name","occupantType","type","radio",1,"custom-control-input","form-check-input",3,"id","value","ngClass"],[1,"custom-control-label","form-check-label",3,"for"],[1,"text-danger","mt-1"],["formControlName","gender","name","gender","type","radio",1,"custom-control-input","form-check-input",3,"id","value","ngClass"],[3,"value"],[1,"col-12"],[1,"custom-control","custom-radio","checked"],["type","radio","formControlName","relationship","name","relationship",1,"custom-control-input",3,"id","value"],[1,"custom-control-label",3,"for"],[1,"custom-control","custom-control-sm","custom-checkbox","checked"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew",1,"custom-control-input"],["for","saveAndNew",1,"custom-control-label","fw-bolder"],[1,"btn","btn-primary",3,"disabled","title","click"]],template:function(p,e){p&1&&(t(0,"div",0)(1,"h6",1),i(2),F(3,"titlecase"),n(),t(4,"button",2),v("click",function(){return e.addInstitutionOccupantBsModalRef==null?null:e.addInstitutionOccupantBsModalRef.hide()}),t(5,"span",3),i(6,"\xD7"),n()()(),t(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"ul",10)(14,"li",11)(15,"div",12)(16,"div",13)(17,"div",14),i(18,"Personal Information"),n(),t(19,"div",15),i(20," Personal details of occupant "),n()()()(),t(21,"li",11)(22,"div",12)(23,"div",13)(24,"div",14),i(25,"Contact & Address Details"),n(),t(26,"div",15),i(27,"Verify customer number from the operator. "),n()()()(),t(28,"li",11)(29,"div",12)(30,"div",13)(31,"div",14),i(32,"Next of Kin(NOK) Details"),n(),t(33,"div",15),i(34,"S elect service for the account or wallet. "),n()()()()()()(),t(35,"div",16)(36,"div",9)(37,"div",17)(38,"div",18)(39,"div",19)(40,"h5",20),i(41,"Personal Information"),n(),t(42,"p"),i(43," Provide your personal details of occupant "),n(),m(44,"app-required-fields-notice"),t(45,"form",21)(46,"div",22)(47,"div",23)(48,"div",24),m(49,"app-form-label",25),t(50,"div",26),m(51,"input",27),t(52,"span",28),f(53,it,2,0,"div",29),n()()()(),t(54,"div",23)(55,"div",24),m(56,"app-form-label",30),t(57,"div",26)(58,"ul",31),f(59,ot,5,7,"li",32),n(),f(60,at,2,0,"div",33),n()()(),t(61,"div",23)(62,"div",24),m(63,"app-form-label",30),t(64,"div",26)(65,"ul",31),f(66,lt,5,7,"li",32),n(),f(67,rt,2,0,"div",33),n()()(),t(68,"div",23)(69,"div",24),m(70,"app-form-label",25)(71,"p-calendar",34),t(72,"span",28),f(73,dt,2,0,"span",29),n()()(),t(74,"div",23)(75,"div",24),m(76,"app-form-label",25),t(77,"div",26)(78,"div",35)(79,"select",36)(80,"option",37),i(81,"Select One "),n(),f(82,pt,2,2,"option",38),n(),t(83,"span",28),f(84,st,2,0,"div",29),n()()()()(),t(85,"div",23)(86,"div",24),m(87,"app-form-label",25),t(88,"div",26),m(89,"input",39),t(90,"span",28),f(91,mt,2,0,"div",29),n()()()(),t(92,"div",23)(93,"div",24),m(94,"app-form-label",25),t(95,"div",26)(96,"div",35)(97,"select",40)(98,"option",37),i(99,"Select One "),n(),f(100,ct,2,2,"option",38),n(),t(101,"span",28),f(102,ut,2,0,"div",29),n()()()()(),t(103,"div",23)(104,"div",24),m(105,"app-form-label",25),t(106,"div",26),m(107,"input",41),t(108,"span",28),f(109,ft,2,0,"div",29),n()()()()(),t(110,"div",42)(111,"div",43)(112,"button",44),v("click",function(){return e.addInstitutionOccupantBsModalRef==null?null:e.addInstitutionOccupantBsModalRef.hide()}),i(113," Cancel "),n()(),t(114,"div",43)(115,"button",45),v("click",function(){return e.continueStep()}),i(116," Continue "),n()()()()(),t(117,"div",19)(118,"h5",20),i(119,"Contact & Address Details"),n(),t(120,"p"),i(121," Provide contact and address information "),n(),m(122,"app-required-fields-notice"),t(123,"form",21)(124,"div",46)(125,"div",23)(126,"div",24),m(127,"app-form-label",25),t(128,"div",26),m(129,"input",47),t(130,"span",28),f(131,vt,2,0,"div",29)(132,ht,2,0,"div",29),n()()()(),t(133,"div",23)(134,"div",24),m(135,"app-form-label",25),t(136,"div",26),m(137,"input",48),t(138,"span",28),f(139,St,2,0,"div",29),n()()()(),t(140,"div",23)(141,"div",24),m(142,"app-form-label",25),t(143,"div",26),m(144,"input",49),t(145,"span",28),f(146,gt,2,0,"div",29),n()()()(),t(147,"div",50)(148,"div",24),m(149,"app-form-label",25),t(150,"div",26)(151,"textarea",51),i(152,"                                                        "),n(),t(153,"span",28),f(154,It,2,0,"div",29),n()()()()(),t(155,"div",42)(156,"div",43)(157,"button",44),v("click",function(){return e.previousStep()}),i(158),n()(),t(159,"div",43)(160,"button",45),v("click",function(){return e.continueStep()}),i(161),n()()()()(),t(162,"div",19)(163,"h5",52),i(164,"Next of Kin(NOK) information"),n(),t(165,"p"),i(166," Provide next of Kin(NOK) information "),n(),m(167,"app-required-fields-notice"),t(168,"form",21)(169,"div",46)(170,"div",23)(171,"div",24),m(172,"app-form-label",25),t(173,"div",26),m(174,"input",53),t(175,"span",28),f(176,Ft,2,0,"div",29),n()()()(),t(177,"div",23)(178,"div",24),m(179,"app-form-label",25),t(180,"div",26),m(181,"input",54),t(182,"span",28),f(183,_t,2,0,"div",29)(184,yt,2,0,"div",29),n()()()(),t(185,"div",23)(186,"div",24),m(187,"app-form-label",25),t(188,"div",26),m(189,"input",55),t(190,"span",28),f(191,Ct,2,0,"div",29)(192,bt,2,0,"div",29),n()()()(),t(193,"div",23)(194,"div",24),m(195,"app-form-label",25),t(196,"div",26)(197,"div",35)(198,"select",56)(199,"option",37),i(200,"Select One "),n(),f(201,Ot,2,2,"option",38),n(),t(202,"span",28),f(203,Nt,2,0,"div",29),n()()()()(),f(204,kt,8,4,"div",57),t(205,"div",50)(206,"div",24),m(207,"app-form-label",58),t(208,"div",26)(209,"textarea",59),i(210,"                                                        "),n()()()(),t(211,"div",50),f(212,Tt,5,0,"ng-container",29),n()(),t(213,"div",60)(214,"div",43)(215,"button",61),v("click",function(){return e.previousStep()}),i(216," Back "),n()(),f(217,wt,3,2,"div",62)(218,Mt,3,2,"div",62),n()()()()()()()()()()()),p&2&&(o(2),u(y(3,92,e.headerMsg)),o(12),r("ngClass",x(94,pe,e.currentStep===1,e.currentStep>1)),o(7),r("ngClass",x(97,pe,e.currentStep===2,e.currentStep>2)),o(7),r("ngClass",x(100,pe,e.currentStep===3,e.currentStep>3)),o(11),r("ngClass",x(103,se,e.currentStep===1,e.currentStep===2)),o(6),r("formGroup",e.personalInformGroup),o(4),r("labelForName","occupantName")("labelName","Full Name"),o(2),r("ngClass",I(106,_,((e.personalInfoForm.occupantName==null?null:e.personalInfoForm.occupantName.touched)||(e.personalInfoForm.occupantName==null?null:e.personalInfoForm.occupantName.dirty))&&!(e.personalInfoForm.occupantName!=null&&e.personalInfoForm.occupantName.valid))),o(2),r("ngIf",e.personalInfoForm.occupantName==null||e.personalInfoForm.occupantName.errors==null?null:e.personalInfoForm.occupantName.errors.required),o(3),r("labelForName","occupantType")("labelName","Occupant Type"),o(3),r("ngForOf",e.listOfOccupantTypes),o(1),r("ngIf",((e.personalInfoForm.gender==null?null:e.personalInfoForm.gender.touched)||(e.personalInfoForm.gender==null?null:e.personalInfoForm.gender.dirty))&&!(e.personalInfoForm.gender!=null&&e.personalInfoForm.gender.valid)),o(3),r("labelForName","gender")("labelName","Gender"),o(3),r("ngForOf",e.listOfGenders),o(1),r("ngIf",((e.personalInfoForm.gender==null?null:e.personalInfoForm.gender.touched)||(e.personalInfoForm.gender==null?null:e.personalInfoForm.gender.dirty))&&!(e.personalInfoForm.gender!=null&&e.personalInfoForm.gender.valid)),o(3),r("labelForName","dateOfBirth")("labelName","Date Of Birth"),o(1),r("showIcon",!0)("ngClass",I(108,_,((e.personalInfoForm.dateOfBirth==null?null:e.personalInfoForm.dateOfBirth.touched)||(e.personalInfoForm.dateOfBirth==null?null:e.personalInfoForm.dateOfBirth.dirty))&&!(e.personalInfoForm.dateOfBirth!=null&&e.personalInfoForm.dateOfBirth.valid))),o(2),r("ngIf",e.personalInfoForm.dateOfBirth==null||e.personalInfoForm.dateOfBirth.errors==null?null:e.personalInfoForm.dateOfBirth.errors.required),o(3),r("labelForName","maritalStatus")("labelName","Marital Status"),o(3),r("ngClass",I(110,_,((e.personalInfoForm.maritalStatus==null?null:e.personalInfoForm.maritalStatus.touched)||(e.personalInfoForm.maritalStatus==null?null:e.personalInfoForm.maritalStatus.dirty))&&(e.personalInfoForm.maritalStatus==null?null:e.personalInfoForm.maritalStatus.errors))),o(3),r("ngForOf",e.listOfMaritalStatus),o(2),r("ngIf",e.personalInfoForm.maritalStatus==null||e.personalInfoForm.maritalStatus.errors==null?null:e.personalInfoForm.maritalStatus.errors.required),o(3),r("labelForName","occupation")("labelName","Occupation"),o(2),r("ngClass",I(112,_,((e.personalInfoForm.occupation==null?null:e.personalInfoForm.occupation.touched)||(e.personalInfoForm.occupation==null?null:e.personalInfoForm.occupation.dirty))&&!(e.personalInfoForm.occupation!=null&&e.personalInfoForm.occupation.valid))),o(2),r("ngIf",e.personalInfoForm.occupation==null||e.personalInfoForm.occupation.errors==null?null:e.personalInfoForm.occupation.errors.required),o(3),r("labelForName","idType")("labelName","ID Type"),o(3),r("ngClass",I(114,_,((e.personalInfoForm.idType==null?null:e.personalInfoForm.idType.touched)||(e.personalInfoForm.idType==null?null:e.personalInfoForm.idType.dirty))&&(e.personalInfoForm.idType==null?null:e.personalInfoForm.idType.errors))),o(3),r("ngForOf",e.listOfIdTypes),o(2),r("ngIf",e.personalInfoForm.idType==null||e.personalInfoForm.idType.errors==null?null:e.personalInfoForm.idType.errors.required),o(3),r("labelForName","idNo")("labelName","ID Number"),o(2),r("ngClass",I(116,_,((e.personalInfoForm.idNo==null?null:e.personalInfoForm.idNo.touched)||(e.personalInfoForm.idNo==null?null:e.personalInfoForm.idNo.dirty))&&!(e.personalInfoForm.idNo!=null&&e.personalInfoForm.idNo.valid))),o(2),r("ngIf",e.personalInfoForm.idNo==null||e.personalInfoForm.idNo.errors==null?null:e.personalInfoForm.idNo.errors.required),o(6),r("disabled",!e.personalInformGroup.valid),o(2),r("ngClass",x(118,se,e.currentStep===2,e.currentStep===3)),o(6),r("formGroup",e.contactAddressFormGroup),o(4),r("labelForName","mobileNo")("labelName","Phone Number"),o(2),r("ngClass",I(121,_,((e.contactAddressForm.mobileNo==null?null:e.contactAddressForm.mobileNo.touched)||(e.contactAddressForm.mobileNo==null?null:e.contactAddressForm.mobileNo.dirty))&&!(e.contactAddressForm.mobileNo!=null&&e.contactAddressForm.mobileNo.valid))),o(2),r("ngIf",e.contactAddressForm.mobileNo==null||e.contactAddressForm.mobileNo.errors==null?null:e.contactAddressForm.mobileNo.errors.required),o(1),r("ngIf",(e.contactAddressForm.mobileNo==null||e.contactAddressForm.mobileNo.errors==null?null:e.contactAddressForm.mobileNo.errors.minlength)||(e.contactAddressForm.mobileNo==null||e.contactAddressForm.mobileNo.errors==null?null:e.contactAddressForm.mobileNo.errors.maxlength)),o(3),r("labelForName","emailAddress")("labelName","Email"),o(2),r("ngClass",I(123,_,((e.contactAddressForm.emailAddress==null?null:e.contactAddressForm.emailAddress.touched)||(e.contactAddressForm.emailAddress==null?null:e.contactAddressForm.emailAddress.dirty))&&!(e.contactAddressForm.emailAddress!=null&&e.contactAddressForm.emailAddress.valid))),o(2),r("ngIf",e.contactAddressForm.emailAddress==null||e.contactAddressForm.emailAddress.errors==null?null:e.contactAddressForm.emailAddress.errors.required),o(3),r("labelForName","homeTown")("labelName","Home Town"),o(2),r("ngClass",I(125,_,((e.contactAddressForm.homeTown==null?null:e.contactAddressForm.homeTown.touched)||(e.contactAddressForm.homeTown==null?null:e.contactAddressForm.homeTown.dirty))&&!(e.contactAddressForm.homeTown!=null&&e.contactAddressForm.homeTown.valid))),o(2),r("ngIf",e.contactAddressForm.homeTown==null||e.contactAddressForm.homeTown.errors==null?null:e.contactAddressForm.homeTown.errors.required),o(3),r("labelForName","Address")("labelName","Address"),o(2),r("ngClass",I(127,_,((e.contactAddressForm.localAddress==null?null:e.contactAddressForm.localAddress.touched)||(e.contactAddressForm.localAddress==null?null:e.contactAddressForm.localAddress.dirty))&&!(e.contactAddressForm.localAddress!=null&&e.contactAddressForm.localAddress.valid))),o(3),r("ngIf",e.contactAddressForm.localAddress==null||e.contactAddressForm.localAddress.errors==null?null:e.contactAddressForm.localAddress.errors.required),o(4),O(" ","back"," "),o(2),r("disabled",!e.contactAddressFormGroup.valid),o(1),O(" ","continue"," "),o(1),r("ngClass",x(129,se,e.currentStep===3,e.currentStep===4)),o(6),r("formGroup",e.nokFormGroup),o(4),r("labelForName","nextOfKin")("labelName","NOK Name"),o(2),r("ngClass",I(132,_,((e.nokForm.nextOfKin==null?null:e.nokForm.nextOfKin.touched)||(e.nokForm.nextOfKin==null?null:e.nokForm.nextOfKin.dirty))&&!(e.nokForm.nextOfKin!=null&&e.nokForm.nextOfKin.valid))),o(2),r("ngIf",e.nokForm.nextOfKin==null||e.nokForm.nextOfKin.errors==null?null:e.nokForm.nextOfKin.errors.required),o(3),r("labelForName","nokPhone")("labelName","NOk Mobile No."),o(2),r("ngClass",I(134,_,((e.nokForm.nokPhone==null?null:e.nokForm.nokPhone.touched)||(e.nokForm.nokPhone==null?null:e.nokForm.nokPhone.dirty))&&!(e.nokForm.nokPhone!=null&&e.nokForm.nokPhone.valid))),o(2),r("ngIf",e.nokForm.nokPhone==null||e.nokForm.nokPhone.errors==null?null:e.nokForm.nokPhone.errors.required),o(1),r("ngIf",(e.nokForm.nokPhone==null||e.nokForm.nokPhone.errors==null?null:e.nokForm.nokPhone.errors.minlength)||(e.nokForm.nokPhone==null||e.nokForm.nokPhone.errors==null?null:e.nokForm.nokPhone.errors.maxlength)),o(3),r("labelForName","nokEmail")("labelName","NOk Email"),o(2),r("ngClass",I(136,_,((e.nokForm.nokEmail==null?null:e.nokForm.nokEmail.touched)||(e.nokForm.nokEmail==null?null:e.nokForm.nokEmail.dirty))&&!(e.nokForm.nokEmail!=null&&e.nokForm.nokEmail.valid))),o(2),r("ngIf",e.nokForm.nokEmail==null||e.nokForm.nokEmail.errors==null?null:e.nokForm.nokEmail.errors.required),o(1),r("ngIf",e.nokForm.nokEmail==null||e.nokForm.nokEmail.errors==null?null:e.nokForm.nokEmail.errors.email),o(3),r("labelForName","relationship")("labelName","Marital Status"),o(3),r("ngClass",I(138,_,((e.personalInfoForm.relationship==null?null:e.personalInfoForm.relationship.touched)||(e.personalInfoForm.relationship==null?null:e.personalInfoForm.relationship.dirty))&&(e.personalInfoForm.relationship==null?null:e.personalInfoForm.relationship.errors))),o(3),r("ngForOf",e.listOfRelationship),o(2),r("ngIf",e.personalInfoForm.relationship==null||e.personalInfoForm.relationship.errors==null?null:e.personalInfoForm.relationship.errors.required),o(1),r("ngIf",!1),o(3),r("labelForName","nokAddress")("showRequired",!1)("labelName","NOK Address"),o(5),r("ngIf",e.isAddMode),o(5),r("ngIf",!e.isAddMode),o(1),r("ngIf",e.isAddMode))},dependencies:[T,fe,ve,B,D,Ae,Ce,J,z,$,Ie,Y,be,H,Fe,Oe,Ne,qe,X,_e,Te,we,Z,W,je],encapsulation:2});let l=d;return l})();function xt(l,d){if(l&1&&(q(0),t(1,"span",12),i(2,"Institution Information"),n(),t(3,"li")(4,"span",13),i(5,"Institution Name"),n(),i(6," - "),t(7,"span",14),i(8),n()(),t(9,"li")(10,"span",13),i(11,"Mobile No."),n(),i(12," - "),t(13,"span",14),i(14),n()(),t(15,"li")(16,"span",13),i(17,"Telephone"),n(),i(18," - "),t(19,"span",14),i(20),n()(),t(21,"li")(22,"span",13),i(23,"Email"),n(),i(24," - "),t(25,"span",14),i(26),n()(),t(27,"li")(28,"span",13),i(29,"Address"),n(),i(30," - "),t(31,"span",14),i(32),n()(),t(33,"span",15),i(34,"Supervisor / Top Role Information"),n(),t(35,"li")(36,"span",13),i(37,"Full Name"),n(),i(38," - "),t(39,"span",14),i(40),n()(),t(41,"li")(42,"span",13),i(43,"Phone No."),n(),i(44," - "),t(45,"span",14),i(46),n()(),t(47,"li")(48,"span",13),i(49,"Email"),n(),i(50," - "),t(51,"span",14),i(52),n()(),t(53,"li")(54,"span",13),i(55,"Email"),n(),i(56," - "),t(57,"span",14),i(58),n()(),t(59,"li")(60,"span",13),i(61,"Registration Date"),n(),i(62," - "),t(63,"span",14),i(64),F(65,"date"),n()(),P()),l&2){let a=g();o(8),u(a.occupant==null?null:a.occupant.occupantName),o(6),u(a.occupant==null?null:a.occupant.mobileNo),o(6),u(a.occupant==null?null:a.occupant.telephoneNumber),o(6),u(a.occupant==null?null:a.occupant.emailAddress),o(6),u(a.occupant==null?null:a.occupant.localAddress),o(8),u(a.occupant==null?null:a.occupant.supervisorName),o(6),u(a.occupant==null?null:a.occupant.supervisorMobileNo),o(6),u(a.occupant==null?null:a.occupant.supervisorEmail),o(6),u(a.occupant==null?null:a.occupant.supervisorAddress),o(6),O(" ",y(65,10,a.occupant==null?null:a.occupant.dateOfBirth)," ")}}function Bt(l,d){if(l&1&&(q(0),t(1,"span",12),i(2,"Personal Information"),n(),t(3,"li")(4,"span",13),i(5,"Full Name"),n(),i(6," - "),t(7,"span",14),i(8),n()(),t(9,"li")(10,"span",13),i(11,"Gender"),n(),i(12," - "),t(13,"span",14),i(14),n()(),t(15,"li")(16,"span",13),i(17,"Date Of Birth"),n(),i(18," - "),t(19,"span",14),i(20),F(21,"date"),n()(),t(22,"li")(23,"span",13),i(24,"Marital Status"),n(),i(25," - "),t(26,"span",14),i(27),F(28,"removeHyphen"),F(29,"titlecase"),n()(),t(30,"li")(31,"span",13),i(32,"National ID Type"),n(),i(33," - "),t(34,"span",14),i(35),F(36,"removeHyphen"),F(37,"titlecase"),n()(),t(38,"li")(39,"span",13),i(40,"National ID No."),n(),i(41," - "),t(42,"span",14),i(43),n()(),t(44,"li")(45,"span",13),i(46,"Occupation"),n(),i(47," - "),t(48,"span",14),i(49),n()(),t(50,"span",15),i(51,"Contact & Address Information"),n(),t(52,"li")(53,"span",13),i(54,"Mobile No."),n(),i(55," - "),t(56,"span",14),i(57),n()(),t(58,"li")(59,"span",13),i(60,"Telephone"),n(),i(61," - "),t(62,"span",14),i(63),n()(),t(64,"li")(65,"span",13),i(66,"Email"),n(),i(67," - "),t(68,"span",14),i(69),n()(),t(70,"li")(71,"span",13),i(72,"Home Town"),n(),i(73," - "),t(74,"span",14),i(75),n()(),t(76,"span",15),i(77,"Next of Kin(NOK) Information"),n(),t(78,"li")(79,"span",13),i(80,"Full Name"),n(),i(81," - "),t(82,"span",14),i(83),n()(),t(84,"li")(85,"span",13),i(86,"NOK Mobile No."),n(),i(87," - "),t(88,"span",14),i(89),n()(),t(90,"li")(91,"span",13),i(92,"Relationship"),n(),i(93," - "),t(94,"span",14),i(95),F(96,"titlecase"),F(97,"removeHyphen"),n()(),t(98,"li")(99,"span",13),i(100,"Address"),n(),i(101," - "),t(102,"span",14),i(103),n()(),P()),l&2){let a=g();o(8),u(a.occupant==null?null:a.occupant.occupantName),o(6),u(a.occupant==null?null:a.occupant.gender),o(6),O(" ",y(21,15,a.occupant==null?null:a.occupant.dateOfBirth)," "),o(7),u(y(28,17,y(29,19,a.occupant==null?null:a.occupant.maritalStatus))),o(8),u(y(36,21,y(37,23,a.occupant==null?null:a.occupant.idType))),o(8),u(a.occupant==null?null:a.occupant.idNo),o(6),u(a.occupant==null?null:a.occupant.occupation),o(8),u(a.occupant==null?null:a.occupant.mobileNo),o(6),u(a.occupant==null?null:a.occupant.telephoneNumber),o(6),u(a.occupant==null?null:a.occupant.emailAddress),o(6),u(a.occupant==null?null:a.occupant.localAddress),o(8),u(a.occupant==null?null:a.occupant.nextOfKin),o(6),u(a.occupant==null?null:a.occupant.nokPhone),o(6),u(y(96,25,y(97,27,a.occupant==null?null:a.occupant.relationship))),o(8),u(a.occupant==null?null:a.occupant.nokAddress)}}var Je=(()=>{let d=class d{constructor(s,p){this.viewOccupantBsModalRef=s,this.accountService=p,this.accountService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.viewOccupantBsModalRef.setClass("gray modal-md modal-dialog-top")}};d.\u0275fac=function(p){return new(p||d)(h(w),h(R))},d.\u0275cmp=N({type:d,selectors:[["app-view-advert-details"]],standalone:!0,features:[k],decls:17,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right","border","border-gray",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"pricing-body"],[1,"pricing-features"],[4,"ngIf"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"preview-title-lg","overline-title"],[1,"w-50"],[1,"ms-auto"],[1,"preview-title-lg","overline-title","my-2"]],template:function(p,e){p&1&&(t(0,"div",0)(1,"h6",1),i(2),n(),t(3,"button",2),v("click",function(){return e.viewOccupantBsModalRef==null?null:e.viewOccupantBsModalRef.hide()}),t(4,"span",3),i(5,"\xD7"),n()()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"ul",7),f(10,xt,66,12,"ng-container",8)(11,Bt,104,29,"ng-container",8),n()()()(),t(12,"div",9)(13,"div",10)(14,"a",11),v("click",function(){return e.viewOccupantBsModalRef==null?null:e.viewOccupantBsModalRef.hide()}),t(15,"span"),i(16,"Close"),n()()()()),p&2&&(o(2),O("",e.occupant==null?null:e.occupant.occupantName," Details"),o(8),r("ngIf",e.occupant==null?null:e.occupant.institutional),o(1),r("ngIf",!(e.occupant!=null&&e.occupant.institutional)))},dependencies:[T,B,D,j,Ke],encapsulation:2});let l=d;return l})();function Dt(l,d){l&1&&(t(0,"tr")(1,"th"),i(2,"SN"),n(),t(3,"th"),i(4,"Occupant"),n(),t(5,"th"),i(6,"Occupant Type"),n(),t(7,"th"),i(8,"Date of Birth / Reg. Date"),n(),t(9,"th"),i(10,"Email"),n(),t(11,"th"),i(12,"Mobile No."),n(),t(13,"th"),i(14,"Address"),n(),t(15,"th"),i(16,"Properties"),n(),t(17,"th"),i(18,"Actions"),n()())}function Rt(l,d){if(l&1){let a=M();t(0,"li")(1,"a",39),v("click",function(){E(a);let p=g().$implicit,e=g();return A(e.openInstitutionModalComponent(p,!1))}),m(2,"em",44),t(3,"span"),i(4,"Edit occupant"),n()()()}}function qt(l,d){if(l&1){let a=M();t(0,"li")(1,"a",39),v("click",function(){E(a);let p=g().$implicit,e=g();return A(e.openIndividualModalComponent(p,!1))}),m(2,"em",44),t(3,"span"),i(4,"Edit occupant"),n()()()}}function Pt(l,d){if(l&1){let a=M();t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),m(4,"app-full-name",32),n(),t(5,"td"),i(6),F(7,"titlecase"),n(),t(8,"td"),i(9),F(10,"date"),F(11,"cleanDate"),n(),t(12,"td"),i(13),n(),t(14,"td"),i(15),n(),t(16,"td"),i(17),n(),t(18,"td"),i(19),F(20,"number"),n(),t(21,"td")(22,"div",33)(23,"a",34),m(24,"em",35),n(),t(25,"div",36)(26,"ul",37),f(27,Rt,5,0,"li",38)(28,qt,5,0,"li",38),t(29,"li")(30,"a",39),v("click",function(){let e=E(a).$implicit,c=g();return A(c.openViewOccupantModalComponent(e))}),m(31,"em",40),t(32,"span"),i(33,"View details"),n()()(),m(34,"li",41),t(35,"li")(36,"a",42),v("click",function(){let e=E(a).$implicit,c=g();return A(c.deleteOccupant(e))}),m(37,"em",43),t(38,"span"),i(39,"Delete"),n()()()()()()()()}if(l&2){let a=d.$implicit,s=d.rowIndex;o(2),u(s+1),o(2),b("fullName",a==null?null:a.occupantName),b("otherFieldName",a==null?null:a.institutionalDisplayName),o(2),u(y(7,11,a.occupantType)),o(3),u(le(10,13,y(11,16,a.dateOfBirth),"mediumDate")),o(4),u(a.emailAddress),o(2),u(a.mobileNo),o(2),u(a.localAddress),o(2),u(y(20,18,a.properties)),o(8),r("ngIf",a.institutional),o(1),r("ngIf",!a.institutional)}}var Vt=()=>[5,10,25,50],Bn=(()=>{let d=class d{constructor(s,p,e,c,C,ie,oe,ae,ze,Xe,Qe){this.accountService=s,this.occupantsService=p,this.alertService=e,this.utilsService=c,this.logger=C,this.addIndividualOccupantBsModalRef=ie,this.addInstitutionOccupantBsModalRef=oe,this.viewOccupantBsModalRef=ae,this.individualOccupantModalService=ze,this.institutionOccupantModalService=Xe,this.viewOccupantModalService=Qe,this.accountService.currentUser.subscribe(We=>this.currentUser=We)}ngOnInit(){this.occupantType="ALL",this.startDate=this.utilsService.getFirstDayOfCurrentYear(),this.endDate=new Date,this.prefetchOccupants()}ngOnDestroy(){this.individualOccupantModalService.hide(),this.institutionOccupantModalService.hide(),this.viewOccupantModalService.hide(),ne.default.close()}prefetchOccupants(){let s=new re;s.dateRange=!1,s.startDate=this.startDate,s.endDate=this.endDate,s.occupantType="ALL",this.listOfOccupants=[],this.occupantsService.searchOccupants(this.currentUser,s).subscribe({next:p=>{if(this.logger.info("searchOccupants response "+JSON.stringify(p)),p.headerResponse.responseCode!=="000"){this.alertService.error(p.headerResponse.responseMessage);return}if(p.occupants.length<=0){this.alertService.showInfoMsgGeneral("No occupants found"),this.logger.info("No occupants found");return}this.listOfOccupants=p.occupants},error:p=>{this.logger.error(p),this.alertService.showInfoMsg(p)}})}fetchOccupants(){let s=new re;s.dateRange=!0,s.startDate=this.startDate,s.endDate=this.endDate,s.occupantType=this.occupantType,this.listOfOccupants=[],this.occupantsService.searchOccupants(this.currentUser,s).subscribe({next:p=>{if(this.logger.info("searchOccupants response "+JSON.stringify(p)),p.headerResponse.responseCode!=="000"){this.alertService.error(p.headerResponse.responseMessage);return}if(p.occupants.length<=0){this.alertService.showInfoMsgGeneral("No occupants found"),this.logger.info("No occupants found");return}this.listOfOccupants=p.occupants},error:p=>{this.logger.error(p),this.alertService.showInfoMsg(p)}})}deleteOccupant(s){let p=s.occupantName;ne.default.fire({position:"top",title:"Confirmation",text:`Do you want to delete ${p}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, delete"}).then(e=>{e.value?this.occupantsService.deleteOccupant(this.currentUser,s.recordId).subscribe({next:c=>{if(this.logger.info("deleteOccupant response:"+JSON.stringify(c)),c.headerResponse.responseCode!=="000"){this.alertService.showErrorMsg(c.headerResponse.responseMessage);return}this.alertService.showSuccessMsg(`${p} deleted successfully`),this.addInstitutionOccupantBsModalRef.hide(),this.logAction(`Updated ${p}`,V.OCCUPANCY),this.accountService.reloadCurrentRoute()},error:c=>{this.alertService.showInfoMsg(c.message)}}):(e.dismiss,ne.default.DismissReason.cancel)})}openIndividualModalComponent(s,p){let e={initialState:{isAddMode:p,occupant:s}};this.individualOccupantModalService.config.ignoreBackdropClick=!0,this.individualOccupantModalService.config.animated=!0,this.addIndividualOccupantBsModalRef=this.individualOccupantModalService.show(Ye,e),this.addIndividualOccupantBsModalRef.content.closeBtnName="Close"}openInstitutionModalComponent(s,p){let e={initialState:{isAddMode:p,occupant:s}};this.institutionOccupantModalService.config.ignoreBackdropClick=!0,this.institutionOccupantModalService.config.animated=!0,this.addInstitutionOccupantBsModalRef=this.institutionOccupantModalService.show(Le,e),this.addInstitutionOccupantBsModalRef.content.closeBtnName="Close"}openViewOccupantModalComponent(s){let p={initialState:{occupant:s}};this.viewOccupantModalService.config.ignoreBackdropClick=!0,this.viewOccupantModalService.config.animated=!0,this.viewOccupantBsModalRef=this.viewOccupantModalService.show(Je,p),this.viewOccupantBsModalRef.content.closeBtnName="Close"}logAction(s,p){return L(this,null,function*(){yield this.accountService.logUserAudit(s,p)})}};d.\u0275fac=function(p){return new(p||d)(h(R),h(te),h(Q),h(ge),h(U),h(w),h(w),h(w),h(ee),h(ee),h(ee))},d.\u0275cmp=N({type:d,selectors:[["ng-component"]],standalone:!0,features:[k],decls:60,vars:21,consts:[[3,"pageTitleName","description"],[1,"newItemName"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon","ni","ni-user"],[1,"anotherItemName"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-home"],[1,"row","gy-2","gx-3","mt-5","mb-4","align-items-center"],[1,"col-sm-2"],[1,"form-group"],["for","startDate",1,"form-label","pt-0"],[1,"form-control-wrap"],[1,"form-control-select"],["id","searchBy",1,"form-control",3,"ngModel","ngModelChange"],["value","ALL","selected","",1,"fs-6"],["value","IND"],["value","INS"],[1,"col-auto"],["dateFormat","yy-mm-dd","styleClass","\u201Dform-control\u201D","dateFormat","dd-mm-yy",3,"monthNavigator","yearNavigator","showIcon","ngModel","ngModelChange"],["for","endDate",1,"form-label","pt-0"],["styleClass","\u201Dform-control\u201D","dateFormat","dd-mm-yy",3,"showIcon","ngModel","ngModelChange"],["type","button","title","",1,"btn","btn-dim","btn-primary","mt-4",3,"click"],[1,"btn","mt-4","btn-outline-light",3,"click"],[1,"icon","ni","ni-download"],[1,"row","gy-2","gx-3","my-3"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder","Quick search",1,"form-control",3,"ngModel","ngModelChange"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[3,"fullName","otherFieldName"],[1,"drodown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-icon","btn-light"],[1,"icon","ni","ni-more-h"],[1,"dropdown-menu","dropdown-menu-end"],[1,"link-list-opt","no-bdr"],[4,"ngIf"],[3,"click"],[1,"icon","ni","ni-eye"],[1,"divider"],[1,"text-danger",3,"click"],[1,"icon","ni","ni-trash"],[1,"icon","ni","ni-edit"]],template:function(p,e){p&1&&(t(0,"app-add-item",0)(1,"span",1)(2,"a",2),v("click",function(){return e.openIndividualModalComponent(null,!0)}),m(3,"em",3),t(4,"span"),i(5,"Add individual occupant"),n()()(),t(6,"span",4)(7,"a",5),v("click",function(){return e.openInstitutionModalComponent(null,!0)}),m(8,"em",6),t(9,"span"),i(10,"Add institution occupant"),n()()()(),t(11,"div",7)(12,"div",8)(13,"div",9)(14,"label",10),i(15,"Occupant Type"),n(),m(16,"br"),t(17,"div",11)(18,"div",12)(19,"select",13),v("ngModelChange",function(C){return e.occupantType=C}),t(20,"option",14),i(21,"All Occupants"),n(),t(22,"option",15),i(23,"Individual"),n(),t(24,"option",16),i(25,"Institution"),n()()()()()(),t(26,"div",17)(27,"div",11)(28,"div",9)(29,"label",10),i(30,"Start Date"),n(),m(31,"br"),t(32,"p-calendar",18),v("ngModelChange",function(C){return e.startDate=C}),n()()()(),t(33,"div",8)(34,"label",19),i(35,"End Date"),n(),m(36,"br"),t(37,"p-calendar",20),v("ngModelChange",function(C){return e.endDate=C}),n()(),t(38,"div",17)(39,"button",21),v("click",function(){return e.fetchOccupants()}),i(40," Search "),n()(),t(41,"div",17)(42,"button",21),v("click",function(){return e.prefetchOccupants()}),i(43," Refresh "),n()(),t(44,"div",17)(45,"a",22),v("click",function(){return e.fetchOccupants()}),m(46,"em",23),t(47,"span"),i(48,"Export"),n()()()(),t(49,"div",24)(50,"div",17)(51,"div",11)(52,"div",25),m(53,"em",26),n(),t(54,"input",27),v("ngModelChange",function(C){return e.searchedKeyword=C}),n()()()(),t(55,"p-table",28,29),F(57,"filter"),f(58,Dt,19,0,"ng-template",30)(59,Pt,40,20,"ng-template",31),n()),p&2&&(r("pageTitleName","Occupants")("description","State Housing occupants(individuals & institutions)"),o(19),r("ngModel",e.occupantType),o(13),r("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModel",e.startDate),o(5),r("showIcon",!0)("ngModel",e.endDate),o(17),r("ngModel",e.searchedKeyword),o(1),r("value",le(57,17,e.listOfOccupants,e.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",ue(20,Vt))("resizableColumns",!0)("autoLayout",!0))},dependencies:[T,B,he,D,j,X,J,z,$,Y,H,ye,Z,W,xe,Re,De,Be,Ve,Me,Ge],encapsulation:2});let l=d;return l})();export{Bn as OccupantsComponent};
