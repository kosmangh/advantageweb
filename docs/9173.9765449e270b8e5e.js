"use strict";(self.webpackChunkadvantageweb=self.webpackChunkadvantageweb||[]).push([[9173],{2187:(N,v,n)=>{n.d(v,{c:()=>m});var h=n(6814),u=n(1054),c=n(2868),r=n(5879);function d(p,g){if(1&p&&(r.TgZ(0,"div"),r.ALo(1,"avatarBg"),r.TgZ(2,"span"),r._uU(3),r.ALo(4,"avatarName"),r.qZA()()),2&p){const Z=r.oxw();r.Gre("user-avatar  d-none d-sm-flex ",r.lcZ(1,4,""),""),r.xp6(3),r.hij("",r.lcZ(4,6,Z.fullName)," ")}}function e(p,g){if(1&p&&(r.TgZ(0,"span"),r._UZ(1,"br"),r.TgZ(2,"span"),r._uU(3),r.qZA()()),2&p){const Z=r.oxw();r.xp6(3),r.Oqu(Z.otherFieldName)}}let m=(()=>{var p;class g{constructor(){this.showAvatar=!0}ngOnInit(){}}return(p=g).\u0275fac=function(_){return new(_||p)},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-full-name"]],inputs:{fullName:"fullName",otherFieldName:"otherFieldName",showAvatar:"showAvatar"},standalone:!0,features:[r.jDz],decls:7,vars:3,consts:[[1,"user-card"],[3,"class",4,"ngIf"],[1,"user-info"],[1,"text-black"],[1,"dot","dot-success","d-md-none","ms-1"],[4,"ngIf"]],template:function(_,T){1&_&&(r.TgZ(0,"div",0),r.YNc(1,d,5,8,"div",1),r.TgZ(2,"div",2)(3,"span",3),r._uU(4),r._UZ(5,"span",4),r.qZA(),r.YNc(6,e,4,1,"span",5),r.qZA()()),2&_&&(r.xp6(1),r.Q6J("ngIf",T.showAvatar),r.xp6(3),r.hij(" ",T.fullName," "),r.xp6(2),r.Q6J("ngIf",T.otherFieldName))},dependencies:[h.ez,h.O5,u.b,c.M],encapsulation:2}),g})()},1054:(N,v,n)=>{n.d(v,{b:()=>u});var h=n(5879);let u=(()=>{var c;class r{transform(e){const m=["bg-info-dim","bg-warning-dim","bg-primary-dim","bg-success-dim","bg-danger-dim","bg-purple-dim","bg-indigo-dim"];return m[Math.floor(Math.random()*m.length)]}}return(c=r).\u0275fac=function(e){return new(e||c)},c.\u0275pipe=h.Yjl({name:"avatarBg",type:c,pure:!0,standalone:!0}),r})()},2868:(N,v,n)=>{n.d(v,{M:()=>u});var h=n(5879);let u=(()=>{var c;class r{transform(e){if(!e)return"NF";const m=e.split(" ");let p=m[0],g=m[1];return g?(p.charAt(0)+""+g.charAt(0)).toUpperCase():p.slice(0,2).toUpperCase()}}return(c=r).\u0275fac=function(e){return new(e||c)},c.\u0275pipe=h.Yjl({name:"avatarName",type:c,pure:!0,standalone:!0}),r})()},4874:(N,v,n)=>{n.d(v,{i:()=>u});var h=n(5879);let u=(()=>{var c;class r{transform(e){return e.trim().split("_").map(p=>p.trim()).join(" ")}}return(c=r).\u0275fac=function(e){return new(e||c)},c.\u0275pipe=h.Yjl({name:"removeHyphen",type:c,pure:!0,standalone:!0}),r})()},1085:(N,v,n)=>{n.d(v,{e:()=>u});var h=n(5879);let u=(()=>{var c;class r{constructor(e,m){this.changeDetectorRef=e,this.ngZone=m,this.timer=null}transform(e){this.removeTimer();let m=new Date(e),g=Math.round(Math.abs(((new Date).getTime()-m.getTime())/1e3)),Z=Number.isNaN(g)?1e3:1e3*this.getSecondsUntilUpdate(g);this.timer=this.ngZone.runOutsideAngular(()=>typeof window<"u"?window.setTimeout(()=>{this.ngZone.run(()=>this.changeDetectorRef.markForCheck())},Z):null);let _=Math.round(Math.abs(g/60)),T=Math.round(Math.abs(_/60)),A=Math.round(Math.abs(T/24)),y=Math.round(Math.abs(A/30.416)),M=Math.round(Math.abs(A/365));return Number.isNaN(g)?"":g<=45?"a few seconds ago":g<=90?"a minute ago":_<=45?_+" minutes ago":_<=90?"an hour ago":T<=22?T+" hours ago":T<=36?"a day ago":A<=25?A+" days ago":A<=45?"a month ago":A<=345?y+" months ago":A<=545?"a year ago":M+" years ago"}ngOnDestroy(){this.removeTimer()}removeTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}getSecondsUntilUpdate(e){return e<60?2:e<3600?30:e<86400?300:3600}}return(c=r).\u0275fac=function(e){return new(e||c)(h.Y36(h.sBO,16),h.Y36(h.R0b,16))},c.\u0275pipe=h.Yjl({name:"timeAgo",type:c,pure:!1,standalone:!0}),r})()},9173:(N,v,n)=>{n.r(v),n.d(v,{EstateListComponent:()=>be});var h=n(5861),u=n(6814),c=n(2458),r=n(8624),d=n(95),e=n(5879),m=n(6842),p=n(7177),g=n(1449),Z=n(4981),_=n(7236),T=n(9972);function A(s,i){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"SN"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Block"),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"Block Size / Acres"),e.qZA(),e.TgZ(7,"th",18),e._uU(8,"Properties"),e.qZA()())}function y(s,i){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",18),e._uU(6),e.TgZ(7,"span",19),e._uU(8),e.qZA()(),e.TgZ(9,"td",18),e._uU(10),e.ALo(11,"number"),e.qZA()()),2&s){const o=i.$implicit,a=i.rowIndex;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.Oqu(o.block),e.xp6(2),e.hij("",o.blockSize," "),e.xp6(2),e.hij("(",null==o?null:o.blockSizeLeft," left)"),e.xp6(2),e.Oqu(e.lcZ(11,5,o.properties))}}let M=(()=>{var s;class i{constructor(a,t,l,f,b){this.viewEstateBlockBsModalRef=a,this.accountService=t,this.settingsService=l,this.alertService=f,this.logger=b,this.accountService.currentUser.subscribe(F=>this.currentUser=F)}ngOnInit(){this.viewEstateBlockBsModalRef.setClass("gray modal-md modal-dialog-top"),this.fetchEstates()}fetchEstates(){this.listOfEstateBlocks=[],this.settingsService.getEstateBlocks(this.currentUser,this.estate.recordId).subscribe({next:a=>{if(this.logger.info("getEstates response "+JSON.stringify(a)),"000"===a.headerResponse.responseCode)return a.estateBlocks.length<=0?(this.alertService.showInfoMsgGeneral("No blocks found"),void this.logger.info("No blocks found ")):void(this.listOfEstateBlocks=a.estateBlocks);this.alertService.error(a.headerResponse.responseMessage)},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}}return(s=i).\u0275fac=function(a){return new(a||s)(e.Y36(m.UZ),e.Y36(p.e),e.Y36(g.g),e.Y36(Z.c),e.Y36(_.Kf))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:25,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],[1,"col-auto"],[1,"form-control-wrap"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search here",1,"form-control",3,"ngModel","ngModelChange"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-end"],[1,"text-primary"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return null==t.viewEstateBlockBsModalRef?null:t.viewEstateBlockBsModalRef.hide()}),e.TgZ(5,"span",3),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),e._UZ(13,"em",10),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(f){return t.searchedKeyword=f}),e.qZA()()()(),e.TgZ(15,"p-table",12,13),e.ALo(17,"filter"),e.YNc(18,A,9,0,"ng-template",14),e.YNc(19,y,12,7,"ng-template",15),e.qZA()()(),e.TgZ(20,"div",16)(21,"div",7)(22,"a",17),e.NdJ("click",function(){return null==t.viewEstateBlockBsModalRef?null:t.viewEstateBlockBsModalRef.hide()}),e.TgZ(23,"span"),e._uU(24,"Close"),e.qZA()()()()),2&a&&(e.xp6(2),e.lnq("",e.lcZ(3,10,t.estate.estateName),"'s blocks - ",t.estate.recordId," | ",t.estate.estateClass,""),e.xp6(12),e.Q6J("ngModel",t.searchedKeyword),e.xp6(1),e.Q6J("value",e.xi3(17,12,t.listOfEstateBlocks,t.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("resizableColumns",!0)("autoLayout",!0))},dependencies:[u.ez,u.JJ,u.rS,c.U$,c.iA,T.jx,d.u5,d.Fj,d.JJ,d.On,r.$],encapsulation:2}),i})();var U=n(995),k=n(3519),S=n.n(k),O=n(3221),x=n(2735),Y=n(4740),P=n(1693),D=n(1392),Q=n(4782),L=n(9917),z=n(6593),q=n(5178),E=n(553),G=n(5109),j=n(8397),K=n(7467),V=n(9862);let B=(()=>{var s;class i{constructor(a,t,l){this.utilsService=a,this.http=t,this.logger=l}getEstates(a,t,l){const f=new j.w;return f.searchBy=t,f.searchValue=l,f.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"ESTATE_LIST"),this.logger.info("estate list request "+JSON.stringify(f)),this.http.post(`${E.N.url+U.h.API_SETTINGS}estates`,f).pipe((0,q.V)(E.N.timeout))}createEstate(a,t){return t.createdBy=a.username,t.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"CREATE_ESTATE"),this.logger.info("create zone request "+JSON.stringify(t)),this.http.post(`${E.N.url+U.h.API_SETTINGS}createestate`,t).pipe((0,q.V)(E.N.timeout))}updateEstate(a,t){return t.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"UPDATE_ESTATE"),t.lastModifiedBy=a.username,this.logger.info("update zone request "+JSON.stringify(t)),this.http.post(`${E.N.url+U.h.API_SETTINGS}updateestate`,t).pipe((0,q.V)(E.N.timeout))}deleteEstate(a,t){const l=new G.V;return l.recordId=t,l.headerRequest=this.utilsService.getRequestHeader(a.zoneId,a.regionId,"DELETE_ESTATE"),this.logger.info("delete zone request "+JSON.stringify(l)),this.http.post(`${E.N.url+U.h.API_SETTINGS}deleteestate`,l).pipe((0,q.V)(E.N.timeout))}}return(s=i).\u0275fac=function(a){return new(a||s)(e.LFG(K.F),e.LFG(V.eN),e.LFG(_.Kf))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),i})();function H(s,i){if(1&s&&(e.TgZ(0,"div",37),e._UZ(1,"br"),e._uU(2),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e._uU(6),e._UZ(7,"br"),e._uU(8),e.ALo(9,"json"),e.qZA()),2&s){const o=e.oxw();e.xp6(2),e.hij("Dirty: ",o.estateFormGroup.dirty," "),e.xp6(2),e.hij("Touched: ",o.estateFormGroup.touched," "),e.xp6(2),e.hij("Valid: ",o.estateFormGroup.valid," "),e.xp6(2),e.hij("Value: ",e.lcZ(9,4,o.estateFormGroup.value),"\n")}}function $(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const o=i.$implicit;e.Q6J("value",o.recordId),e.xp6(1),e.hij(" ",o.regionName," ")}}function W(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function X(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function ee(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1," * Estate ID must be at least 2 characters long. "),e.qZA())}function te(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function ae(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1," * estate name must be longer than 3 characters. "),e.qZA())}function se(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const o=i.$implicit;e.Q6J("value",o.dataValue),e.xp6(1),e.hij(" ",o.dataLabel," ")}}function oe(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function ne(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function re(s,i){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function le(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1," * estate name must be longer than 3 characters. "),e.qZA())}function ie(s,i){1&s&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}function de(s,i){1&s&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}function ue(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",39)(3,"select",40)(4,"option",41),e._uU(5,"Choose..."),e.qZA(),e.TgZ(6,"option",42),e._uU(7,"One"),e.qZA(),e.TgZ(8,"option",43),e._uU(9,"Two"),e.qZA(),e.TgZ(10,"option",44),e._uU(11,"Three"),e.qZA()(),e.TgZ(12,"div",45)(13,"label",46),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.fetchRegions())}),e._UZ(14,"em",47),e.qZA()()()()()}}function ce(s,i){1&s&&(e.ynx(0),e.TgZ(1,"div",48),e._UZ(2,"input",49),e.TgZ(3,"label",50),e._uU(4," Save & create new estate "),e.qZA()(),e.BQk())}function pe(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"div",34)(1,"button",51),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.deleteEstate())}),e._uU(2," Delete "),e.qZA()()}if(2&s){const o=e.oxw();e.xp6(1),e.Q6J("title",o.estateFormGroup.invalid?"There must be errors on the form":"")}}function me(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"div",34)(1,"button",52),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.updateEstate())}),e._uU(2," Update estate "),e.qZA()()}if(2&s){const o=e.oxw();e.xp6(1),e.Q6J("title",o.estateFormGroup.invalid?"There must be errors on the form":"")}}function ge(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"div",34)(1,"button",52),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.saveEstate())}),e._uU(2," Create estate "),e.qZA()()}if(2&s){const o=e.oxw();e.xp6(1),e.Q6J("title",o.estateFormGroup.invalid?"There must be errors on the form":"")}}const C=function(s){return{"is-invalid":s}};let fe=(()=>{var s;class i{constructor(a,t,l,f,b,F,I,w){this.title=a,this.addEstateBsModalRef=t,this.fb=l,this.accountService=f,this.alertService=b,this.logger=F,this.settingsService=I,this.estateService=w,this.submitted=!1,this.router=(0,e.f3M)(Q.F0),this.accountService.currentUser.subscribe(Fe=>this.currentUser=Fe)}ngOnInit(){if(this.createNewForm(),this.isAddMode)this.estateHeaderMsg="New estate",this.title.setTitle(this.estateHeaderMsg);else{if(this.estateHeaderMsg="Edit "+this.estate.estateName,this.title.setTitle(this.estateHeaderMsg),this.estateFormGroup.patchValue(this.estate),this.estate.leaseStartDate){let a=this.estate.leaseStartDate.toString().replace("[UTC]","");this.estateForm.leaseStartDate.setValue(new Date(a))}if(this.estate.leaseEndDate){let a=this.estate.leaseEndDate.toString().replace("[UTC]","");this.estateForm.leaseEndDate.setValue(new Date(a))}}this.addEstateBsModalRef.setClass("gray modal-md modal-dialog-top"),this.fetchRegions(),this.listOfEstateClasses=this.settingsService.getEstateClass()}createNewForm(){this.estateFormGroup=this.fb.group({estateName:["",{updateOn:"blur",validators:[d.kI.required,d.kI.minLength(3)]}],recordId:["",{updateOn:"blur",validators:[d.kI.required,d.kI.minLength(2)]}],landSize:["",{updateOn:"blur",validators:[d.kI.required,d.kI.minLength(3)]}],estateClass:["",[d.kI.required]],estateLocation:["",{updateOn:"blur",validators:[d.kI.required,d.kI.minLength(3)]}],leaseStartDate:["",[d.kI.required]],leaseEndDate:["",[d.kI.required]],regionId:["",[d.kI.required]],additionalInfo:["",""],saveAndNew:[!1]})}get estateForm(){return this.estateFormGroup.controls}fetchRegions(){this.listOfRegions=[],this.settingsService.getRegions().subscribe({next:a=>{if(this.logger.info("getRegions response "+JSON.stringify(a)),"000"===a.headerResponse.responseCode)return a.regions.length<=0?(this.alertService.showInfoMsgGeneral("No regions found"),void this.logger.info("No regions found")):void(this.listOfRegions=a.regions);this.alertService.error(a.headerResponse.responseMessage)},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}saveEstate(){if(this.alertService.clear(),this.submitted=!0,!this.estateFormGroup.valid)return;let a=this.estateForm.estateName.value;S().fire({title:"Confirmation",text:`Do you want to create estate  ${a}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, create",cancelButtonText:"No, cancel"}).then(t=>{if(t.value){if(this.alertService.clear(),this.estateFormGroup.invalid)return;this.estateService.createEstate(this.currentUser,this.estateFormGroup.value).subscribe({next:l=>{"000"===l.headerResponse.responseCode?(this.alertService.showSuccessMsg(`${a} created successfully`),this.estateForm.saveAndNew.value||(this.addEstateBsModalRef.hide(),this.accountService.reloadCurrentRoute()),this.estateFormGroup.reset(),this.submitted=!1,this.logAction(`created estate ${a}`,U.h.SETTINGS)):this.alertService.showErrorMsg(l.headerResponse.responseMessage)},error:l=>{this.alertService.showInfoMsg(l)}})}else S()})}updateEstate(){if(this.alertService.clear(),this.submitted=!0,!this.estateFormGroup.valid)return;let a=this.estateForm.estateName.value;S().fire({position:"top",title:"Confirmation",text:`Do you want to update Estate ${a}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, update"}).then(t=>{if(t.value){if(this.alertService.clear(),this.estateFormGroup.invalid)return;this.estateService.updateEstate(this.currentUser,this.estateFormGroup.value).subscribe({next:l=>{this.logger.info("updateUserAccount response:"+JSON.stringify(l)),"000"===l.headerResponse.responseCode?(this.alertService.showSuccessMsg(`${a} updated successfully`),this.addEstateBsModalRef.hide(),this.logAction(`Updated ${a}`,U.h.SETTINGS),this.accountService.reloadCurrentRoute()):this.alertService.showErrorMsg(l.headerResponse.responseMessage)},error:l=>{this.alertService.showInfoMsg(l.message)}})}else S()})}deleteEstate(){throw new Error("Method not implemented.")}reloadCurrentRoute(){var a=this;return(0,h.Z)(function*(){let t=a.router.url;alert("Current route reload "+t),a.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{a.router.navigate([t])})})()}logAction(a,t){var l=this;return(0,h.Z)(function*(){yield l.accountService.logUserAudit(a,t)})()}}return(s=i).\u0275fac=function(a){return new(a||s)(e.Y36(z.Dx),e.Y36(m.UZ),e.Y36(d.qu),e.Y36(p.e),e.Y36(Z.c),e.Y36(_.Kf),e.Y36(g.g),e.Y36(B))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:96,vars:67,consts:[["class","p-10",4,"ngIf"],["novalidate","",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"row","gy-3","mt-3"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],[1,"form-control-select"],["id","regionId","formControlName","regionId",1,"form-control",3,"ngClass"],["value","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","formControlName","recordId","id","recordId","autocomplete","off",1,"form-control",3,"ngClass"],["type","text","formControlName","estateName","id","estateName","autocomplete","off",1,"form-control",3,"ngClass"],["id","estateClass","formControlName","estateClass",1,"form-control",3,"ngClass"],["labelName","Land Size",3,"labelForName"],[1,"form-text-hint"],[1,"overline-title"],["type","number","formControlName","landSize","id","landSize","autocomplete","off",1,"form-control",3,"ngClass"],["labelForName","estateLocation","labelName","Location"],["type","text","formControlName","estateLocation","id","estateLocation","autocomplete","off",1,"form-control",3,"ngClass"],["yearRange","2000:2021","styleClass","w-100","formControlName","leaseStartDate","id","leaseStartDate","dateFormat","dd/mm/yy",3,"monthNavigator","yearNavigator","showIcon","ngClass"],["styleClass","w-100","formControlName","leaseEndDate","id","leaseEndDate","dateFormat","dd/mm/yy",3,"showIcon","ngClass"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-12"],[3,"labelForName","showRequired","labelName"],["type","additionalInfo","formControlName","additionalInfo","id","additionalInfo",1,"form-control",2,"min-height","30px"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],["data-bs-dismiss","modal",1,"btn","btn-outline-light","btn-sm",3,"click"],["class","col-auto",4,"ngIf"],[1,"p-10"],[3,"value"],[1,"input-group","mb-3"],["id","inputGroupSelect02",1,"custom-select"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"input-group-append"],["for","inputGroupSelect02","containerClass","customClass","tooltip","Click to refresh if region is not found",1,"input-group-text",3,"click"],[1,"icon","ni","fs-15px","ni-repeat","text-primary"],[1,"custom-control","custom-control-sm","custom-checkbox","checked"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew","id","saveAndNew",1,"custom-control-input"],["for","saveAndNew",1,"custom-control-label","fw-bolder"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"btn","btn-primary","btn-sm",3,"title","click"]],template:function(a,t){1&a&&(e.YNc(0,H,10,6,"div",0),e.TgZ(1,"form",1)(2,"div",2)(3,"h6",3),e._uU(4),e.ALo(5,"titlecase"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return null==t.addEstateBsModalRef?null:t.addEstateBsModalRef.hide()}),e.TgZ(7,"span",5),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",6),e._UZ(10,"app-required-fields-notice"),e.TgZ(11,"div",7)(12,"div",8)(13,"div",9),e._UZ(14,"app-form-label",10),e.TgZ(15,"div",11)(16,"div",12)(17,"select",13)(18,"option",14),e._uU(19,"Select One"),e.qZA(),e.YNc(20,$,2,2,"option",15),e.qZA(),e.TgZ(21,"span",16),e.YNc(22,W,2,0,"div",17),e.qZA()()()()(),e.TgZ(23,"div",8)(24,"div",9),e._UZ(25,"app-form-label",10),e.TgZ(26,"div",11),e._UZ(27,"input",18),e.TgZ(28,"span",16),e.YNc(29,X,2,0,"div",17),e.YNc(30,ee,2,0,"div",17),e.qZA()()()(),e.TgZ(31,"div",8)(32,"div",9),e._UZ(33,"app-form-label",10),e.TgZ(34,"div",11),e._UZ(35,"input",19),e.TgZ(36,"span",16),e.YNc(37,te,2,0,"div",17),e.YNc(38,ae,2,0,"div",17),e.qZA()()()(),e.TgZ(39,"div",8)(40,"div",9),e._UZ(41,"app-form-label",10),e.TgZ(42,"div",11)(43,"div",12)(44,"select",20)(45,"option",14),e._uU(46,"Select One"),e.qZA(),e.YNc(47,se,2,2,"option",15),e.qZA(),e.TgZ(48,"span",16),e.YNc(49,oe,2,0,"div",17),e.qZA()()()()(),e.TgZ(50,"div",8)(51,"div",9),e._UZ(52,"app-form-label",21),e.TgZ(53,"div",11)(54,"div",22)(55,"span",23),e._uU(56,"Acre(s)"),e.qZA()(),e._UZ(57,"input",24),e.TgZ(58,"span",16),e.YNc(59,ne,2,0,"div",17),e.qZA()()()(),e.TgZ(60,"div",8)(61,"div",9),e._UZ(62,"app-form-label",25),e.TgZ(63,"div",11),e._UZ(64,"input",26),e.TgZ(65,"span",16),e.YNc(66,re,2,0,"div",17),e.YNc(67,le,2,0,"div",17),e.qZA()()()(),e.TgZ(68,"div",8)(69,"div",9),e._UZ(70,"app-form-label",10)(71,"p-calendar",27),e.TgZ(72,"span",16),e.YNc(73,ie,2,0,"span",17),e.qZA()()(),e.TgZ(74,"div",8)(75,"div",9),e._UZ(76,"app-form-label",10)(77,"p-calendar",28),e.TgZ(78,"span",16),e.YNc(79,de,2,0,"span",17),e.qZA()()(),e.YNc(80,ue,15,0,"div",29),e.TgZ(81,"div",30)(82,"div",9),e._UZ(83,"app-form-label",31),e.TgZ(84,"div",11)(85,"textarea",32),e._uU(86,"                        "),e.qZA()()()(),e.TgZ(87,"div",8),e.YNc(88,ce,5,0,"ng-container",17),e.qZA()()(),e.TgZ(89,"div",33)(90,"div",34)(91,"button",35),e.NdJ("click",function(){return null==t.addEstateBsModalRef?null:t.addEstateBsModalRef.hide()}),e._uU(92," Close "),e.qZA()(),e.YNc(93,pe,3,1,"div",36),e.YNc(94,me,3,1,"div",36),e.YNc(95,ge,3,1,"div",36),e.qZA()()),2&a&&(e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("formGroup",t.estateFormGroup),e.xp6(3),e.Oqu(e.lcZ(5,49,t.estateHeaderMsg)),e.xp6(10),e.Q6J("labelForName","regionId")("labelName","Region"),e.xp6(3),e.Q6J("ngClass",e.VKq(51,C,((null==t.estateForm.regionId?null:t.estateForm.regionId.touched)||(null==t.estateForm.regionId?null:t.estateForm.regionId.dirty)||t.submitted)&&(null==t.estateForm.regionId?null:t.estateForm.regionId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfRegions),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.regionId||null==t.estateForm.regionId.errors?null:t.estateForm.regionId.errors.required),e.xp6(3),e.Q6J("labelForName","recordId")("labelName","Estate ID"),e.xp6(2),e.Q6J("ngClass",e.VKq(53,C,((null==t.estateForm.recordId?null:t.estateForm.recordId.touched)||(null==t.estateForm.recordId?null:t.estateForm.recordId.dirty)||t.submitted)&&(null==t.estateForm.recordId?null:t.estateForm.recordId.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.recordId||null==t.estateForm.recordId.errors?null:t.estateForm.recordId.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.estateForm.recordId||null==t.estateForm.recordId.errors?null:t.estateForm.recordId.errors.minlength),e.xp6(3),e.Q6J("labelForName","estateName")("labelName","Estate Name"),e.xp6(2),e.Q6J("ngClass",e.VKq(55,C,((null==t.estateForm.estateName?null:t.estateForm.estateName.touched)||(null==t.estateForm.estateName?null:t.estateForm.estateName.dirty)||t.submitted)&&(null==t.estateForm.estateName?null:t.estateForm.estateName.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.estateName||null==t.estateForm.estateName.errors?null:t.estateForm.estateName.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.estateForm.estateName||null==t.estateForm.estateName.errors?null:t.estateForm.estateName.errors.minlength),e.xp6(3),e.Q6J("labelForName","estateClass")("labelName","Estate Class"),e.xp6(3),e.Q6J("ngClass",e.VKq(57,C,((null==t.estateForm.estateClass?null:t.estateForm.estateClass.touched)||(null==t.estateForm.estateClass?null:t.estateForm.estateClass.dirty)||t.submitted)&&(null==t.estateForm.estateClass?null:t.estateForm.estateClass.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfEstateClasses),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.estateClass||null==t.estateForm.estateClass.errors?null:t.estateForm.estateClass.errors.required),e.xp6(3),e.Q6J("labelForName","landSize"),e.xp6(5),e.Q6J("ngClass",e.VKq(59,C,((null==t.estateForm.landSize?null:t.estateForm.landSize.touched)||(null==t.estateForm.landSize?null:t.estateForm.landSize.dirty)||t.submitted)&&(null==t.estateForm.landSize?null:t.estateForm.landSize.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.landSize||null==t.estateForm.landSize.errors?null:t.estateForm.landSize.errors.required),e.xp6(5),e.Q6J("ngClass",e.VKq(61,C,((null==t.estateForm.estateLocation?null:t.estateForm.estateLocation.touched)||(null==t.estateForm.estateLocation?null:t.estateForm.estateLocation.dirty)||t.submitted)&&(null==t.estateForm.estateLocation?null:t.estateForm.estateLocation.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.estateLocation||null==t.estateForm.estateLocation.errors?null:t.estateForm.estateLocation.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.estateForm.estateLocation||null==t.estateForm.estateLocation.errors?null:t.estateForm.estateLocation.errors.minlength),e.xp6(3),e.Q6J("labelForName","leaseStartDate")("labelName","Lease Start Date"),e.xp6(1),e.Q6J("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngClass",e.VKq(63,C,((null==t.estateForm.leaseStartDate?null:t.estateForm.leaseStartDate.touched)||(null==t.estateForm.leaseStartDate?null:t.estateForm.leaseStartDate.dirty)||t.submitted)&&(null==t.estateForm.leaseStartDate?null:t.estateForm.leaseStartDate.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.leaseStartDate||null==t.estateForm.leaseStartDate.errors?null:t.estateForm.leaseStartDate.errors.required),e.xp6(3),e.Q6J("labelForName","leaseEndDate")("labelName","Lease End Date"),e.xp6(1),e.Q6J("showIcon",!0)("ngClass",e.VKq(65,C,((null==t.estateForm.leaseEndDate?null:t.estateForm.leaseEndDate.touched)||(null==t.estateForm.leaseEndDate?null:t.estateForm.leaseEndDate.dirty)||t.submitted)&&(null==t.estateForm.leaseEndDate?null:t.estateForm.leaseEndDate.errors))),e.xp6(2),e.Q6J("ngIf",null==t.estateForm.leaseEndDate||null==t.estateForm.leaseEndDate.errors?null:t.estateForm.leaseEndDate.errors.required),e.xp6(1),e.Q6J("ngIf",!1),e.xp6(3),e.Q6J("labelForName","additionalInfo")("showRequired",!1)("labelName","Addition Information"),e.xp6(5),e.Q6J("ngIf",t.isAddMode),e.xp6(5),e.Q6J("ngIf",!t.isAddMode),e.xp6(1),e.Q6J("ngIf",!t.isAddMode),e.xp6(1),e.Q6J("ngIf",t.isAddMode))},dependencies:[u.ez,u.mk,u.sg,u.O5,u.Ts,u.rS,d.u5,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.Wl,d.EJ,d.JJ,d.JL,d.UX,d.sg,d.u,Y.A0,D._8,D.f,O.z,x.h,P.M,L.z8,L.i9],encapsulation:2}),i})();var he=n(5176),_e=n(2187),ve=n(1085),J=n(4874),R=n(3285);function Ze(s,i){if(1&s&&(e.TgZ(0,"li")(1,"span",9),e._uU(2,"Properties"),e.qZA(),e._uU(3," - "),e.TgZ(4,"span",10),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&s){const o=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,1,o.estate.properties))}}let Te=(()=>{var s;class i{constructor(a,t){this.viewEstateBsModalRef=a,this.accountService=t,this.accountService.currentUser.subscribe(l=>this.currentUser=l)}ngOnInit(){this.viewEstateBsModalRef.setClass("gray modal-md modal-dialog-top")}}return(s=i).\u0275fac=function(a){return new(a||s)(e.Y36(m.UZ),e.Y36(p.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:127,vars:55,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"pricing-body"],[1,"pricing-features"],[1,"preview-title-lg","overline-title"],[1,"w-50","text-soft"],[1,"ms-auto","text-solid"],[4,"ngIf"],[1,"preview-title-lg","overline-title","mt-2"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return null==t.viewEstateBsModalRef?null:t.viewEstateBsModalRef.hide()}),e.TgZ(5,"span",3),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"ul",7)(11,"span",8),e._uU(12,"Estate Information"),e.qZA(),e.TgZ(13,"li")(14,"span",9),e._uU(15,"Estate Name"),e.qZA(),e._uU(16," - "),e.TgZ(17,"span",10),e._uU(18),e.qZA()(),e.TgZ(19,"li")(20,"span",9),e._uU(21,"Estate Class"),e.qZA(),e._uU(22," - "),e.TgZ(23,"span",10),e._uU(24),e.ALo(25,"removeHyphen"),e.ALo(26,"titlecase"),e.qZA()(),e.TgZ(27,"li")(28,"span",9),e._uU(29,"Region"),e.qZA(),e._uU(30," - "),e.TgZ(31,"span",10),e._uU(32),e.ALo(33,"titlecase"),e.qZA()(),e.TgZ(34,"li")(35,"span",9),e._uU(36,"Land Size "),e.TgZ(37,"small"),e._uU(38,"(Acres)"),e.qZA()(),e._uU(39," - "),e.TgZ(40,"span",10),e._uU(41),e.ALo(42,"number"),e.qZA()(),e.TgZ(43,"li")(44,"span",9),e._uU(45,"Land Size Left"),e.TgZ(46,"small"),e._uU(47," (Acres)"),e.qZA()(),e._uU(48," - "),e.TgZ(49,"span",10),e._uU(50),e.ALo(51,"number"),e.qZA()(),e.TgZ(52,"li")(53,"span",9),e._uU(54,"Lease Start Date"),e.qZA(),e._uU(55," - "),e.TgZ(56,"span",10),e._uU(57),e.ALo(58,"date"),e.ALo(59,"cleanDate"),e.TgZ(60,"small"),e._uU(61),e.ALo(62,"timeAgo"),e.qZA()()(),e.TgZ(63,"li")(64,"span",9),e._uU(65,"Lease End Date"),e.qZA(),e._uU(66," - "),e.TgZ(67,"span",10),e._uU(68),e.ALo(69,"date"),e.ALo(70,"cleanDate"),e.TgZ(71,"small"),e._uU(72),e.ALo(73,"timeAgo"),e.qZA()()(),e.TgZ(74,"li")(75,"span",9),e._uU(76,"Duration Left"),e.qZA(),e._uU(77," - "),e.TgZ(78,"span",10),e._uU(79),e.qZA()(),e.TgZ(80,"li")(81,"span",9),e._uU(82,"Blocks"),e.qZA(),e._uU(83," - "),e.TgZ(84,"span",10),e._uU(85),e.ALo(86,"number"),e.qZA()(),e.YNc(87,Ze,7,3,"li",11),e.TgZ(88,"span",12),e._uU(89,"Estate activities"),e.qZA(),e.TgZ(90,"li")(91,"span",9),e._uU(92,"Created By"),e.qZA(),e._uU(93," - "),e.TgZ(94,"span",10),e._uU(95),e.qZA()(),e.TgZ(96,"li")(97,"span",9),e._uU(98,"Created Date"),e.qZA(),e._uU(99," - "),e.TgZ(100,"span",10),e._uU(101),e.ALo(102,"date"),e.TgZ(103,"small"),e._uU(104),e.ALo(105,"timeAgo"),e.qZA()()(),e.TgZ(106,"li")(107,"span",9),e._uU(108,"Last Modified By"),e.qZA(),e._uU(109," - "),e.TgZ(110,"span",10),e._uU(111),e.qZA()(),e.TgZ(112,"li")(113,"span",9),e._uU(114,"Modified Date"),e.qZA(),e._uU(115," - "),e.TgZ(116,"span",10),e._uU(117),e.ALo(118,"date"),e.TgZ(119,"small"),e._uU(120),e.ALo(121,"timeAgo"),e.qZA()()()()()()(),e.TgZ(122,"div",13)(123,"div",14)(124,"a",15),e.NdJ("click",function(){return null==t.viewEstateBsModalRef?null:t.viewEstateBsModalRef.hide()}),e.TgZ(125,"span"),e._uU(126,"Close"),e.qZA()()()()),2&a&&(e.xp6(2),e.hij("",e.lcZ(3,19,t.estate.estateName)," Details"),e.xp6(16),e.Oqu(t.estate.estateName),e.xp6(6),e.Oqu(e.lcZ(25,21,e.lcZ(26,23,t.estate.estateClass))),e.xp6(8),e.Oqu(e.lcZ(33,25,t.estate.regionName)),e.xp6(9),e.Oqu(e.lcZ(42,27,t.estate.landSize)),e.xp6(9),e.Oqu(e.lcZ(51,29,t.estate.landSizeLeft)),e.xp6(7),e.hij(" ",e.lcZ(58,31,e.lcZ(59,33,t.estate.leaseStartDate))," , "),e.xp6(4),e.hij("",e.lcZ(62,35,t.estate.leaseStartDate.toString())," "),e.xp6(7),e.hij(" ",e.lcZ(69,37,e.lcZ(70,39,t.estate.leaseEndDate))," , "),e.xp6(4),e.hij("",e.lcZ(73,41,t.estate.leaseEndDate.toString())," "),e.xp6(7),e.Oqu(t.estate.durationLeft),e.xp6(6),e.Oqu(e.lcZ(86,43,t.estate.totalBlocks)),e.xp6(2),e.Q6J("ngIf",!1),e.xp6(8),e.Oqu(t.estate.createdBy),e.xp6(6),e.hij("",e.xi3(102,45,t.estate.createdDate,"medium")," ,"),e.xp6(3),e.Oqu(e.lcZ(105,48,t.estate.createdDate.toString())),e.xp6(7),e.Oqu(t.estate.createdBy),e.xp6(6),e.hij("",e.xi3(118,50,t.estate.lastModifiedDate,"medium")," ,"),e.xp6(3),e.Oqu(e.lcZ(121,53,t.estate.lastModifiedDate.toString())))},dependencies:[u.ez,u.O5,u.JJ,u.rS,u.uU,ve.e,J.i,R.F],encapsulation:2}),i})(),Ae=(()=>{var s;class i{}return(s=i).\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(a,t){1&a&&(e.TgZ(0,"p"),e._uU(1,"selected-estate-properties works!"),e.qZA())},dependencies:[u.ez],encapsulation:2}),i})();function Ee(s,i){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"SN"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Estate"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Estate Class"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Region"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Land Size / Acres"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Lease Start Date"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Lease End Date"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Duration Left"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Blocks"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Actions"),e.qZA()())}function Ce(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"li")(1,"a",23),e.NdJ("click",function(){e.CHM(o);const t=e.oxw().$implicit,l=e.oxw();return e.KtG(l.openEstateBlocksModalComponent(t))}),e._UZ(2,"em",27),e.TgZ(3,"span"),e._uU(4,"Blocks"),e.qZA()()()}}function Ue(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"li")(1,"a",23),e.NdJ("click",function(){e.CHM(o);const t=e.oxw().$implicit,l=e.oxw();return e.KtG(l.openEstatePropertiesModalComponent(t))}),e._UZ(2,"em",28),e.TgZ(3,"span"),e._uU(4,"Properties"),e.qZA()()()}}function Ne(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"app-full-name",15),e.qZA(),e.TgZ(5,"td",16),e._uU(6),e.ALo(7,"removeHyphen"),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.TgZ(13,"span",17),e._uU(14),e.qZA()(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"date"),e.ALo(18,"cleanDate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"date"),e.ALo(22,"cleanDate"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td")(29,"div",18)(30,"a",19),e._UZ(31,"em",20),e.qZA(),e.TgZ(32,"div",21)(33,"ul",22)(34,"li")(35,"a",23),e.NdJ("click",function(){const l=e.CHM(o).$implicit,f=e.oxw();return e.KtG(f.openEstateModalComponent(l,!1))}),e._UZ(36,"em",24),e.TgZ(37,"span"),e._uU(38,"Edit estate"),e.qZA()()(),e.TgZ(39,"li")(40,"a",23),e.NdJ("click",function(){const l=e.CHM(o).$implicit,f=e.oxw();return e.KtG(f.openEstateDetailsModalComponent(l))}),e._UZ(41,"em",25),e.TgZ(42,"span"),e._uU(43,"View details"),e.qZA()()(),e.YNc(44,Ce,5,0,"li",26),e.YNc(45,Ue,5,0,"li",26),e.qZA()()()()()}if(2&s){const o=i.$implicit,a=i.rowIndex;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.s9C("fullName",null==o?null:o.estateName),e.s9C("otherFieldName",null==o?null:o.recordId),e.xp6(2),e.Oqu(e.lcZ(7,13,e.lcZ(8,15,o.estateClass))),e.xp6(4),e.Oqu(null==o?null:o.regionName),e.xp6(2),e.hij("",null==o?null:o.landSize," "),e.xp6(2),e.hij("(",null==o?null:o.landSizeLeft," left)"),e.xp6(2),e.Oqu(e.xi3(17,17,e.lcZ(18,20,null==o?null:o.leaseStartDate),"mediumDate")),e.xp6(4),e.Oqu(e.xi3(21,22,e.lcZ(22,25,null==o?null:o.leaseEndDate),"mediumDate")),e.xp6(4),e.hij(" ",null==o?null:o.durationLeft," "),e.xp6(2),e.Oqu(e.lcZ(27,27,null==o?null:o.totalBlocks)),e.xp6(18),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",!1)}}const Se=function(){return[5,10,25,50]};let be=(()=>{var s;class i{constructor(a,t,l,f,b,F,I){this.estateService=a,this.alertService=t,this.accountService=l,this.logger=f,this.estateModalService=b,this.estateBlockModalService=F,this.estatePropertyModalService=I,this.accountService.currentUser.subscribe(w=>this.currentUser=w)}ngOnInit(){this.searchBy="ALL",this.refreshButton(),this.logAction("Viewed estates page",U.h.SETTINGS)}ngOnDestroy(){this.estateModalService.hide(),S().close()}refreshButton(){this.fetchEstates()}fetchEstates(){this.listOfEstates=[],this.estateService.getEstates(this.currentUser,this.searchBy,this.searchValue).subscribe({next:a=>{if(this.logger.info("getEstates response "+JSON.stringify(a)),"000"===a.headerResponse.responseCode)return a.estates.length<=0?(this.alertService.showInfoMsgGeneral("No estates found"),void this.logger.info("No estates found")):void(this.listOfEstates=a.estates);this.alertService.error(a.headerResponse.responseMessage)},error:a=>{this.logger.error(a),this.alertService.showInfoMsg(a)}})}openEstateModalComponent(a,t){const l={initialState:{isAddMode:t,estate:a}};this.estateModalService.config.ignoreBackdropClick=!0,this.estateModalService.config.animated=!0,this.addEstateBsModalRef=this.estateModalService.show(fe,l),this.addEstateBsModalRef.content.closeBtnName="Close"}openEstateDetailsModalComponent(a){const t={initialState:{estate:a}};this.estateModalService.config.ignoreBackdropClick=!1,this.estateModalService.config.animated=!0,this.addEstateBsModalRef=this.estateModalService.show(Te,t),this.addEstateBsModalRef.content.closeBtnName="Close"}openEstateBlocksModalComponent(a){const t={initialState:{estate:a}};this.estateBlockModalService.config.ignoreBackdropClick=!1,this.estateBlockModalService.config.animated=!0,this.viewEstateBlockBsModalRef=this.estateModalService.show(M,t),this.viewEstateBlockBsModalRef.content.closeBtnName="Close"}openEstatePropertiesModalComponent(a){const t={initialState:{estate:a}};this.estatePropertyModalService.config.ignoreBackdropClick=!1,this.estatePropertyModalService.config.animated=!0,this.viewEstatePropertyBsModalRef=this.estateModalService.show(Ae,t),this.viewEstatePropertyBsModalRef.content.closeBtnName="Close"}logAction(a,t){var l=this;return(0,h.Z)(function*(){yield l.accountService.logUserAudit(a,t)})()}}return(s=i).\u0275fac=function(a){return new(a||s)(e.Y36(B),e.Y36(Z.c),e.Y36(p.e),e.Y36(_.Kf),e.Y36(m.tT),e.Y36(m.tT),e.Y36(m.tT))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-estate-list"]],standalone:!0,features:[e.jDz],decls:20,vars:14,consts:[[3,"pageTitleName","description"],[1,"newItemName"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-plus"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],[1,"col-auto"],[1,"form-control-wrap"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search here",1,"form-control",3,"ngModel","ngModelChange"],["type","button","title","",1,"btn","btn-dim","btn-primary",3,"click"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[3,"fullName","otherFieldName"],[1,"text-capitalize"],[1,"text-primary"],[1,"drodown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-icon","btn-light"],[1,"icon","ni","ni-more-h"],[1,"dropdown-menu","dropdown-menu-end"],[1,"link-list-opt","no-bdr"],[3,"click"],[1,"icon","ni","ni-edit"],[1,"icon","ni","ni-eye"],[4,"ngIf"],[1,"icon","ni","ni-home"],[1,"icon","ni","ni-property"]],template:function(a,t){1&a&&(e.TgZ(0,"app-add-item",0)(1,"span",1)(2,"a",2),e.NdJ("click",function(){return t.openEstateModalComponent(null,!0)}),e._UZ(3,"em",3),e.TgZ(4,"span"),e._uU(5,"Add estate"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),e._UZ(10,"em",8),e.qZA(),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(f){return t.searchedKeyword=f}),e.qZA()()(),e.TgZ(12,"div",5)(13,"button",10),e.NdJ("click",function(){return t.refreshButton()}),e._uU(14," Refresh "),e.qZA()()(),e.TgZ(15,"p-table",11,12),e.ALo(17,"filter"),e.YNc(18,Ee,21,0,"ng-template",13),e.YNc(19,Ne,46,29,"ng-template",14),e.qZA()),2&a&&(e.Q6J("pageTitleName","Region setup")("description","Setup state housing estates"),e.xp6(11),e.Q6J("ngModel",t.searchedKeyword),e.xp6(4),e.Q6J("value",e.xi3(17,10,t.listOfEstates,t.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(13,Se))("resizableColumns",!0)("autoLayout",!0))},dependencies:[u.ez,u.O5,u.JJ,u.rS,u.uU,c.U$,c.iA,T.jx,d.u5,d.Fj,d.JJ,d.On,_e.c,he.L,r.$,J.i,R.F],encapsulation:2}),i})()}}]);