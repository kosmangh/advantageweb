import{a as x}from"./chunk-OZXVN4E4.js";import{a as P}from"./chunk-EHIACVEG.js";import{a as V}from"./chunk-NEQ5BFSP.js";import{c as I,e as v,f as G,g as L,l as A,o as q,p as M,u as R,v as T,w as O,x as D}from"./chunk-B2QESFZG.js";import{c as j}from"./chunk-R55IMLXW.js";import{d as _,g as N}from"./chunk-IHPVOZWG.js";import{p as E}from"./chunk-7DWKZ4XI.js";import{Eb as d,Fb as S,Ic as k,Lc as y,Mb as w,Ob as f,Pb as F,Sa as l,Ta as p,Uc as C,bb as s,ib as u,la as b,nb as t,ob as i,pb as n,wb as g}from"./chunk-QRSQYA3Q.js";import{e as h}from"./chunk-5FZOKLP6.js";function B(r,a){r&1&&(t(0,"div",9)(1,"a",33),n(2,"img",11),i()())}function J(r,a){r&1&&(t(0,"div"),n(1,"app-required-field"),i())}function W(r,a){r&1&&(t(0,"div",23),n(1,"app-required-field"),i())}var U=r=>({"is-invalid":r}),z=(r,a)=>({"ni-eye-off":r,"ni-eye":a}),ae=(()=>{let a=class a{constructor(o,m,e,c){this.fb=o,this.accountService=m,this.router=e,this.alertService=c}ngOnInit(){this.loginFormGroup=this.fb.group({username:["",{updateOn:"blur",validators:[v.required]}],password:["",{updateOn:"blur",validators:[v.required]}]})}showPassword(){this.show=!this.show}get loginForm(){return this.loginFormGroup.controls}onSubmit(){this.alertService.clear(),this.submitted=!0,this.loginFormGroup.valid&&this.accountService.loginUser(this.loginFormGroup.value.username,this.loginFormGroup.value.password).subscribe({next:o=>{if(console.info("login response "+JSON.stringify(o)),o.headerResponse.responseCode!=="000"){this.alertService.error(o.headerResponse.responseMessage),this.submitted=!1,this.accountService.logout();return}this.logAction("Logged in",_.LOGIN),o.status==="NEW"||o.status==="RESET"?this.router.navigate(["/reset"]):this.router.navigate(["/dashboard"])},error:o=>{this.alertService.error(o),this.submitted=!1}})}logAction(o,m){return h(this,null,function*(){yield this.accountService.logAction(o,m)})}};a.\u0275fac=function(m){return new(m||a)(p(R),p(N),p(E),p(j))},a.\u0275cmp=b({type:a,selectors:[["ng-component"]],standalone:!0,features:[w],decls:46,vars:20,consts:[[1,"nk-app-root"],[1,"nk-main"],[1,"nk-wrap","nk-wrap-nosidebar"],[1,"nk-content"],[1,"nk-block","nk-block-middle","nk-auth-body","wide-xs"],["class","brand-logo pb-4 text-center",4,"ngIf"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"mb-2"],[1,"brand-logo","pb-4","text-center"],[1,"logo-link"],["src","assets/images/logo.png","alt","logo",1,"logo-img","logo-img-lg"],[1,"nk-block-head","mb-4"],[1,"nk-block-head-content"],[1,"nk-block-title","text-center"],[1,"nk-block-title","text-center","text-primary"],[1,"nk-block-des","text-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-label-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["type","text","formControlName","username","id","username","placeholder","Enter your username",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"],["routerLink","/passwordresetstep1",1,"link","link-primary","link-sm"],["data-target","password",1,"form-icon","form-icon-right","passcode-switch",3,"click"],[1,"passcode-icon","icon-show","icon","ni","ni-eye",3,"ngClass"],["formControlName","password","id","password","placeholder","Enter your password",1,"form-control",3,"type","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mt-4"],[1,"btn","btn-lg","btn-primary","btn-block"],[1,"text-center","mt-5"],["href","#",1,"logo-link"]],template:function(m,e){m&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),u(5,B,3,0,"div",5),t(6,"div",6)(7,"div",7),n(8,"app-alert",8),t(9,"div",9)(10,"a",10),n(11,"img",11),i()(),t(12,"div",12)(13,"div",13)(14,"h5",14),d(15,"Advantage Plus"),i(),n(16,"br"),t(17,"h5",15),d(18,"Login"),i(),t(19,"div",16)(20,"p"),d(21,"Login with your username and password"),i()()()(),t(22,"form",17),g("ngSubmit",function(){return e.onSubmit()}),t(23,"div",18)(24,"div",19)(25,"div",19),n(26,"app-form-label",20),i()(),t(27,"div",21),n(28,"input",22),t(29,"div",23),u(30,J,2,0,"div",24),i()()(),t(31,"div",18)(32,"div",19),n(33,"app-form-label",20),t(34,"a",25),d(35," Forgot password ?"),i()(),t(36,"div",21)(37,"a",26),g("click",function(){return e.showPassword()}),n(38,"em",27),i(),n(39,"input",28),u(40,W,2,0,"div",29),i()(),t(41,"div",30)(42,"button",31),d(43),i()()(),t(44,"div",32),n(45,"app-copy-right"),i()()()()()()()()),m&2&&(l(5),s("ngIf",!1),l(17),s("formGroup",e.loginFormGroup),l(4),s("labelForName","merchantId")("labelName","Username"),l(2),s("ngClass",f(13,U,(e.loginForm.username.touched||e.loginForm.username.dirty||e.submitted)&&e.loginForm.username.errors)),l(2),s("ngIf",e.loginForm.username.errors==null?null:e.loginForm.username.errors.required),l(3),s("labelForName","password")("labelName","Password"),l(5),s("ngClass",F(15,z,!e.show,e.show)),l(1),s("type",e.show?"text":"password")("ngClass",f(18,U,(e.loginForm.password.touched||e.loginForm.password.dirty||e.submitted)&&e.loginForm.password.errors)),l(1),s("ngIf",e.loginForm.password.errors==null?null:e.loginForm.password.errors.required),l(3),S("login"))},dependencies:[C,k,y,T,A,I,G,L,O,q,M,x,D,P,V],encapsulation:2});let r=a;return r})();export{ae as LoginComponent};
