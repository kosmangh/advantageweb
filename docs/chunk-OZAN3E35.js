import{a as U}from"./chunk-OZXVN4E4.js";import{a as D}from"./chunk-EHIACVEG.js";import{a as B}from"./chunk-NEQ5BFSP.js";import{c as G,e as P,f as I,g as A,l as M,o as x,p as L,u as T,v as j,w as q,x as V}from"./chunk-B2QESFZG.js";import{c as O}from"./chunk-R55IMLXW.js";import{d as _,g as R}from"./chunk-IHPVOZWG.js";import{p as C,q as N,v as E}from"./chunk-7DWKZ4XI.js";import{Eb as d,Ic as k,Lc as y,Mb as v,Nb as b,Ob as w,Pb as S,Sa as l,Ta as p,Uc as F,bb as m,ib as h,la as f,nb as t,ob as r,pb as i,wb as u}from"./chunk-QRSQYA3Q.js";import{e as g}from"./chunk-5FZOKLP6.js";function W(n,s){n&1&&(t(0,"div",29),i(1,"app-required-field"),r())}var z=(n,s)=>({"ni-eye-off":n,"ni-eye":s}),H=n=>({"is-invalid":n}),K=()=>["/login"],me=(()=>{let s=class s{constructor(o,a,e,c){this.fb=o,this.accountService=a,this.router=e,this.alertService=c,this.accountService.currentUser.subscribe(J=>this.currentUser=J)}ngOnInit(){this.loginFormGroup=this.fb.group({password:["",{updateOn:"blur",validators:[P.required]}]})}showPassword(){this.show=!this.show}get loginForm(){return this.loginFormGroup.controls}onSubmit(){this.alertService.clear(),this.submitted=!0,this.loginFormGroup.valid&&this.accountService.resetPassword(this.currentUser,this.loginFormGroup.value.password).subscribe({next:o=>{if(console.info("login response "+JSON.stringify(o)),o.headerResponse.responseCode!=="000"){this.alertService.error(o.headerResponse.responseMessage),this.submitted=!1,this.accountService.logout();return}this.logAction("Logged in",_.LOGIN),o.status==="NEW"||o.status==="RESET"?this.router.navigate(["/reset"]):this.router.navigate(["/dashboard"])},error:o=>{this.alertService.error(o),this.submitted=!1}})}logAction(o,a){return g(this,null,function*(){yield this.accountService.logAction(o,a)})}};s.\u0275fac=function(a){return new(a||s)(p(T),p(R),p(C),p(O))},s.\u0275cmp=f({type:s,selectors:[["ng-component"]],standalone:!0,features:[v],decls:39,vars:14,consts:[[1,"nk-app-root"],[1,"nk-main"],[1,"nk-wrap","nk-wrap-nosidebar"],[1,"nk-content"],[1,"nk-block","nk-block-middle","nk-auth-body","wide-xs"],[1,"mb-2"],[1,"card","card-bordered"],[1,"card-inner","card-inner-lg"],[1,"brand-logo","pb-4","text-center"],[1,"logo-link"],["src","assets/images/logo.png","alt","logo",1,"logo-img","logo-img-lg"],[1,"nk-block-head","mb-3"],[1,"nk-block-head-content"],[1,"nk-block-title","text-center"],[1,"nk-block-title","text-center","text-primary"],[1,"nk-block-des","text-center"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["data-target","password",1,"form-icon","form-icon-right","passcode-switch",3,"click"],[1,"passcode-icon","icon-show","icon","ni","ni-eye",3,"ngClass"],["formControlName","password","id","password","placeholder","Enter your password",1,"form-control",3,"type","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mt-4"],[1,"btn","btn-lg","btn-primary","btn-block"],[1,"form-note-s2","pt-4","text-center"],[3,"routerLink"],[1,"text-center","mt-5"],[1,"invalid-feedback"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),i(5,"app-alert",5),t(6,"div",6)(7,"div",7)(8,"div",8)(9,"a",9),i(10,"img",10),r()(),t(11,"div",11)(12,"div",12)(13,"h5",13),d(14,"Advantage Pro"),r(),i(15,"br"),t(16,"h5",14),d(17,"Password reset"),r(),t(18,"div",15)(19,"p"),d(20,"Set your password with the temporary password shared with you"),r()()()(),t(21,"form",16),u("ngSubmit",function(){return e.onSubmit()}),t(22,"div",17),i(23,"app-form-label",18),t(24,"div",19)(25,"a",20),u("click",function(){return e.showPassword()}),i(26,"em",21),r(),i(27,"input",22),h(28,W,2,0,"div",23),r()(),t(29,"div",24)(30,"button",25),d(31,"Reset password"),r()()(),i(32,"br"),t(33,"div",26),d(34," Change your mind? "),t(35,"a",27),d(36,"Login"),r()(),t(37,"div",28),i(38,"app-copy-right"),r()()()()()()()()),a&2&&(l(21),m("formGroup",e.loginFormGroup),l(2),m("labelForName","password")("labelName","Password"),l(3),m("ngClass",S(8,z,!e.show,e.show)),l(1),m("type",e.show?"text":"password")("ngClass",w(11,H,(e.loginForm.password.touched||e.loginForm.password.dirty||e.submitted)&&e.loginForm.password.errors)),l(1),m("ngIf",e.loginForm.password.errors==null?null:e.loginForm.password.errors.required),l(7),m("routerLink",b(13,K)))},dependencies:[F,k,y,j,M,G,I,A,q,x,L,U,E,N,V,D,B],encapsulation:2});let n=s;return n})();export{me as PasswordResetComponent};
