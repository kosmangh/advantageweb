"use strict";(self.webpackChunkadvantageweb=self.webpackChunkadvantageweb||[]).push([[5264],{6763:(F,f,r)=>{r.d(f,{k:()=>C});var e=r(5178),s=r(553),d=r(5109);class _{}var m=r(5879),y=r(7467),v=r(9862),T=r(7236);let C=(()=>{var g;class P{constructor(c,l,u){this.utilsService=c,this.http=l,this.logger=u,this.OCCUPANCY="/occupancy/"}createOccupant(c,l){return l.createdBy=c.username,l.nationality="GHANAIAN",l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"CREATE_OCCUPANT"),this.logger.info("create occupant request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}createoccupant`,l).pipe((0,e.V)(s.N.timeout))}updateOccupant(c,l){return l.lastModifiedBy=c.username,l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"UPDATE_OCCUPANT"),this.logger.info("update occupant request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}updateoccupant`,l).pipe((0,e.V)(s.N.timeout))}deleteOccupant(c,l){let u=new d.V;return u.recordId=l,u.deletedBy=c.username,u.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"DELETE_OCCUPANT"),this.logger.info("delete occupant request "+JSON.stringify(u)),this.http.post(`${s.N.url+this.OCCUPANCY}deleteoccupant`,u).pipe((0,e.V)(s.N.timeout))}searchOccupants(c,l){return l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"OCCUPANTS_LIST"),this.logger.info("searchOccupants request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}occupants`,l).pipe((0,e.V)(s.N.timeout))}searchOccupantProperties(c,l){return l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"OCCUPANT_PROPERTIES_LIST"),this.logger.info("searchOccupantProperties request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}occupantproperties`,l).pipe((0,e.V)(s.N.timeout))}quickSearchOccupantProperties(c,l,u){let Z=new _;return Z.searchText=l,Z.occupationType=u,Z.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"OCCUPANT_PROPERTIES_LIST"),this.http.post(`${s.N.url+this.OCCUPANCY}occupiedpropertiesquicksearch`,Z)}createOccupantProperty(c,l){return l.createdBy=c.username,l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"CREATE_OCCUPANT_PROPERTY"),this.logger.info("create create occupantProperty request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}createoccupantproperty`,l).pipe((0,e.V)(s.N.timeout))}updateOccupantProperty(c,l){return l.lastModifiedBy=c.username,l.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"UPDATE_OCCUPANT_PROPERTY"),this.logger.info(" updateOccupantProperty request "+JSON.stringify(l)),this.http.post(`${s.N.url+this.OCCUPANCY}updateoccupantproperty`,l).pipe((0,e.V)(s.N.timeout))}deleteOccupantProperty(c,l){let u=new d.V;return u.recordId=l,u.deletedBy=c.username,u.headerRequest=this.utilsService.getRequestHeader(c.zoneId,c.regionId,"DELETE_OCCUPANT_PROPERTY"),this.logger.info("deleteOccupantProperty request "+JSON.stringify(u)),this.http.post(`${s.N.url+this.OCCUPANCY}deleteoccupantproperty`,u).pipe((0,e.V)(s.N.timeout))}}return(g=P).\u0275fac=function(c){return new(c||g)(m.LFG(y.F),m.LFG(v.eN),m.LFG(T.Kf))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),P})()},4874:(F,f,r)=>{r.d(f,{i:()=>s});var e=r(5879);let s=(()=>{var d;class _{transform(y){return y.trim().split("_").map(T=>T.trim()).join(" ")}}return(d=_).\u0275fac=function(y){return new(y||d)},d.\u0275pipe=e.Yjl({name:"removeHyphen",type:d,pure:!0,standalone:!0}),_})()},5264:(F,f,r)=>{r.r(f),r.d(f,{BillPaymentComponent:()=>Ce});var e=r(5879),s=r(6814),d=r(5176),_=r(8624),m=r(95),y=r(2735),v=r(4740);class T{}class C extends T{}var g=r(2868),P=r(4981),O=r(7177),c=r(6763),l=r(1449),u=r(7467),Z=r(3620),B=r(3997),J=r(6306),R=r(8504),L=r(1054),I=r(1085),q=r(4874),E=r(2187),M=r(2458),N=r(1392),Y=r(5861),S=r(995),Q=r(1693),G=r(3221),H=r(3519),U=r.n(H),w=r(2870),V=r(6593),b=r(6842),D=r(7236);function k(a,p){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"br"),e._uU(2),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e._uU(6),e._UZ(7,"br"),e._uU(8),e.ALo(9,"json"),e.qZA()),2&a){const n=e.oxw();e.xp6(2),e.hij("Dirty: ",n.paymentFormGroup.dirty," "),e.xp6(2),e.hij("Touched: ",n.paymentFormGroup.touched," "),e.xp6(2),e.hij("Valid: ",n.paymentFormGroup.valid," "),e.xp6(2),e.hij("Value: ",e.lcZ(9,4,n.paymentFormGroup.value)," ")}}function K(a,p){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function j(a,p){1&a&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}function $(a,p){if(1&a&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&a){const n=p.$implicit;e.Q6J("value",n.dataValue),e.xp6(1),e.hij(" ",n.dataLabel," ")}}function z(a,p){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function X(a,p){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function W(a,p){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function ee(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"div",24)(1,"button",29),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.updatePayment())}),e._uU(2),e.ALo(3,"removeHyphen"),e.ALo(4,"titlecase"),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(2),e.hij(" Update ",e.lcZ(3,1,e.lcZ(4,3,n.selectedOccupant.paymentType))," ")}}function te(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"div",24)(1,"button",30),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.savePayment())}),e._uU(2),e.ALo(3,"removeHyphen"),e.ALo(4,"titlecase"),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(2),e.hij(" Pay ",e.lcZ(3,1,e.lcZ(4,3,n.selectedOccupant.paymentType))," ")}}const A=function(a){return{"is-invalid":a}};let ne=(()=>{var a;class p{constructor(o,t,i,h,x,Ne,Ue,be){this.billPaymentService=o,this.settingsService=t,this.title=i,this.addPaymentBsModalRef=h,this.fb=x,this.accountService=Ne,this.alertService=Ue,this.logger=be,this.submitted=!1,this.accountService.currentUser.subscribe(qe=>this.currentUser=qe)}ngOnInit(){this.createNewForm(),this.isAddMode?(this.propertyChargeHeaderMsg=`Payment for ${this.selectedOccupant.propertyName} (${this.selectedOccupant.propertyId})`,this.title.setTitle(this.propertyChargeHeaderMsg),this.paymentFormGroup.get("propertyId").setValue(this.selectedOccupant.propertyId),this.paymentFormGroup.get("occupantId").setValue(this.selectedOccupant.occupantId),this.paymentForm.payerName.setValue(this.selectedOccupant.occupantName)):(this.propertyChargeHeaderMsg=`Edit payment for ${this.selectedOccupant.propertyName}`,this.title.setTitle(this.propertyChargeHeaderMsg),this.paymentFormGroup.patchValue(this.selectedOccupant)),this.paymentFormGroup.get("payerName").disable(),this.paymentForm.paymentType.setValue(this.selectedOccupant.paymentType),this.addPaymentBsModalRef.setClass("gray modal-md modal-dialog-top"),this.listOfModeOfPayments=this.settingsService.getModeOfPayments()}createNewForm(){this.paymentFormGroup=this.fb.group({dateOfTransaction:["",[m.kI.required]],modeOfPayment:["",[m.kI.required]],modeOfPaymentNo:["",{updateOn:"blur",validators:[m.kI.required]}],receiptNumber:["",{updateOn:"blur",validators:[m.kI.required]}],amountInvolved:["",{updateOn:"blur",validators:[m.kI.required]}],propertyId:[""],payerName:[""],recordId:[""],occupantId:[""],paymentType:[""],saveAndNew:[!1]})}get paymentForm(){return this.paymentFormGroup.controls}modeOfPaymentListeners(){this.paymentForm.modeOfPaymentNo.setValue(""),"CASH"===this.paymentForm.modeOfPayment.value&&this.paymentFormGroup.get("modeOfPaymentNo").setValue(this.paymentForm.receiptNumber.value)}savePayment(){this.submitted=!0,!this.paymentFormGroup.invalid&&U().fire({title:"Confirmation",text:`Do you want to pay ${this.selectedOccupant.paymentType.toLowerCase()} for property  ${this.selectedOccupant.propertyName}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, pay",cancelButtonText:"No, cancel"}).then(o=>{o.value?(this.alertService.clear(),this.billPaymentService.payBill(this.currentUser,this.paymentFormGroup.value).subscribe({next:t=>{"000"===t.headerResponse.responseCode?(this.alertService.showSuccessMsg(t.headerResponse.responseMessage),this.paymentForm.saveAndNew.value||this.addPaymentBsModalRef.hide(),this.paymentFormGroup.reset(),this.submitted=!1,this.logAction(`saved  ${this.selectedOccupant.paymentType} payment of ${this.paymentForm.amountInvolved.value} for  ${this.selectedOccupant.propertyName}`,S.h.SETTINGS)):this.alertService.showErrorMsg(t.headerResponse.responseMessage)},error:t=>{this.alertService.showInfoMsg(t)}})):U()})}updatePayment(){if(this.submitted=!0,this.paymentFormGroup.invalid)return;let o=this.paymentForm.modeOfPayment.value;U().fire({position:"top",title:"Confirmation",text:`Do you want to update payment for ${this.selectedOccupant.propertyName}?`,icon:"question",showCancelButton:!0,cancelButtonText:"No, cancel",confirmButtonText:"Yes, update"}).then(t=>{t.value?(this.alertService.clear(),this.billPaymentService.updatePayBill(this.currentUser,this.paymentFormGroup.value).subscribe({next:i=>{this.logger.info("updatePayBill response:"+JSON.stringify(i)),"000"===i.headerResponse.responseCode?(this.alertService.showSuccessMsg(i.headerResponse.responseMessage),this.addPaymentBsModalRef.hide(),this.logAction(`Updated ${o}`,S.h.SETTINGS),this.accountService.reloadCurrentRoute()):this.alertService.showErrorMsg(i.headerResponse.responseMessage)},error:i=>{this.alertService.showInfoMsg(i.message)}})):U()})}logAction(o,t){var i=this;return(0,Y.Z)(function*(){yield i.accountService.logUserAudit(o,t)})()}}return(a=p).\u0275fac=function(o){return new(o||a)(e.Y36(w.d),e.Y36(l.g),e.Y36(V.Dx),e.Y36(b.UZ),e.Y36(m.qu),e.Y36(O.e),e.Y36(P.c),e.Y36(D.Kf))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:61,vars:41,consts:[["novalidate","",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["class","p-10",4,"ngIf"],[1,"row","gy-3","mt-3"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["type","text","formControlName","payerName","id","payerName","autocomplete","off",1,"form-control"],["type","number","formControlName","receiptNumber","id","receiptNumber","autocomplete","off",1,"form-control",2,"min-height","40px",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"],["styleClass","w-100","formControlName","dateOfTransaction","id","dateOfTransaction","dateFormat","dd-mm-yy",3,"showIcon","ngClass"],[1,"form-control-select"],["id","regionId","formControlName","modeOfPayment",1,"form-control",3,"ngClass","change"],["value","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","modeOfPaymentNo","id","modeOfPaymentNo","autocomplete","off",1,"form-control",3,"ngClass"],["type","number","formControlName","amountInvolved","id","amountInvolved","autocomplete","off",1,"form-control",2,"min-height","40px",3,"ngClass"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],["data-bs-dismiss","modal",1,"btn","btn-outline-light","btn-sm",3,"click"],["class","col-auto",4,"ngIf"],[1,"p-10"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm","text-capitalize",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h6",2),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return null==t.addPaymentBsModalRef?null:t.addPaymentBsModalRef.hide()}),e.TgZ(6,"span",4),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",5),e.YNc(9,k,10,6,"div",6),e._UZ(10,"app-required-fields-notice"),e.TgZ(11,"div",7)(12,"div",8)(13,"div",9),e._UZ(14,"app-form-label",10),e.TgZ(15,"div",11),e._UZ(16,"input",12),e.qZA()()(),e.TgZ(17,"div",8)(18,"div",9),e._UZ(19,"app-form-label",10),e.TgZ(20,"div",11),e._UZ(21,"input",13),e.TgZ(22,"span",14),e.YNc(23,K,2,0,"div",15),e.qZA()()()(),e.TgZ(24,"div",8)(25,"div",9),e._UZ(26,"app-form-label",10)(27,"p-calendar",16),e.TgZ(28,"span",14),e.YNc(29,j,2,0,"span",15),e.qZA()()(),e.TgZ(30,"div",8)(31,"div",9),e._UZ(32,"app-form-label",10),e.TgZ(33,"div",11)(34,"div",17)(35,"select",18),e.NdJ("change",function(){return t.modeOfPaymentListeners()}),e.TgZ(36,"option",19),e._uU(37,"Select One"),e.qZA(),e.YNc(38,$,2,2,"option",20),e.qZA(),e.TgZ(39,"span",14),e.YNc(40,z,2,0,"div",15),e.qZA()()()()(),e.TgZ(41,"div",8)(42,"div",9),e._UZ(43,"app-form-label",10),e.TgZ(44,"div",11),e._UZ(45,"input",21),e.TgZ(46,"span",14),e.YNc(47,X,2,0,"div",15),e.qZA()()()(),e.TgZ(48,"div",8)(49,"div",9),e._UZ(50,"app-form-label",10),e.TgZ(51,"div",11),e._UZ(52,"input",22),e.TgZ(53,"span",14),e.YNc(54,W,2,0,"div",15),e.qZA()()()()()(),e.TgZ(55,"div",23)(56,"div",24)(57,"button",25),e.NdJ("click",function(){return null==t.addPaymentBsModalRef?null:t.addPaymentBsModalRef.hide()}),e._uU(58," Close "),e.qZA()(),e.YNc(59,ee,5,5,"div",26),e.YNc(60,te,5,5,"div",26),e.qZA()()),2&o&&(e.Q6J("formGroup",t.paymentFormGroup),e.xp6(3),e.Oqu(e.lcZ(4,29,t.propertyChargeHeaderMsg)),e.xp6(6),e.Q6J("ngIf",!1),e.xp6(5),e.Q6J("labelForName","payerName")("labelName","Payer"),e.xp6(5),e.Q6J("labelForName","receiptNumber")("labelName","Receipt No."),e.xp6(2),e.Q6J("ngClass",e.VKq(31,A,((null==t.paymentForm.receiptNumber?null:t.paymentForm.receiptNumber.touched)||(null==t.paymentForm.receiptNumber?null:t.paymentForm.receiptNumber.dirty)||t.submitted)&&(null==t.paymentForm.receiptNumber?null:t.paymentForm.receiptNumber.errors))),e.xp6(2),e.Q6J("ngIf",null==t.paymentForm.receiptNumber||null==t.paymentForm.receiptNumber.errors?null:t.paymentForm.receiptNumber.errors.required),e.xp6(3),e.Q6J("labelForName","dateOfTransaction")("labelName","Date of Payment"),e.xp6(1),e.Q6J("showIcon",!0)("ngClass",e.VKq(33,A,((null==t.paymentForm.dateOfTransaction?null:t.paymentForm.dateOfTransaction.touched)||(null==t.paymentForm.dateOfTransaction?null:t.paymentForm.dateOfTransaction.dirty)||t.submitted)&&(null==t.paymentForm.dateOfTransaction?null:t.paymentForm.dateOfTransaction.errors))),e.xp6(2),e.Q6J("ngIf",null==t.paymentForm.dateOfTransaction||null==t.paymentForm.dateOfTransaction.errors?null:t.paymentForm.dateOfTransaction.errors.required),e.xp6(3),e.Q6J("labelForName","modeOfPayment")("labelName","Mode Of Payment"),e.xp6(3),e.Q6J("ngClass",e.VKq(35,A,((null==t.paymentForm.modeOfPayment?null:t.paymentForm.modeOfPayment.touched)||(null==t.paymentForm.modeOfPayment?null:t.paymentForm.modeOfPayment.dirty)||t.submitted)&&(null==t.paymentForm.modeOfPayment?null:t.paymentForm.modeOfPayment.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfModeOfPayments),e.xp6(2),e.Q6J("ngIf",null==t.paymentForm.modeOfPayment||null==t.paymentForm.modeOfPayment.errors?null:t.paymentForm.modeOfPayment.errors.required),e.xp6(3),e.Q6J("labelForName","modeOfPaymentNo")("labelName","Mode Of Payment No."),e.xp6(2),e.Q6J("ngClass",e.VKq(37,A,((null==t.paymentForm.modeOfPaymentNo?null:t.paymentForm.modeOfPaymentNo.touched)||(null==t.paymentForm.modeOfPaymentNo?null:t.paymentForm.modeOfPaymentNo.dirty)||t.submitted)&&(null==t.paymentForm.modeOfPaymentNo?null:t.paymentForm.modeOfPaymentNo.errors))),e.xp6(2),e.Q6J("ngIf",null==t.paymentForm.modeOfPaymentNo||null==t.paymentForm.modeOfPaymentNo.errors?null:t.paymentForm.modeOfPaymentNo.errors.required),e.xp6(3),e.Q6J("labelForName","amountInvolved")("labelName","Amount"),e.xp6(2),e.Q6J("ngClass",e.VKq(39,A,((null==t.paymentForm.amountInvolved?null:t.paymentForm.amountInvolved.touched)||(null==t.paymentForm.amountInvolved?null:t.paymentForm.amountInvolved.dirty)||t.submitted)&&(null==t.paymentForm.amountInvolved?null:t.paymentForm.amountInvolved.errors))),e.xp6(2),e.Q6J("ngIf",null==t.paymentForm.amountInvolved||null==t.paymentForm.amountInvolved.errors?null:t.paymentForm.amountInvolved.errors.required),e.xp6(5),e.Q6J("ngIf",!t.isAddMode),e.xp6(1),e.Q6J("ngIf",t.isAddMode))},dependencies:[s.ez,s.mk,s.sg,s.O5,s.Ts,s.rS,m.u5,m._Y,m.YN,m.Kr,m.Fj,m.wV,m.EJ,m.JJ,m.JL,m.UX,m.sg,m.u,G.z,y.h,Q.M,v.A0,N._8,N.f,q.i],encapsulation:2}),p})();var ae=r(5148);let oe=(()=>{var a;class p{constructor(o,t){this.paymentDetailsBsModalRef=o,this.accountService=t,this.accountService.currentUser.subscribe(i=>this.currentUser=i)}ngOnInit(){this.paymentDetailsBsModalRef.setClass("gray modal-md modal-dialog-top")}}return(a=p).\u0275fac=function(o){return new(o||a)(e.Y36(b.UZ),e.Y36(O.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:117,vars:34,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"card","card-no-border"],[1,"pricing-body"],[1,"pricing-features"],[1,"preview-title-lg","overline-title"],[1,"w-50"],[1,"ms-auto","fw-bolder"],[1,"preview-title-lg","overline-title","mt-3"],[1,"fw-lighter"],[1,"d-block"],[1,"text-primary"],[1,"row","my-3","mx-2","mb-3","justify-content-end"],[1,"col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return null==t.paymentDetailsBsModalRef?null:t.paymentDetailsBsModalRef.hide()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"ul",7)(10,"span",8),e._uU(11,"Occupant Details"),e.qZA(),e.TgZ(12,"li")(13,"span",9),e._uU(14,"Occupant"),e.qZA(),e._uU(15," - "),e.TgZ(16,"span",10),e._uU(17),e.qZA()(),e.TgZ(18,"li")(19,"span",9),e._uU(20,"Occupant Type"),e.qZA(),e._uU(21," - "),e.TgZ(22,"span",10),e._uU(23),e.qZA()(),e.TgZ(24,"li")(25,"span",9),e._uU(26,"Mobile No."),e.qZA(),e._uU(27," - "),e.TgZ(28,"span",10),e._uU(29),e.qZA()(),e.TgZ(30,"li")(31,"span",9),e._uU(32,"Email Address"),e.qZA(),e._uU(33," - "),e.TgZ(34,"span",10),e._uU(35),e.qZA()(),e.TgZ(36,"li")(37,"span",9),e._uU(38,"Occupation Type"),e.qZA(),e._uU(39," - "),e.TgZ(40,"span",10),e._uU(41),e.qZA()(),e.TgZ(42,"span",11),e._uU(43,"Property Details"),e.qZA(),e.TgZ(44,"li")(45,"span",9),e._uU(46,"Property Id"),e.qZA(),e._uU(47," - "),e.TgZ(48,"span",10),e._uU(49),e.qZA()(),e.TgZ(50,"li")(51,"span",9),e._uU(52,"Property Name"),e.qZA(),e._uU(53," - "),e.TgZ(54,"span",10),e._uU(55),e.qZA()(),e.TgZ(56,"li")(57,"span",9),e._uU(58,"Property No."),e.qZA(),e._uU(59," - "),e.TgZ(60,"span",10),e._uU(61),e.qZA()(),e.TgZ(62,"li")(63,"span",9),e._uU(64,"Property Usage"),e.qZA(),e._uU(65," - "),e.TgZ(66,"span",10),e._uU(67),e.ALo(68,"titlecase"),e.ALo(69,"removeHyphen"),e.qZA()(),e.TgZ(70,"li")(71,"span",9),e._uU(72,"Property Category"),e.qZA(),e._uU(73," - "),e.TgZ(74,"span",10),e._uU(75),e.ALo(76,"titlecase"),e.qZA()(),e.TgZ(77,"span",11),e._uU(78,"Payment Details"),e.qZA(),e.TgZ(79,"li")(80,"span",9),e._uU(81,"Amount Paid"),e.qZA(),e._uU(82," - "),e.TgZ(83,"span",10),e._uU(84),e.ALo(85,"number"),e.qZA()(),e.TgZ(86,"li")(87,"span",9),e._uU(88,"Payment Type"),e.qZA(),e._uU(89," - "),e.TgZ(90,"span",10),e._uU(91),e.ALo(92,"titlecase"),e.ALo(93,"removeHyphen"),e.qZA()(),e.TgZ(94,"li")(95,"span",9),e._uU(96,"Payment Date"),e.qZA(),e._uU(97," - "),e.TgZ(98,"span",10)(99,"div",12)(100,"small",13),e._uU(101),e.ALo(102,"date"),e.qZA(),e.TgZ(103,"small",14),e._uU(104),e.ALo(105,"timeAgo"),e.qZA()()()(),e.TgZ(106,"li")(107,"span",9),e._uU(108,"Recorded By"),e.qZA(),e._uU(109," - "),e.TgZ(110,"span",10),e._uU(111),e.qZA()()()()()(),e.TgZ(112,"div",15)(113,"div",16)(114,"a",17),e.NdJ("click",function(){return null==t.paymentDetailsBsModalRef?null:t.paymentDetailsBsModalRef.hide()}),e.TgZ(115,"span"),e._uU(116,"Close"),e.qZA()()()()),2&o&&(e.xp6(2),e.hij("",t.propertyLedger.occupantName," Details"),e.xp6(15),e.Oqu(t.propertyLedger.occupantName),e.xp6(6),e.Oqu(t.propertyLedger.institutionalDisplayName),e.xp6(6),e.Oqu(t.selectedOccupant.mobileNo),e.xp6(6),e.Oqu(t.selectedOccupant.emailAddress),e.xp6(6),e.Oqu(t.selectedOccupant.occupationType),e.xp6(8),e.Oqu(t.selectedOccupant.propertyId),e.xp6(6),e.Oqu(t.selectedOccupant.propertyName),e.xp6(6),e.Oqu(t.selectedOccupant.propertyNo),e.xp6(6),e.Oqu(e.lcZ(68,16,e.lcZ(69,18,null==t.propertyLedger?null:t.propertyLedger.propertyUsage))),e.xp6(8),e.Oqu(e.lcZ(76,20,null==t.selectedOccupant?null:t.selectedOccupant.propertyCategory)),e.xp6(9),e.Oqu(e.xi3(85,22,t.propertyLedger.amountInvolved,"1.2-2")),e.xp6(7),e.hij(" ",e.lcZ(92,25,e.lcZ(93,27,t.propertyLedger.paymentType))," "),e.xp6(10),e.Oqu(e.xi3(102,29,t.propertyLedger.dateOfRecordEntry,"medium")),e.xp6(3),e.hij(" ",e.lcZ(105,32,t.propertyLedger.dateOfRecordEntry.toString()),""),e.xp6(7),e.Oqu(t.propertyLedger.createdBy))},dependencies:[s.ez,s.JJ,s.rS,s.uU,I.e,q.i],encapsulation:2}),p})();var re=r(8352),ie=r(9972);function le(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.openPaymentComponent(null,!0))}),e._UZ(1,"em",15),e.TgZ(2,"span"),e._uU(3,"New payment"),e.qZA()()}}function se(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"li")(1,"div",18),e.NdJ("click",function(){const i=e.CHM(n).$implicit,h=e.oxw(2);return e.KtG(h.selectOccupant(i))}),e._UZ(2,"input",19),e.TgZ(3,"label",20)(4,"span",21)(5,"span"),e.ALo(6,"avatarBg"),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"avatarName"),e.qZA()(),e.TgZ(10,"span",22)(11,"span",23),e._uU(12),e.qZA(),e.TgZ(13,"span",24),e._uU(14),e.qZA(),e.TgZ(15,"span",24),e._uU(16),e.qZA(),e.TgZ(17,"span",24),e._uU(18),e.qZA()()()()()()}if(2&a){const n=p.$implicit;e.xp6(2),e.s9C("id",n.recordId),e.xp6(1),e.s9C("for",n.recordId),e.xp6(2),e.Gre("user-avatar ",e.lcZ(6,11,""),""),e.xp6(3),e.Oqu(e.lcZ(9,13,n.occupantName)),e.xp6(4),e.Oqu(n.occupantName),e.xp6(2),e.Oqu(n.mobileNo),e.xp6(2),e.AsE("",n.propertyName," (",n.propertyId,") "),e.xp6(2),e.Oqu(n.occupationType)}}function ce(a,p){if(1&a&&(e.ynx(0),e.TgZ(1,"ul",16),e.YNc(2,se,19,15,"li",17),e.qZA(),e.BQk()),2&a){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.listOfOccupantProperties)}}function pe(a,p){1&a&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"img",26),e.TgZ(3,"h6",27),e._uU(4,"No records found"),e.qZA()(),e.BQk())}function me(a,p){if(1&a&&(e.ynx(0),e.TgZ(1,"div")(2,"span",28),e._uU(3,"Occupant Information"),e.qZA(),e.TgZ(4,"dl",3)(5,"dd",29),e._uU(6,"Occupant"),e.qZA(),e.TgZ(7,"dt",29),e._uU(8),e.qZA(),e.TgZ(9,"dd",29),e._uU(10,"Occupant Type"),e.qZA(),e.TgZ(11,"dt",29),e._uU(12),e.qZA(),e.TgZ(13,"dd",29),e._uU(14,"Mobile No."),e.qZA(),e.TgZ(15,"dt",29),e._uU(16),e.qZA(),e.TgZ(17,"dd",29),e._uU(18,"Email Address"),e.qZA(),e.TgZ(19,"dt",29),e._uU(20),e.qZA(),e.TgZ(21,"dd",29),e._uU(22,"Occupation Type"),e.qZA(),e.TgZ(23,"dt",29),e._uU(24),e.ALo(25,"titlecase"),e.qZA()(),e.TgZ(26,"span",28),e._uU(27,"Property Information"),e.qZA(),e.TgZ(28,"dl",3)(29,"dd",29),e._uU(30,"Property Id"),e.qZA(),e.TgZ(31,"dt",29),e._uU(32),e.qZA(),e.TgZ(33,"dd",29),e._uU(34,"Property Name"),e.qZA(),e.TgZ(35,"dt",29),e._uU(36),e.qZA(),e.TgZ(37,"dd",29),e._uU(38,"Property No."),e.qZA(),e.TgZ(39,"dt",29),e._uU(40),e.qZA(),e.TgZ(41,"dd",29),e._uU(42,"Property Usage"),e.qZA(),e.TgZ(43,"dt",29),e._uU(44),e.ALo(45,"titlecase"),e.ALo(46,"removeHyphen"),e.qZA(),e.TgZ(47,"dd",29),e._uU(48,"Occupant Category"),e.qZA(),e.TgZ(49,"dt",29),e._uU(50),e.ALo(51,"titlecase"),e.qZA()(),e.TgZ(52,"dl",3)(53,"dd",29),e._uU(54,"Balance As @ Today:"),e.qZA(),e.TgZ(55,"dt",30),e._uU(56),e.ALo(57,"number"),e.qZA()()(),e.BQk()),2&a){const n=e.oxw();e.xp6(8),e.Oqu(null==n.selectedOccupant?null:n.selectedOccupant.occupantName),e.xp6(4),e.hij(" ",1==(null==n.selectedOccupant?null:n.selectedOccupant.institutional)?"Institution":"Individual"," "),e.xp6(4),e.hij(" ",null==n.selectedOccupant?null:n.selectedOccupant.mobileNo," "),e.xp6(4),e.Oqu(null==n.selectedOccupant?null:n.selectedOccupant.emailAddress),e.xp6(4),e.Oqu(e.lcZ(25,11,null==n.selectedOccupant?null:n.selectedOccupant.occupationType)),e.xp6(8),e.Oqu(null==n.selectedOccupant?null:n.selectedOccupant.propertyId),e.xp6(4),e.Oqu(null==n.selectedOccupant?null:n.selectedOccupant.propertyName),e.xp6(4),e.hij(" ",null==n.selectedOccupant?null:n.selectedOccupant.propertyNo," "),e.xp6(4),e.Oqu(e.lcZ(45,13,e.lcZ(46,15,null==n.selectedOccupant?null:n.selectedOccupant.propertyUsage))),e.xp6(6),e.Oqu(e.lcZ(51,17,null==n.selectedOccupant?null:n.selectedOccupant.propertyCategory)),e.xp6(6),e.Oqu(e.xi3(57,19,n.currentBal,"1.2-2"))}}function ue(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"div",42)(1,"div",9)(2,"label",55),e._uU(3),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",56),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw(2);return e.KtG(i.searchValue=t)}),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Oqu(n.searchParameterLabel),e.xp6(2),e.MGl("placeholder","Enter ",n.searchParameterLabel,""),e.Q6J("ngModel",n.searchValue)}}function de(a,p){if(1&a){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",42)(2,"div",9)(3,"div",34)(4,"label",57),e._uU(5,"Start Date"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"p-calendar",58),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw(2);return e.KtG(i.startDate=t)}),e.qZA()()()(),e.TgZ(8,"div",42)(9,"label",59),e._uU(10,"End Date"),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"p-calendar",60),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw(2);return e.KtG(i.endDate=t)}),e.qZA()(),e.BQk()}if(2&a){const n=e.oxw(2);e.xp6(7),e.Q6J("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModel",n.startDate),e.xp6(5),e.Q6J("showIcon",!0)("ngModel",n.endDate)}}function ge(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"div",42)(1,"div",65)(2,"a",66),e._UZ(3,"em",67),e.qZA(),e.TgZ(4,"div",68)(5,"ul",69)(6,"li")(7,"a",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.export())}),e._UZ(8,"em",71),e.TgZ(9,"span"),e._uU(10,"Export to Excel"),e.qZA()()(),e.TgZ(11,"li")(12,"a",72),e._UZ(13,"em",73),e.TgZ(14,"span"),e._uU(15,"Export to PDF"),e.qZA()()()()()()()}}function ye(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"div",61)(1,"div",42)(2,"div",9)(3,"div",10),e._UZ(4,"em",62),e.qZA(),e.TgZ(5,"input",63),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw(2);return e.KtG(i.searchedKeyword=t)}),e.qZA()()(),e.YNc(6,ge,16,0,"div",64),e.qZA()}if(2&a){const n=e.oxw(2);e.xp6(5),e.Q6J("ngModel",n.searchedKeyword),e.xp6(1),e.Q6J("ngIf",(null==n.listOfPropertyLedgers?null:n.listOfPropertyLedgers.length)>0)}}function he(a,p){1&a&&(e.TgZ(0,"tr")(1,"th",74),e._uU(2,"Amount(GHS)"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Payment Mode"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Debit/Credit"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Receipt"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Payment Date"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Actions"),e.qZA()())}function fe(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"li",85)(1,"a",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.openPaymentComponent(t,!1))}),e._UZ(2,"em",86),e.TgZ(3,"span"),e._uU(4,"Edit payment"),e.qZA()()()}}function _e(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.openPaymentDetailsComponent(t,i.selectedOccupant))}),e._UZ(1,"em",87),e.TgZ(2,"span"),e._uU(3,"View payment details"),e.qZA()()}}function Ze(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.openPaymentComponent(t,!1))}),e._UZ(1,"em",88),e.TgZ(2,"span"),e._uU(3,"Send demand notice"),e.qZA()()}}function ve(a,p){if(1&a){const n=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.openPaymentComponent(t,!1))}),e._UZ(1,"em",89),e.TgZ(2,"span"),e._uU(3,"Print demand notice"),e.qZA()()}}function Te(a,p){if(1&a&&(e.TgZ(0,"tr")(1,"td",75),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"app-full-name",76),e.ALo(6,"removeHyphen"),e.ALo(7,"titlecase"),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"app-full-name",76),e.ALo(10,"removeHyphen"),e.ALo(11,"titlecase"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"lowercase"),e.TgZ(17,"div",77)(18,"small",78),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"small"),e._uU(22),e.ALo(23,"timeAgo"),e.qZA()()(),e.TgZ(24,"td")(25,"div",79)(26,"a",80),e._UZ(27,"em",81),e.qZA(),e.TgZ(28,"div",82)(29,"ul",69),e.YNc(30,fe,5,0,"li",83),e.TgZ(31,"li"),e.YNc(32,_e,4,0,"a",84),e.qZA(),e.TgZ(33,"li",85),e.YNc(34,Ze,4,0,"a",84),e.qZA(),e.TgZ(35,"li",85),e.YNc(36,ve,4,0,"a",84),e.qZA()()()()()()),2&a){const n=p.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,15,n.amountInvolved,".2-2")),e.xp6(3),e.s9C("fullName",e.lcZ(6,18,e.lcZ(7,20,null==n?null:n.mediumOfPayment))),e.s9C("otherFieldName",null==n?null:n.mediumOfPaymentNumber),e.Q6J("showAvatar",!1),e.xp6(4),e.s9C("fullName",e.lcZ(10,22,e.lcZ(11,24,null==n?null:n.debitCreditEntry))),e.s9C("otherFieldName",null==n?null:n.ledgerYear),e.Q6J("showAvatar",!1),e.xp6(4),e.Oqu(n.receiptNumberIssued),e.xp6(2),e.hij(" ",e.lcZ(16,26,n.paymentDate)," "),e.xp6(4),e.Oqu(e.xi3(20,28,n.createdDate,"medium")),e.xp6(3),e.hij(" ",e.lcZ(23,31,n.createdDate),""),e.xp6(8),e.Q6J("ngIf",n.ledgerYear===o.currentYear&&"CREDIT"===n.debitCreditEntry),e.xp6(2),e.Q6J("ngIf","CREDIT"===n.debitCreditEntry),e.xp6(2),e.Q6J("ngIf","DEBIT"===n.debitCreditEntry),e.xp6(2),e.Q6J("ngIf","DEBIT"===n.debitCreditEntry)}}const Pe=function(){return[5,10,25,50]};function Oe(a,p){if(1&a){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34)(5,"label",35),e._uU(6,"Search By"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"div",9)(9,"div",36)(10,"select",37),e.NdJ("ngModelChange",function(t){e.CHM(n);const i=e.oxw();return e.KtG(i.searchParameter=t)})("change",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.searchParameterListener())}),e.TgZ(11,"option",38),e._uU(12,"Receipt No."),e.qZA(),e.TgZ(13,"option",39),e._uU(14,"Mode of Payment No."),e.qZA(),e.TgZ(15,"option",40),e._uU(16,"Date Range"),e.qZA()()()()()(),e.YNc(17,ue,6,3,"div",41),e.YNc(18,de,13,6,"ng-container",13),e.TgZ(19,"div",42)(20,"button",43),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.searchOccupantPayments())}),e._uU(21," Search "),e.qZA()(),e.TgZ(22,"div",42)(23,"button",44),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.cancelButton())}),e._uU(24," Cancel "),e.qZA()()(),e.YNc(25,ye,7,2,"div",45),e.TgZ(26,"p-table",46,47),e.ALo(28,"filter"),e.YNc(29,he,13,0,"ng-template",48),e.YNc(30,Te,37,33,"ng-template",49),e.qZA(),e.TgZ(31,"div",50),e._UZ(32,"div",51),e.TgZ(33,"div",51)(34,"div",52)(35,"div",53),e._uU(36," Currency:"),e.TgZ(37,"span",54),e._uU(38," GHS"),e.qZA()(),e.TgZ(39,"div",53),e._uU(40," Total Credit: "),e.TgZ(41,"span",54),e._uU(42),e.ALo(43,"number"),e.qZA()(),e.TgZ(44,"div",53),e._uU(45," Total Debit: "),e.TgZ(46,"span",54),e._uU(47),e.ALo(48,"number"),e.qZA()(),e.TgZ(49,"div",53),e._uU(50," Outstanding Bal: "),e.TgZ(51,"span",54),e._uU(52),e.ALo(53,"number"),e.qZA()()()()()(),e.BQk()}if(2&a){const n=e.oxw();e.xp6(10),e.Q6J("ngModel",n.searchParameter),e.xp6(7),e.Q6J("ngIf","DR"!==n.searchParameter),e.xp6(1),e.Q6J("ngIf","DR"==n.searchParameter),e.xp6(7),e.Q6J("ngIf",(null==n.listOfPropertyLedgers?null:n.listOfPropertyLedgers.length)>0),e.xp6(1),e.Q6J("value",e.xi3(28,14,n.listOfPropertyLedgers,n.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(26,Pe))("resizableColumns",!0)("autoLayout",!0),e.xp6(16),e.hij(" ",e.xi3(43,17,n.totalCredit,"1.2-2"),""),e.xp6(5),e.hij(" ",e.xi3(48,20,n.totalDebit,"1.2-2"),""),e.xp6(5),e.hij(" ",e.xi3(53,23,n.balance,"1.2-2"),"")}}const Ae=function(a,p){return{"ni-search":a,"ni-loader spinner text-gray fw-bold":p}};let Ce=(()=>{var a;class p{constructor(o,t,i,h){this.billPaymentService=o,this.paymentService=t,this.paymentDetailsService=i,this.logger=h,this.excelExporterService=(0,e.f3M)(re.h),this.settingsService=(0,e.f3M)(l.g),this.accountService=(0,e.f3M)(O.e),this.alertService=(0,e.f3M)(P.c),this.utilsService=(0,e.f3M)(u.F),this.occupantsService=(0,e.f3M)(c.k),this.accountService.currentUser.subscribe(x=>this.currentUser=x)}ngOnDestroy(){this.paymentService.hide()}ngOnInit(){this.showOccupantDetails=!1,this.isSearching=!1,this.startDate=this.utilsService.getFirstDayDate(),this.endDate=new Date,this.searchParameter="DR",this.searchParameterListener(),this.listOfOccupantProperties=[],this.showNoRecordsFound=!1,this.currentYear=(new Date).getFullYear()}trackByFn(o){return o.occupantName}searchOccupants(){this.showSpinner=!0,this.selectedOccupant=new C,this.showOccupantDetails=!1,this.showNoRecordsFound=!1,(""!==this.searchTerm||this.searchTerm.length>3)&&(this.isSearching=!0,this.searchGetCall(this.searchTerm).pipe((0,Z.b)(400),(0,B.x)()).subscribe(o=>{this.isSearching=!1,this.response=o,this.listOfOccupantProperties=o.occupantProperties,o.occupantProperties.length<=0&&(this.showNoRecordsFound=!0)},o=>{this.isSearching=!1,console.error("error",o)})),this.showSpinner=!1}searchGetCall(o){return this.occupantsService.quickSearchOccupantProperties(this.currentUser,o,"ALL").pipe((0,J.K)(t=>(console.error("Error:",t),(0,R._)(t))))}selectOccupant(o){this.listOfOccupantProperties=[],this.searchTerm="",this.selectedOccupant=o,this.showOccupantDetails=!0,this.searchOccupantPayments()}searchParameterListener(){"receiptNumberIssued"!=this.searchParameter?"mediumOfPaymentNumber"!=this.searchParameter||(this.searchParameterLabel="Mode of Payment Number"):this.searchParameterLabel="Receipt Number"}cancelButton(){this.showOccupantDetails=!1,this.selectedOccupant=new C,this.listOfOccupantProperties=[],this.listOfPropertyLedgers=[]}openPaymentComponent(o,t){t&&(o=this.selectedOccupant);const i={initialState:{isAddMode:t,selectedOccupant:o}};this.paymentService.config.ignoreBackdropClick=!0,this.paymentService.config.animated=!0,this.addPaymentBsModalRef=this.paymentService.show(ne,i),this.addPaymentBsModalRef.content.closeBtnName="Close"}openPaymentDetailsComponent(o,t){const i={initialState:{propertyLedger:o,selectedOccupant:t}};this.paymentDetailsService.config.ignoreBackdropClick=!0,this.paymentDetailsService.config.animated=!0,this.paymentDetailsBsModalRef=this.paymentService.show(oe,i),this.paymentDetailsBsModalRef.content.closeBtnName="Close"}export(){this.excelExporterService.exportAsExcelFile(this.listOfPropertyLedgers,"occupantProperties")}searchOccupantPayments(){this.listOfPropertyLedgers=[],this.totalCredit=0,this.totalDebit=0,this.currentBal=0,this.balance=0;let o=new ae.i;o.endDate=this.endDate,o.startDate=this.startDate,o.occupantId=this.selectedOccupant.occupantId,o.propertyId=this.selectedOccupant.propertyId,o.searchBy=this.searchParameter,o.searchValue=this.searchValue,"DR"===this.searchParameter&&(o.searchValue="DR"),this.billPaymentService.fetchPropertyEntries(this.currentUser,o).subscribe({next:t=>{if(this.logger.info("getPropertyCharges response "+JSON.stringify(t)),"000"===t.headerResponse.responseCode){if(t.propertyLedgers.length<=0){let i="No ledgers found ";return this.alertService.showInfoMsgGeneral(i),void this.logger.info(i)}this.listOfPropertyLedgers=t.propertyLedgers,this.totalCredit=t.totalCredit,this.totalDebit=t.totalDebit,this.currentBal=t.currentBalance,this.balance=this.totalDebit-this.totalCredit}else this.alertService.error(t.headerResponse.responseMessage)},error:t=>{this.logger.error(t),this.alertService.showInfoMsg(t)}})}}return(a=p).\u0275fac=function(o){return new(o||a)(e.Y36(w.d),e.Y36(b.tT),e.Y36(b.tT),e.Y36(D.Kf))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:17,vars:14,consts:[[3,"pageTitleName","description"],[1,"newItemName"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-lg-4"],[1,"card","card-no-border"],[1,"card-title"],[1,"form-group","mb-3"],[3,"labelForName","labelName"],[1,"form-control-wrap"],[1,"form-icon","form-icon-right"],[1,"icon","ni",3,"ngClass"],["type","text","autocomplete","off","id","searchText","placeholder","Enter occupant name,mobile no,property name,id",1,"form-control",3,"ngModel","ngModelChange","input"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-plus"],[1,"custom-control-group","custom-control-vertical","custom-control-stacked","w-100"],[4,"ngFor","ngForOf"],[1,"custom-control","custom-control-sm","custom-radio","custom-control-pro",3,"click"],["type","radio","name","user-choose",1,"custom-control-input",3,"id"],[1,"custom-control-label",3,"for"],[1,"user-card"],[1,"user-info"],[1,"lead-text"],[1,"sub-text"],[1,"text-center"],["src","assets/images/icons/plan-s1.svg","alt","",1,"w-40","h-25"],[1,"text-muted"],[1,"preview-title-lg","overline-title"],[1,"col-sm-6"],[1,"col-sm-6","text-primary","fs-17px"],[1,"col-lg-8"],[1,"row","gy-2","gx-2","mb-4","align-items-center"],[1,"col-sm-2"],[1,"form-group"],["for","searchParameter",1,"form-label","pt-0"],[1,"form-control-select"],["id","searchParameter",1,"form-control",3,"ngModel","ngModelChange","change"],["value","receiptNumberIssued"],["value","mediumOfPaymentNumber"],["value","DR"],["class","col-auto",4,"ngIf"],[1,"col-auto"],["type","button","title","",1,"btn","btn-dim","btn-primary","mt-4","btn-sm",3,"click"],["type","button","title","",1,"btn","btn-dim","btn-light","mt-4","btn-sm",3,"click"],["class","row gy-2 gx-3 my-3",4,"ngIf"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[1,"row","mt-3","justify-content-end"],[1,"col-6"],[1,"row","gy-2"],[1,"col-sm-12","text-end"],[1,"ff-mono","fw-bolder"],["for","searchValue",1,"form-label","pt-0"],["type","text","autocomplete","off","id","searchValue",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","startDate",1,"form-label","pt-0"],["dateFormat","yy-mm-dd","styleClass","\u201dform-control\u201d","dateFormat","dd-mm-yy",3,"monthNavigator","yearNavigator","showIcon","ngModel","ngModelChange"],["for","endDate",1,"form-label","pt-0"],["styleClass","\u201dform-control\u201d","dateFormat","dd-mm-yy",3,"showIcon","ngModel","ngModelChange"],[1,"row","gy-2","gx-3","my-3"],[1,"icon","ni","ni-search"],["type","text","autocomplete","off","id","default-04","placeholder","Quick search",1,"form-control",3,"ngModel","ngModelChange"],["class","col-auto ",4,"ngIf"],["tooltip","Data export",1,"dropdown"],["href","#","data-bs-toggle","dropdown","aria-expanded","false","title","Export Data",1,"dropdown-toggle","btn","btn-icon","btn-light","btn-outline-light1"],[1,"icon","ni","ni-download"],[1,"dropdown-menu"],[1,"link-list-opt","no-bdr"],[3,"click"],[1,"icon","ni","ni-file-xls"],[2,"cursor","not-allowed"],[1,"icon","ni","ni-file-pdf","disabled"],[1,"text-end"],[1,"text-end","font-monospace"],[3,"showAvatar","fullName","otherFieldName"],[1,"fw-lighter"],[1,"d-block"],[1,"drodown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-icon","btn-light"],[1,"icon","ni","ni-more-h"],[1,"dropdown-menu","dropdown-menu-end"],["class","disabled",4,"ngIf"],[3,"click",4,"ngIf"],[1,"disabled"],[1,"icon","ni","ni-edit"],[1,"icon","ni","ni-eye"],[1,"icon","ni","ni-send"],[1,"icon","ni","ni-printer"]],template:function(o,t){1&o&&(e.TgZ(0,"app-add-item",0)(1,"span",1),e.YNc(2,le,4,0,"a",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"app-form-label",8),e.TgZ(9,"div",9)(10,"div",10),e._UZ(11,"em",11),e.qZA(),e.TgZ(12,"input",12),e.NdJ("ngModelChange",function(h){return t.searchTerm=h})("input",function(){return t.searchOccupants()}),e.qZA()()()(),e.YNc(13,ce,3,1,"ng-container",13),e.YNc(14,pe,5,0,"ng-container",13),e.YNc(15,me,58,22,"ng-container",13),e.qZA()(),e.YNc(16,Oe,54,27,"ng-container",13),e.qZA()),2&o&&(e.Q6J("pageTitleName","Property Bill Payments")("description","Payments of ground and house rents"),e.xp6(2),e.Q6J("ngIf",t.showOccupantDetails),e.xp6(6),e.Q6J("labelForName","searchText")("labelName","Search  occupant or property"),e.xp6(3),e.Q6J("ngClass",e.WLB(11,Ae,!t.showSpinner,t.showSpinner)),e.xp6(1),e.Q6J("ngModel",t.searchTerm),e.xp6(1),e.Q6J("ngIf",t.listOfOccupantProperties),e.xp6(1),e.Q6J("ngIf",t.showNoRecordsFound),e.xp6(1),e.Q6J("ngIf",t.showOccupantDetails),e.xp6(1),e.Q6J("ngIf",t.showOccupantDetails))},dependencies:[s.ez,s.mk,s.sg,s.O5,s.i8,s.JJ,s.rS,s.uU,d.L,_.$,m.u5,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On,y.h,M.U$,M.iA,ie.jx,v.A0,g.M,L.b,I.e,q.i,E.c,N._8,N.f],encapsulation:2}),p})()}}]);