"use strict";(self.webpackChunkadvantageweb=self.webpackChunkadvantageweb||[]).push([[3713],{2187:(G,C,d)=>{d.d(C,{c:()=>T});var o=d(6814),_=d(1054),h=d(2868),i=d(5879);function y(v,B){if(1&v&&(i.TgZ(0,"div"),i.ALo(1,"avatarBg"),i.TgZ(2,"span"),i._uU(3),i.ALo(4,"avatarName"),i.qZA()()),2&v){const N=i.oxw();i.Gre("user-avatar  d-none d-sm-flex ",i.lcZ(1,4,""),""),i.xp6(3),i.hij("",i.lcZ(4,6,N.fullName)," ")}}function f(v,B){if(1&v&&(i.TgZ(0,"span"),i._UZ(1,"br"),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&v){const N=i.oxw();i.xp6(3),i.Oqu(N.otherFieldName)}}let T=(()=>{var v;class B{constructor(){this.showAvatar=!0}ngOnInit(){}}return(v=B).\u0275fac=function(I){return new(I||v)},v.\u0275cmp=i.Xpm({type:v,selectors:[["app-full-name"]],inputs:{fullName:"fullName",otherFieldName:"otherFieldName",showAvatar:"showAvatar"},standalone:!0,features:[i.jDz],decls:7,vars:3,consts:[[1,"user-card"],[3,"class",4,"ngIf"],[1,"user-info"],[1,"text-black"],[1,"dot","dot-success","d-md-none","ms-1"],[4,"ngIf"]],template:function(I,F){1&I&&(i.TgZ(0,"div",0),i.YNc(1,y,5,8,"div",1),i.TgZ(2,"div",2)(3,"span",3),i._uU(4),i._UZ(5,"span",4),i.qZA(),i.YNc(6,f,4,1,"span",5),i.qZA()()),2&I&&(i.xp6(1),i.Q6J("ngIf",F.showAvatar),i.xp6(3),i.hij(" ",F.fullName," "),i.xp6(2),i.Q6J("ngIf",F.otherFieldName))},dependencies:[o.ez,o.O5,_.b,h.M],encapsulation:2}),B})()},1054:(G,C,d)=>{d.d(C,{b:()=>_});var o=d(5879);let _=(()=>{var h;class i{transform(f){const T=["bg-info-dim","bg-warning-dim","bg-primary-dim","bg-success-dim","bg-danger-dim","bg-purple-dim","bg-indigo-dim"];return T[Math.floor(Math.random()*T.length)]}}return(h=i).\u0275fac=function(f){return new(f||h)},h.\u0275pipe=o.Yjl({name:"avatarBg",type:h,pure:!0,standalone:!0}),i})()},2868:(G,C,d)=>{d.d(C,{M:()=>_});var o=d(5879);let _=(()=>{var h;class i{transform(f){if(!f)return"NF";const T=f.split(" ");let v=T[0],B=T[1];return B?(v.charAt(0)+""+B.charAt(0)).toUpperCase():v.slice(0,2).toUpperCase()}}return(h=i).\u0275fac=function(f){return new(f||h)},h.\u0275pipe=o.Yjl({name:"avatarName",type:h,pure:!0,standalone:!0}),i})()},4874:(G,C,d)=>{d.d(C,{i:()=>_});var o=d(5879);let _=(()=>{var h;class i{transform(f){return f.trim().split("_").map(v=>v.trim()).join(" ")}}return(h=i).\u0275fac=function(f){return new(f||h)},h.\u0275pipe=o.Yjl({name:"removeHyphen",type:h,pure:!0,standalone:!0}),i})()},1085:(G,C,d)=>{d.d(C,{e:()=>_});var o=d(5879);let _=(()=>{var h;class i{constructor(f,T){this.changeDetectorRef=f,this.ngZone=T,this.timer=null}transform(f){this.removeTimer();let T=new Date(f),B=Math.round(Math.abs(((new Date).getTime()-T.getTime())/1e3)),N=Number.isNaN(B)?1e3:1e3*this.getSecondsUntilUpdate(B);this.timer=this.ngZone.runOutsideAngular(()=>typeof window<"u"?window.setTimeout(()=>{this.ngZone.run(()=>this.changeDetectorRef.markForCheck())},N):null);let I=Math.round(Math.abs(B/60)),F=Math.round(Math.abs(I/60)),a=Math.round(Math.abs(F/24)),Z=Math.round(Math.abs(a/30.416)),l=Math.round(Math.abs(a/365));return Number.isNaN(B)?"":B<=45?"a few seconds ago":B<=90?"a minute ago":I<=45?I+" minutes ago":I<=90?"an hour ago":F<=22?F+" hours ago":F<=36?"a day ago":a<=25?a+" days ago":a<=45?"a month ago":a<=345?Z+" months ago":a<=545?"a year ago":l+" years ago"}ngOnDestroy(){this.removeTimer()}removeTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}getSecondsUntilUpdate(f){return f<60?2:f<3600?30:f<86400?300:3600}}return(h=i).\u0275fac=function(f){return new(f||h)(o.Y36(o.sBO,16),o.Y36(o.R0b,16))},h.\u0275pipe=o.Yjl({name:"timeAgo",type:h,pure:!1,standalone:!0}),i})()},3713:(G,C,d)=>{d.r(C),d.d(C,{GroundRentBillingComponent:()=>ye});var o=d(5861),_=d(6814),h=d(5176),i=d(95),y=d(4740),f=d(2458),T=d(995),v=d(2735),B=d(2187),N=d(8624),I=d(1085),F=d(3519),a=d.n(F),Z=d(4874),l=d(4647),p=d(1693),c=d(3221),e=d(5879),b=d(5178),A=d(553);class P{}var M=d(7467),D=d(9862),S=d(7236);let Y=(()=>{var n;class u{constructor(r,t,g){this.utilsService=r,this.http=t,this.logger=g}saveGroupRentBill(r,t){return t.createdBy=r.username,t.headerRequest=this.utilsService.getRequestHeader(r.zoneId,r.regionId,"SAVE_GROUND_RENT_BILL"),t.headerRequest.region=r.regionId,this.logger.info("saveGroupRentBill request "+JSON.stringify(t)),this.http.post(`${A.N.url+T.h.API_ESTATE_BILLING}applygroundrentbill`,t).pipe((0,b.V)(A.N.timeout))}getGroundRentBills(r,t,g){const m=new P;return m.blockId=t,m.chargeYear=g,m.headerRequest=this.utilsService.getRequestHeader(r.zoneId,r.regionId,"GROUND_RENT_BILL_LIST"),this.logger.info("getGroundRentBills list request "+JSON.stringify(m)),this.http.post(`${A.N.url+T.h.API_ESTATE_BILLING}groundrentbills`,m).pipe((0,b.V)(A.N.timeout))}}return(n=u).\u0275fac=function(r){return new(r||n)(e.LFG(M.F),e.LFG(D.eN),e.LFG(S.Kf))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),u})();var J=d(1449),w=d(6842),E=d(7177),Q=d(4981);function L(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"em",43),e._uU(2," Estate Billing"),e.qZA())}function j(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function K(n,u){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function z(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function H(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}function $(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"em",45),e._uU(2," Block Billing"),e.qZA())}function x(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function V(n,u){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function W(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.block," ")}}function X(n,u){1&n&&(e.TgZ(0,"div",46),e._UZ(1,"app-required-field"),e.qZA())}function ee(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function te(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}function le(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"em",47),e._uU(2,"Property Billing"),e.qZA())}function re(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function ne(n,u){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function oe(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.block," ")}}function ie(n,u){1&n&&(e.TgZ(0,"div",46),e._UZ(1,"app-required-field"),e.qZA())}function se(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.propertyName," ")}}function ae(n,u){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-required-field"),e.qZA())}function de(n,u){if(1&n&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function ue(n,u){1&n&&(e.TgZ(0,"span"),e._UZ(1,"app-required-field"),e.qZA())}const k=function(n){return{"is-invalid":n}},pe=function(n){return{"is-valid":n}};let ce=(()=>{var n;class u{constructor(r,t,g,m,R,O,U,q){this.groupRentBillingService=r,this.utilsService=t,this.settingsService=g,this.addGroundRentBillBsModalRef=m,this.fb=R,this.accountService=O,this.alertService=U,this.logger=q,this.estateSubmitted=!1,this.blockSubmitted=!1,this.propertySubmitted=!1,this.estateId="",this.blockId="",this.propertyId="",this.accountService.currentUser.subscribe(Ae=>this.currentUser=Ae)}ngOnInit(){this.createNewForm(),this.addGroundRentBillBsModalRef.setClass("gray modal-md modal-dialog-top"),this.listOfChargeYears=this.utilsService.getChargeYears(),this.value="EST"}onSelect(r){this.value=r.id,this.listOfBlocks=[],this.listOfProperties=[],this.createNewForm()}createNewForm(){this.estateBillFormGroup=this.fb.group({estateId:["",[i.kI.required]],chargeYear:["",[i.kI.required]],blockId:["A"],propertyId:["A"],billingType:["EST"],saveAndNew:[!1]}),this.blockBillFormGroup=this.fb.group({estateId:["",[i.kI.required]],blockId:["",[i.kI.required]],chargeYear:["",[i.kI.required]],propertyId:["A"],billingType:["BLK"],saveAndNew:[!1]}),this.propertyBillFormGroup=this.fb.group({estateId:["",[i.kI.required]],blockId:["",[i.kI.required]],propertyId:["",[i.kI.required]],chargeYear:["",[i.kI.required]],billingType:["PROP"],saveAndNew:[!1]}),this.fetchEstates()}get estateBillForm(){return this.estateBillFormGroup.controls}get blockBillForm(){return this.blockBillFormGroup.controls}get propertyBillForm(){return this.propertyBillFormGroup.controls}saveGroundRentBill(){let r,t,g=!1;if("EST"===this.value){if(this.estateSubmitted=!0,this.estateBillFormGroup.invalid)return;r={...this.estateBillFormGroup.value},t="estate "+this.listOfEstates.find(m=>m.recordId===this.estateBillForm.estateId.value)?.estateName,g=this.estateBillForm.saveAndNew.value}else if("BLK"===this.value){if(this.blockSubmitted=!0,this.blockBillFormGroup.invalid)return;r={...this.blockBillFormGroup.value},t="block "+this.listOfBlocks.find(m=>m.recordId===this.blockBillForm.blockId.value)?.block,g=this.blockBillForm.saveAndNew.value}else if("PROP"===this.value){if(this.propertySubmitted=!0,this.propertyBillFormGroup.invalid)return;r={...this.propertyBillFormGroup.value},t="property "+this.listOfProperties.find(m=>m.recordId===this.propertyBillForm.propertyId.value)?.propertyName,g=this.propertyBillForm.saveAndNew.value}a().fire({title:"Confirmation",text:`Do you want to apply ground rent bill for  ${t}?`,icon:"question",position:"top",showCancelButton:!0,confirmButtonText:"Yes, create",cancelButtonText:"No, cancel"}).then(m=>{m.value?(this.alertService.clear(),this.groupRentBillingService.saveGroupRentBill(this.currentUser,r).subscribe({next:R=>{"000"===R.headerResponse.responseCode?(this.alertService.showSuccessMsg(R.headerResponse.responseMessage),g||(this.addGroundRentBillBsModalRef.hide(),this.accountService.reloadCurrentRoute()),this.createNewForm(),this.estateSubmitted=!1,this.blockSubmitted=!1,this.propertySubmitted=!1,this.logAction(`Applied ground rent bill for ${t}`,T.h.ESTATE_BILLING)):this.alertService.showErrorMsg(R.headerResponse.responseMessage)},error:R=>{this.alertService.showInfoMsg(R)}})):a()})}fetchEstates(){this.listOfEstates=[],this.settingsService.getEstates().subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estates.length<=0?(this.alertService.showInfoMsgGeneral("No zones found"),void this.logger.info("No zones found")):void(this.listOfEstates=r.estates);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}fetchBlocks(){this.listOfBlocks=[],"EST"===this.value?this.estateId=this.estateBillForm.estateId.value:"BLK"===this.value?this.estateId=this.blockBillForm.estateId.value:"PROP"===this.value&&(this.estateId=this.propertyBillForm.estateId.value),this.settingsService.getEstateBlocks(this.currentUser,this.estateId).subscribe({next:r=>{if(this.logger.info("getEstateBlocks response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estateBlocks.length<=0?(this.alertService.showInfoMsgGeneral("No blocks found"),void this.logger.info("No blocks found")):void(this.listOfBlocks=r.estateBlocks);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}fetchEstateProperties(){this.listOfProperties=[],"EST"===this.value?this.blockId=this.estateBillForm.blockId.value:"BLK"===this.value?this.blockId=this.blockBillForm.blockId.value:"PROP"===this.value&&(this.blockId=this.propertyBillForm.blockId.value),this.settingsService.getEstateProperties(this.currentUser,this.blockId,!0,"LEASEHOLD").subscribe({next:r=>{if(this.logger.info("getEstateProperties response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.properties.length<=0?(this.alertService.showInfoMsgGeneral("No properties found"),this.logger.info("No properties found "),void this.propertyBillForm.propertyId.setValue("No properties found")):void(this.listOfProperties=r.properties);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r.message),this.alertService.showInfoMsg(r.message)}})}logAction(r,t){var g=this;return(0,o.Z)(function*(){yield g.accountService.logUserAudit(r,t)})()}}return(n=u).\u0275fac=function(r){return new(r||n)(e.Y36(Y),e.Y36(M.F),e.Y36(J.g),e.Y36(w.UZ),e.Y36(i.qu),e.Y36(E.e),e.Y36(Q.c),e.Y36(S.Kf))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-rental-bill"]],standalone:!0,features:[e.jDz],decls:149,vars:80,consts:[[1,"modal-header"],[1,"modal-title"],["type","button btn-xs","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"justified"],["id","EST",3,"selectTab"],["tabHeading",""],["novalidate","",3,"formGroup"],[1,"row","gy-3","mt-3"],[1,"col-sm-6"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["id","estateid","formControlName","estateId",3,"clearable","ngClass"],["value","ALL","disabled","","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["id","chargeYear","formControlName","chargeYear",3,"clearable","ngClass"],[1,"col-sm-12"],[1,"custom-control","custom-control-sm","custom-checkbox","checked"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew1","id","saveAndNew1",1,"custom-control-input"],["for","saveAndNew1",1,"custom-control-label","fw-bolder"],[1,"row","my-3","mb-3","justify-content-end"],[1,"col-auto"],["data-bs-dismiss","modal",1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],["id","BLK",3,"selectTab"],["id","estateid","formControlName","estateId",3,"clearable","ngClass","change"],["value","ALL","selected","","disabled","",1,"fs-6"],["id","blockId","formControlName","blockId",3,"clearable","ngClass"],["value","ALL","selected","",1,"fs-6"],["class","text-danger",4,"ngIf"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew2","id","saveAndNew2",1,"custom-control-input"],["for","saveAndNew2",1,"custom-control-label","fw-bolder"],[1,"btn","btn-primary","btn-sm",3,"title","click"],["id","PROP",3,"selectTab"],["id","estateid","formControlName","blockId",3,"clearable","ngClass","change"],["id","propertyId","formControlName","propertyId",3,"clearable","ngClass"],["value","","selected","",1,"fs-6"],["type","checkbox","formControlName","saveAndNew","id","saveAndNew3","id","saveAndNew3",1,"custom-control-input"],["for","saveAndNew3",1,"custom-control-label","fw-bolder"],[1,"icon","ni","ni-home"],[3,"value"],[1,"icon","ni","ni-brick"],[1,"text-danger"],[1,"icon","ni","ni-property-blank"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2,"Ground rent billing"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return null==t.addGroundRentBillBsModalRef?null:t.addGroundRentBillBsModalRef.hide()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div")(8,"tabset",5),e._UZ(9,"app-required-fields-notice")(10,"br"),e.TgZ(11,"tab",6),e.NdJ("selectTab",function(m){return t.onSelect(m)}),e.YNc(12,L,3,0,"ng-template",7),e.TgZ(13,"form",8)(14,"div",9)(15,"div",10)(16,"div",11),e._UZ(17,"app-form-label",12),e.TgZ(18,"div",13)(19,"ng-select",14)(20,"ng-option",15),e._uU(21,"Select One"),e.qZA(),e.YNc(22,j,2,2,"ng-option",16),e.qZA(),e.TgZ(23,"span",17),e.YNc(24,K,2,0,"div",18),e.qZA()()()(),e.TgZ(25,"div",10)(26,"div",11),e._UZ(27,"app-form-label",12),e.TgZ(28,"div",13)(29,"ng-select",19)(30,"ng-option",15),e._uU(31,"Select One"),e.qZA(),e.YNc(32,z,2,2,"ng-option",16),e.qZA(),e.TgZ(33,"span",17),e.YNc(34,H,2,0,"span",18),e.qZA()()()(),e.TgZ(35,"div",20)(36,"div",21),e._UZ(37,"input",22),e.TgZ(38,"label",23),e._uU(39," Save & create new "),e.qZA()()()(),e.TgZ(40,"div",24)(41,"div",25)(42,"button",26),e.NdJ("click",function(){return null==t.addGroundRentBillBsModalRef?null:t.addGroundRentBillBsModalRef.hide()}),e._uU(43," Close "),e.qZA()(),e.TgZ(44,"div",25)(45,"button",27),e.NdJ("click",function(){return t.saveGroundRentBill()}),e._uU(46," Apply estate billing "),e.qZA()()()()(),e.TgZ(47,"tab",28),e.NdJ("selectTab",function(m){return t.onSelect(m)}),e.YNc(48,$,3,0,"ng-template",7),e.TgZ(49,"form",8)(50,"div",9)(51,"div",10)(52,"div",11),e._UZ(53,"app-form-label",12),e.TgZ(54,"div",13)(55,"ng-select",29),e.NdJ("change",function(){return t.fetchBlocks()}),e.TgZ(56,"ng-option",30),e._uU(57,"Select One"),e.qZA(),e.YNc(58,x,2,2,"ng-option",16),e.qZA(),e.TgZ(59,"span",17),e.YNc(60,V,2,0,"div",18),e.qZA()()()(),e.TgZ(61,"div",10)(62,"div",11),e._UZ(63,"app-form-label",12),e.TgZ(64,"div",13)(65,"ng-select",31)(66,"ng-option",32),e._uU(67,"Select One"),e.qZA(),e.YNc(68,W,2,2,"ng-option",16),e.qZA(),e.TgZ(69,"span",17),e.YNc(70,X,2,0,"div",33),e.qZA()()()(),e.TgZ(71,"div",10)(72,"div",11),e._UZ(73,"app-form-label",12),e.TgZ(74,"div",13)(75,"ng-select",19)(76,"ng-option",32),e._uU(77,"Select One"),e.qZA(),e.YNc(78,ee,2,2,"ng-option",16),e.qZA(),e.TgZ(79,"span",17),e.YNc(80,te,2,0,"span",18),e.qZA()()()(),e.TgZ(81,"div",20)(82,"div",21),e._UZ(83,"input",34),e.TgZ(84,"label",35),e._uU(85," Save & create new "),e.qZA()()()(),e.TgZ(86,"div",24)(87,"div",25)(88,"button",26),e.NdJ("click",function(){return null==t.addGroundRentBillBsModalRef?null:t.addGroundRentBillBsModalRef.hide()}),e._uU(89," Close "),e.qZA()(),e.TgZ(90,"div",25)(91,"button",36),e.NdJ("click",function(){return t.saveGroundRentBill()}),e._uU(92," Apply block billing "),e.qZA()()()()(),e.TgZ(93,"tab",37),e.NdJ("selectTab",function(m){return t.onSelect(m)}),e.YNc(94,le,3,0,"ng-template",7),e.TgZ(95,"form",8)(96,"div",9)(97,"div",10)(98,"div",11),e._UZ(99,"app-form-label",12),e.TgZ(100,"div",13)(101,"ng-select",29),e.NdJ("change",function(){return t.fetchBlocks()}),e.TgZ(102,"ng-option",32),e._uU(103,"Select One"),e.qZA(),e.YNc(104,re,2,2,"ng-option",16),e.qZA(),e.TgZ(105,"span",17),e.YNc(106,ne,2,0,"div",18),e.qZA()()()(),e.TgZ(107,"div",10)(108,"div",11),e._UZ(109,"app-form-label",12),e.TgZ(110,"div",13)(111,"ng-select",38),e.NdJ("change",function(){return t.fetchEstateProperties()}),e.TgZ(112,"ng-option",32),e._uU(113,"Select One"),e.qZA(),e.YNc(114,oe,2,2,"ng-option",16),e.qZA(),e.TgZ(115,"span",17),e.YNc(116,ie,2,0,"div",33),e.qZA()()()(),e.TgZ(117,"div",10)(118,"div",11),e._UZ(119,"app-form-label",12),e.TgZ(120,"div",13)(121,"ng-select",39)(122,"ng-option",30),e._uU(123,"Select Property"),e.qZA(),e.YNc(124,se,2,2,"ng-option",16),e.qZA(),e.TgZ(125,"span",17),e.YNc(126,ae,2,0,"div",18),e.qZA()()()(),e.TgZ(127,"div",10)(128,"div",11),e._UZ(129,"app-form-label",12),e.TgZ(130,"div",13)(131,"ng-select",19)(132,"ng-option",40),e._uU(133,"Select One"),e.qZA(),e.YNc(134,de,2,2,"ng-option",16),e.qZA(),e.TgZ(135,"span",17),e.YNc(136,ue,2,0,"span",18),e.qZA()()()(),e.TgZ(137,"div",20)(138,"div",21),e._UZ(139,"input",41),e.TgZ(140,"label",42),e._uU(141," Save & create new "),e.qZA()()()(),e.TgZ(142,"div",24)(143,"div",25)(144,"button",26),e.NdJ("click",function(){return null==t.addGroundRentBillBsModalRef?null:t.addGroundRentBillBsModalRef.hide()}),e._uU(145," Close "),e.qZA()(),e.TgZ(146,"div",25)(147,"button",27),e.NdJ("click",function(){return t.saveGroundRentBill()}),e._uU(148," Apply property billing "),e.qZA()()()()()()()()),2&r&&(e.xp6(8),e.Q6J("justified",!0),e.xp6(5),e.Q6J("formGroup",t.estateBillFormGroup),e.xp6(4),e.Q6J("labelForName","estateId")("labelName","Estate"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(60,k,((null==t.estateBillForm.estateId?null:t.estateBillForm.estateId.touched)||(null==t.estateBillForm.estateId?null:t.estateBillForm.estateId.dirty)||t.estateSubmitted)&&(null==t.estateBillForm.estateId?null:t.estateBillForm.estateId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(2),e.Q6J("ngIf",null==t.estateBillForm.estateId||null==t.estateBillForm.estateId.errors?null:t.estateBillForm.estateId.errors.required),e.xp6(3),e.Q6J("labelForName","chargeYear")("labelName","Charge Year"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(62,k,((null==t.estateBillForm.chargeYear?null:t.estateBillForm.chargeYear.touched)||(null==t.estateBillForm.chargeYear?null:t.estateBillForm.chargeYear.dirty)||t.estateSubmitted)&&(null==t.estateBillForm.chargeYear?null:t.estateBillForm.chargeYear.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfChargeYears),e.xp6(2),e.Q6J("ngIf",null==t.estateBillForm.chargeYear||null==t.estateBillForm.chargeYear.errors?null:t.estateBillForm.chargeYear.errors.required),e.xp6(15),e.Q6J("formGroup",t.blockBillFormGroup),e.xp6(4),e.Q6J("labelForName","estateId")("labelName","Estate"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(64,k,((null==t.blockBillForm.estateId?null:t.blockBillForm.estateId.touched)||(null==t.blockBillForm.estateId?null:t.blockBillForm.estateId.dirty)||t.blockSubmitted)&&(null==t.blockBillForm.estateId?null:t.blockBillForm.estateId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(2),e.Q6J("ngIf",null==t.blockBillForm.estateId||null==t.blockBillForm.estateId.errors?null:t.blockBillForm.estateId.errors.required),e.xp6(3),e.Q6J("labelForName","blockId")("labelName","Block"),e.xp6(2),e.Q6J("clearable",!0)("ngClass",e.VKq(66,k,((null==t.blockBillForm.blockId?null:t.blockBillForm.blockId.touched)||(null==t.blockBillForm.blockId?null:t.blockBillForm.blockId.dirty)||t.blockSubmitted)&&(null==t.blockBillForm.blockId?null:t.blockBillForm.blockId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfBlocks),e.xp6(2),e.Q6J("ngIf",null==t.blockBillForm.blockId||null==t.blockBillForm.blockId.errors?null:t.blockBillForm.blockId.errors.required),e.xp6(3),e.Q6J("labelForName","chargeYear")("labelName","Charge Year"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(68,k,((null==t.blockBillForm.chargeYear?null:t.blockBillForm.chargeYear.touched)||(null==t.blockBillForm.chargeYear?null:t.blockBillForm.chargeYear.dirty)||t.blockSubmitted)&&(null==t.blockBillForm.chargeYear?null:t.blockBillForm.chargeYear.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfChargeYears),e.xp6(2),e.Q6J("ngIf",null==t.blockBillForm.chargeYear||null==t.blockBillForm.chargeYear.errors?null:t.blockBillForm.chargeYear.errors.required),e.xp6(11),e.Q6J("title",t.blockBillFormGroup.invalid?"There must be errors on the form":""),e.xp6(4),e.Q6J("formGroup",t.propertyBillFormGroup),e.xp6(4),e.Q6J("labelForName","estateId")("labelName","Estate"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(70,k,((null==t.propertyBillForm.estateId?null:t.propertyBillForm.estateId.touched)||(null==t.propertyBillForm.estateId?null:t.propertyBillForm.estateId.dirty)||t.propertySubmitted)&&(null==t.propertyBillForm.estateId?null:t.propertyBillForm.estateId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(2),e.Q6J("ngIf",null==t.propertyBillForm.estateId||null==t.propertyBillForm.estateId.errors?null:t.propertyBillForm.estateId.errors.required),e.xp6(3),e.Q6J("labelForName","blockId")("labelName","Block"),e.xp6(2),e.Q6J("clearable",!0)("ngClass",e.VKq(72,k,((null==t.propertyBillForm.blockId?null:t.propertyBillForm.blockId.touched)||(null==t.propertyBillForm.blockId?null:t.propertyBillForm.blockId.dirty)||t.propertySubmitted)&&(null==t.propertyBillForm.blockId?null:t.propertyBillForm.blockId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfBlocks),e.xp6(2),e.Q6J("ngIf",null==t.propertyBillForm.blockId||null==t.propertyBillForm.blockId.errors?null:t.propertyBillForm.blockId.errors.required),e.xp6(3),e.Q6J("labelForName","propertyId")("labelName","Estate Properties"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(74,pe,null==t.propertyBillForm.propertyId?null:t.propertyBillForm.propertyId.valid))("ngClass",e.VKq(76,k,((null==t.propertyBillForm.propertyId?null:t.propertyBillForm.propertyId.touched)||(null==t.propertyBillForm.propertyId?null:t.propertyBillForm.propertyId.dirty)||t.propertySubmitted)&&(null==t.propertyBillForm.propertyId?null:t.propertyBillForm.propertyId.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfProperties),e.xp6(2),e.Q6J("ngIf",null==t.propertyBillForm.propertyId||null==t.propertyBillForm.propertyId.errors?null:t.propertyBillForm.propertyId.errors.required),e.xp6(3),e.Q6J("labelForName","chargeYear")("labelName","Charge Year"),e.xp6(2),e.Q6J("clearable",!1)("ngClass",e.VKq(78,k,((null==t.propertyBillForm.chargeYear?null:t.propertyBillForm.chargeYear.touched)||(null==t.propertyBillForm.chargeYear?null:t.propertyBillForm.chargeYear.dirty)||t.propertySubmitted)&&(null==t.propertyBillForm.chargeYear?null:t.propertyBillForm.chargeYear.errors))),e.xp6(3),e.Q6J("ngForOf",t.listOfChargeYears),e.xp6(2),e.Q6J("ngIf",null==t.propertyBillForm.chargeYear||null==t.propertyBillForm.chargeYear.errors?null:t.propertyBillForm.chargeYear.errors.required))},dependencies:[_.ez,_.mk,_.sg,_.O5,i.u5,i._Y,i.Wl,i.JJ,i.JL,i.UX,i.sg,i.u,c.z,v.h,p.M,y.A0,y.w9,y.jq,l.P4,l.wW,l.AH,l.y3],encapsulation:2}),u})();var ge=d(9972);function me(n,u){if(1&n&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.regionName," ")}}function he(n,u){if(1&n){const s=e.EpF();e.TgZ(0,"div",14)(1,"div",8),e._UZ(2,"app-form-label",9),e.TgZ(3,"div",10)(4,"ng-select",23),e.NdJ("ngModelChange",function(t){e.CHM(s);const g=e.oxw();return e.KtG(g.regionId=t)}),e.TgZ(5,"ng-option",12),e._uU(6,"Select Region"),e.qZA(),e.YNc(7,me,2,2,"ng-option",13),e.qZA()()()()}if(2&n){const s=e.oxw();e.xp6(2),e.Q6J("labelForName","regionId")("labelName","Region"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",s.regionId),e.xp6(3),e.Q6J("ngForOf",s.listOfRegions)}}function fe(n,u){if(1&n&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.estateName," ")}}function ve(n,u){if(1&n&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s.recordId),e.xp6(1),e.hij(" ",s.block," ")}}function _e(n,u){if(1&n&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&n){const s=u.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ",s," ")}}function be(n,u){if(1&n){const s=e.EpF();e.TgZ(0,"div",14)(1,"div",25)(2,"div",26),e._UZ(3,"em",27),e.qZA(),e.TgZ(4,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(s);const g=e.oxw();return e.KtG(g.searchedKeyword=t)}),e.qZA()()()}if(2&n){const s=e.oxw();e.xp6(4),e.Q6J("ngModel",s.searchedKeyword)}}function Te(n,u){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"SN"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Occupant"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Property"),e.qZA(),e.TgZ(7,"th",29),e._uU(8,"Property No"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Usage"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Occupation Type"),e.qZA(),e.TgZ(13,"th",29),e._uU(14,"Charge Year"),e.qZA(),e.TgZ(15,"th",29),e._uU(16,"Amount"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Bill Type"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Bill Date"),e.qZA()())}function Be(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"app-full-name",30),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"app-full-name",31),e.ALo(7,"removeHyphen"),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"td",29),e._uU(10),e.qZA(),e.TgZ(11,"td",32),e._uU(12),e.ALo(13,"removeHyphen"),e.ALo(14,"titlecase"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"titlecase"),e.qZA(),e.TgZ(18,"td",29),e._uU(19),e.qZA(),e.TgZ(20,"td",29),e._uU(21),e.ALo(22,"number"),e.qZA(),e.TgZ(23,"td",32),e._uU(24),e.ALo(25,"removeHyphen"),e.ALo(26,"titlecase"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"lowercase"),e.TgZ(30,"div",33)(31,"small",34),e._uU(32),e.ALo(33,"date"),e.qZA(),e.TgZ(34,"small",35),e._uU(35),e.ALo(36,"timeAgo"),e.qZA()()()()),2&n){const s=u.$implicit,r=u.rowIndex;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.s9C("fullName",null==s?null:s.occupantName),e.s9C("otherFieldName",null==s?null:s.institutionalDisplayName),e.xp6(2),e.s9C("fullName",null==s?null:s.propertyName),e.s9C("otherFieldName",e.lcZ(7,15,e.lcZ(8,17,null==s?null:s.propertyId))),e.Q6J("showAvatar",!1),e.xp6(4),e.Oqu(s.propertyNo),e.xp6(2),e.Oqu(e.lcZ(13,19,e.lcZ(14,21,s.propertyUsage))),e.xp6(4),e.Oqu(e.lcZ(17,23,s.occupationType)),e.xp6(3),e.Oqu(s.ledgerYear),e.xp6(2),e.Oqu(e.xi3(22,25,s.amountInvolved,".2-2")),e.xp6(3),e.Oqu(e.lcZ(25,28,e.lcZ(26,30,s.paymentType))),e.xp6(4),e.hij(" ",e.lcZ(29,32,s.createdBy)," "),e.xp6(4),e.Oqu(e.xi3(33,34,s.createdDate,"medium")),e.xp6(3),e.hij(" ",e.lcZ(36,37,s.createdDate),"")}}const Ze=function(){return[5,10,25,50]};let ye=(()=>{var n;class u{constructor(r,t,g,m,R,O,U){this.groupRentBillingService=r,this.utilsService=t,this.accountService=g,this.alertService=m,this.settingService=R,this.logger=O,this.addGroundRentBillModalService=U,this.accountService.currentUser.subscribe(q=>this.currentUser=q)}ngOnInit(){this.estate="A",this.block="A",this.logAction("Viewed property charges page",T.h.ESTATE_BILLING),this.regionId=this.currentUser.regionId,this.chargeYear=(new Date).getFullYear(),this.listOfChargeYears=this.utilsService.getChargeYears(),this.fetchEstates()}ngOnDestroy(){this.addGroundRentBillModalService.hide(),a().close()}fetchEstates(){this.listOfEstates=[],this.settingService.getEstates().subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estates.length<=0?(this.alertService.showInfoMsgGeneral("No zones found"),void this.logger.info("No zones found")):void(this.listOfEstates=r.estates);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}fetchEstateBlocks(){this.listOfEstateBlocks=[],this.settingService.getEstateBlocks(this.currentUser,this.estate).subscribe({next:r=>{if(this.logger.info("getEstates response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.estateBlocks.length<=0?(this.alertService.showInfoMsgGeneral("No blocks found"),void this.logger.info("No blocks found ")):void(this.listOfEstateBlocks=r.estateBlocks);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r.message),this.alertService.showInfoMsg(r.message)}})}fetchRegions(){this.listOfRegions=[],this.settingService.getRegions().subscribe({next:r=>{if(this.logger.info("getRegions response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.regions.length<=0?(this.alertService.showInfoMsgGeneral("No regions found"),void this.logger.info("No regions found")):void(this.listOfRegions=r.regions);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}refreshButton(){this.fetchPropertyCharges()}fetchPropertyCharges(){this.listOfPropertyCharges=[],this.groupRentBillingService.getGroundRentBills(this.currentUser,this.block,this.chargeYear).subscribe({next:r=>{if(this.logger.info("getGroundRentBills response "+JSON.stringify(r)),"000"===r.headerResponse.responseCode)return r.propertyLedgers.length<=0?(this.alertService.showInfoMsgGeneral("No ground rent bills found"),void this.logger.info("No ground rent bills found")):void(this.listOfPropertyCharges=r.propertyLedgers);this.alertService.error(r.headerResponse.responseMessage)},error:r=>{this.logger.error(r),this.alertService.showInfoMsg(r)}})}openGroundRentBillModalComponent(){this.addGroundRentBillModalService.config.ignoreBackdropClick=!0,this.addGroundRentBillModalService.config.animated=!0,this.addGroundRentBillBsModalRef=this.addGroundRentBillModalService.show(ce),this.addGroundRentBillBsModalRef.content.closeBtnName="Close"}logAction(r,t){var g=this;return(0,o.Z)(function*(){yield g.accountService.logUserAudit(r,t)})()}}return(n=u).\u0275fac=function(r){return new(r||n)(e.Y36(Y),e.Y36(M.F),e.Y36(E.e),e.Y36(Q.c),e.Y36(J.g),e.Y36(S.Kf),e.Y36(w.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[e.jDz],decls:40,vars:30,consts:[[3,"pageTitleName","description"],[1,"newItemName"],[1,"dropdown"],[1,"btn","btn-primary",3,"click"],[1,"icon","ni","ni-plus"],[1,"row","gy-2","gx-3","mb-4","align-items-center"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-3"],[1,"form-group"],[3,"labelForName","labelName"],[1,"form-control-wrap"],["id","estate",3,"clearable","ngModel","ngModelChange","change"],["value","A","selected","",1,"fs-6"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2"],["id","block",3,"clearable","ngModel","ngModelChange"],["id","chargeYear",3,"clearable","ngModel","ngModelChange"],[1,"col-auto"],["type","button","title","",1,"btn","btn-dim","btn-primary","mt-4",3,"click"],["responsiveLayout","scroll","sortMode","multiple","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollDirection","both",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","resizableColumns","autoLayout"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["id","regionId",3,"clearable","ngModel","ngModelChange"],[3,"value"],[1,"form-control-wrap","mt-4"],[1,"form-icon","form-icon-right"],[1,"icon","ni","ni-search"],["type","text","id","default-04","placeholder"," Search property here",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-end"],[3,"fullName","otherFieldName"],[1,"text-uppercase",3,"showAvatar","fullName","otherFieldName"],[1,"text-capitalize"],[1,"fw-lighter"],[1,"d-block"],[1,"text-primary"]],template:function(r,t){1&r&&(e.TgZ(0,"app-add-item",0)(1,"span",1)(2,"div",2)(3,"a",3),e.NdJ("click",function(){return t.openGroundRentBillModalComponent()}),e._UZ(4,"em",4),e.TgZ(5,"span"),e._uU(6,"Add / Edit ground rent"),e.qZA()()()()(),e.TgZ(7,"div",5),e.YNc(8,he,8,5,"div",6),e.TgZ(9,"div",7)(10,"div",8),e._UZ(11,"app-form-label",9),e.TgZ(12,"div",10)(13,"ng-select",11),e.NdJ("ngModelChange",function(m){return t.estate=m})("change",function(){return t.fetchEstateBlocks()}),e.TgZ(14,"ng-option",12),e._uU(15,"Select Estate"),e.qZA(),e.YNc(16,fe,2,2,"ng-option",13),e.qZA()()()(),e.TgZ(17,"div",14)(18,"div",8),e._UZ(19,"app-form-label",9),e.TgZ(20,"div",10)(21,"ng-select",15),e.NdJ("ngModelChange",function(m){return t.block=m}),e.TgZ(22,"ng-option",12),e._uU(23,"Select Block"),e.qZA(),e.YNc(24,ve,2,2,"ng-option",13),e.qZA()()()(),e.TgZ(25,"div",14)(26,"div",8),e._UZ(27,"app-form-label",9),e.TgZ(28,"div",10)(29,"ng-select",16),e.NdJ("ngModelChange",function(m){return t.chargeYear=m}),e.YNc(30,_e,2,2,"ng-option",13),e.qZA()()()(),e.YNc(31,be,5,1,"div",6),e.TgZ(32,"div",17)(33,"button",18),e.NdJ("click",function(){return t.refreshButton()}),e._uU(34," Search "),e.qZA()()(),e.TgZ(35,"p-table",19,20),e.ALo(37,"filter"),e.YNc(38,Te,21,0,"ng-template",21),e.YNc(39,Be,37,39,"ng-template",22),e.qZA()),2&r&&(e.Q6J("pageTitleName","Ground Rent Billing")("description","Apply ground rent to estates,properties and occupants"),e.xp6(8),e.Q6J("ngIf",!1),e.xp6(3),e.Q6J("labelForName","estate")("labelName","Estates"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",t.estate),e.xp6(3),e.Q6J("ngForOf",t.listOfEstates),e.xp6(3),e.Q6J("labelForName","block")("labelName","Blocks"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",t.block),e.xp6(3),e.Q6J("ngForOf",t.listOfEstateBlocks),e.xp6(3),e.Q6J("labelForName","chargeYear")("labelName","Charge Year"),e.xp6(2),e.Q6J("clearable",!1)("ngModel",t.chargeYear),e.xp6(1),e.Q6J("ngForOf",t.listOfChargeYears),e.xp6(1),e.Q6J("ngIf",(null==t.listOfPropertyCharges?null:t.listOfPropertyCharges.length)>0),e.xp6(4),e.Q6J("value",e.xi3(37,26,t.listOfPropertyCharges,t.searchedKeyword))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(29,Ze))("resizableColumns",!0)("autoLayout",!0))},dependencies:[_.ez,_.sg,_.O5,_.i8,_.JJ,_.rS,_.uU,f.U$,f.iA,ge.jx,i.u5,i.Fj,i.JJ,i.On,y.A0,y.w9,y.jq,B.c,h.L,N.$,I.e,v.h,Z.i],encapsulation:2}),u})()},4647:(G,C,d)=>{d.d(C,{AH:()=>B,P4:()=>F,wW:()=>N,y3:()=>I});var o=d(5879),_=d(6814);function h(a,Z){if(1&a){const l=o.EpF();o.TgZ(0,"span",7),o.NdJ("click",function(c){o.CHM(l);const e=o.oxw().$implicit,b=o.oxw();return c.preventDefault(),o.KtG(b.removeTab(e))}),o._uU(1," \u274c"),o.qZA()}}const i=function(a){return["nav-item",a]};function y(a,Z){if(1&a){const l=o.EpF();o.TgZ(0,"li",3),o.NdJ("keydown",function(c){const b=o.CHM(l).index,A=o.oxw();return o.KtG(A.keyNavActions(c,b))}),o.TgZ(1,"a",4),o.NdJ("click",function(){const e=o.CHM(l).$implicit;return o.KtG(e.active=!0)}),o.TgZ(2,"span",5),o._uU(3),o.qZA(),o.YNc(4,h,2,0,"span",6),o.qZA()()}if(2&a){const l=Z.$implicit;o.ekj("active",l.active)("disabled",l.disabled),o.Q6J("ngClass",o.VKq(15,i,l.customClass||"")),o.xp6(1),o.ekj("active",l.active)("disabled",l.disabled),o.uIk("aria-controls",l.id?l.id:"")("aria-selected",!!l.active)("id",l.id?l.id+"-link":""),o.xp6(1),o.Q6J("ngTransclude",l.headingRef),o.xp6(1),o.Oqu(l.heading),o.xp6(1),o.Q6J("ngIf",l.removable)}}const f=["*"];let T=(()=>{class a{constructor(l){this.viewRef=l}set ngTransclude(l){this._ngTransclude=l,l&&this.viewRef.createEmbeddedView(l)}get ngTransclude(){return this._ngTransclude}}return a.\u0275fac=function(l){return new(l||a)(o.Y36(o.s_b))},a.\u0275dir=o.lG2({type:a,selectors:[["","ngTransclude",""]],inputs:{ngTransclude:"ngTransclude"}}),a})(),v=(()=>{class a{constructor(){this.type="tabs",this.isKeysAllowed=!0,this.ariaLabel="Tabs"}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275prov=o.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),B=(()=>{class a{constructor(l,p,c){this.renderer=p,this.elementRef=c,this.clazz=!0,this.tabs=[],this.classMap={},this.ariaLabel="Tabs",this.isDestroyed=!1,this._vertical=!1,this._justified=!1,this._type="tabs",this._isKeysAllowed=!0,Object.assign(this,l)}get vertical(){return this._vertical}set vertical(l){this._vertical=l,this.setClassMap()}get justified(){return this._justified}set justified(l){this._justified=l,this.setClassMap()}get type(){return this._type}set type(l){this._type=l,this.setClassMap()}get isKeysAllowed(){return this._isKeysAllowed}set isKeysAllowed(l){this._isKeysAllowed=l}ngOnDestroy(){this.isDestroyed=!0}addTab(l){this.tabs.push(l),l.active=1===this.tabs.length&&!l.active}removeTab(l,p={reselect:!0,emit:!0}){const c=this.tabs.indexOf(l);if(-1!==c&&!this.isDestroyed){if(p.reselect&&l.active&&this.hasAvailableTabs(c)){const e=this.getClosestTabIndex(c);this.tabs[e].active=!0}p.emit&&l.removed.emit(l),this.tabs.splice(c,1),l.elementRef.nativeElement.parentNode&&this.renderer.removeChild(l.elementRef.nativeElement.parentNode,l.elementRef.nativeElement)}}keyNavActions(l,p){if(!this.isKeysAllowed)return;const c=Array.from(this.elementRef.nativeElement.querySelectorAll(".nav-link"));if(13===l.keyCode||"Enter"===l.key||32===l.keyCode||"Space"===l.key)return l.preventDefault(),void c[p%c.length].click();if(39!==l.keyCode&&"RightArrow"!==l.key)if(37!==l.keyCode&&"LeftArrow"!==l.key)if(36!==l.keyCode&&"Home"!==l.key)if(35!==l.keyCode&&"End"!==l.key){if((46===l.keyCode||"Delete"===l.key)&&this.tabs[p].removable){if(this.removeTab(this.tabs[p]),c[p+1])return void c[(p+1)%c.length].focus();c[c.length-1]&&c[0].focus()}}else{l.preventDefault();let e,b=1,A=p;do{A-b<0?(A=c.length-1,e=c[A],b=0):e=c[A-b],b++}while(e.classList.contains("disabled"));e.focus()}else{l.preventDefault();let e,b=0;do{e=c[b%c.length],b++}while(e.classList.contains("disabled"));e.focus()}else{let e,b=1,A=p;do{A-b<0?(A=c.length-1,e=c[A],b=0):e=c[A-b],b++}while(e.classList.contains("disabled"));e.focus()}else{let e,b=1;do{e=c[(p+b)%c.length],b++}while(e.classList.contains("disabled"));e.focus()}}getClosestTabIndex(l){const p=this.tabs.length;if(!p)return-1;for(let c=1;c<=p;c+=1){const e=l-c,b=l+c;if(this.tabs[e]&&!this.tabs[e].disabled)return e;if(this.tabs[b]&&!this.tabs[b].disabled)return b}return-1}hasAvailableTabs(l){const p=this.tabs.length;if(!p)return!1;for(let c=0;c<p;c+=1)if(!this.tabs[c].disabled&&c!==l)return!0;return!1}setClassMap(){this.classMap={"nav-stacked":this.vertical,"flex-column":this.vertical,"nav-justified":this.justified,[`nav-${this.type}`]:!0}}}return a.\u0275fac=function(l){return new(l||a)(o.Y36(v),o.Y36(o.Qsj),o.Y36(o.SBq))},a.\u0275cmp=o.Xpm({type:a,selectors:[["tabset"]],hostVars:2,hostBindings:function(l,p){2&l&&o.ekj("tab-container",p.clazz)},inputs:{vertical:"vertical",justified:"justified",type:"type"},ngContentSelectors:f,decls:4,vars:3,consts:[["role","tablist",1,"nav",3,"ngClass","click"],[3,"ngClass","active","disabled","keydown",4,"ngFor","ngForOf"],[1,"tab-content"],[3,"ngClass","keydown"],["href","javascript:void(0);","role","tab",1,"nav-link",3,"click"],[3,"ngTransclude"],["class","bs-remove-tab",3,"click",4,"ngIf"],[1,"bs-remove-tab",3,"click"]],template:function(l,p){1&l&&(o.F$t(),o.TgZ(0,"ul",0),o.NdJ("click",function(e){return e.preventDefault()}),o.YNc(1,y,5,17,"li",1),o.qZA(),o.TgZ(2,"div",2),o.Hsn(3),o.qZA()),2&l&&(o.Q6J("ngClass",p.classMap),o.uIk("aria-label",p.ariaLabel),o.xp6(1),o.Q6J("ngForOf",p.tabs))},dependencies:[_.mk,_.sg,_.O5,T],styles:["[_nghost-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.disabled[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{cursor:default}"]}),a})(),N=(()=>{class a{constructor(l,p,c){this.elementRef=p,this.renderer=c,this.disabled=!1,this.removable=!1,this.selectTab=new o.vpe,this.deselect=new o.vpe,this.removed=new o.vpe,this.addClass=!0,this.role="tabpanel",this._active=!1,this._customClass="",this.tabset=l,this.tabset.addTab(this)}get customClass(){return this._customClass}set customClass(l){this.customClass&&this.customClass.split(" ").forEach(p=>{this.renderer.removeClass(this.elementRef.nativeElement,p)}),this._customClass=l?l.trim():"",this.customClass&&this.customClass.split(" ").forEach(p=>{this.renderer.addClass(this.elementRef.nativeElement,p)})}get active(){return this._active}set active(l){if(this._active!==l){if(this.disabled&&l||!l)return void(this._active&&!l&&(this.deselect.emit(this),this._active=l));this._active=l,this.selectTab.emit(this),this.tabset.tabs.forEach(p=>{p!==this&&(p.active=!1)})}}get ariaLabelledby(){return this.id?`${this.id}-link`:""}ngOnInit(){this.removable=!!this.removable}ngOnDestroy(){this.tabset.removeTab(this,{reselect:!1,emit:!1})}}return a.\u0275fac=function(l){return new(l||a)(o.Y36(B),o.Y36(o.SBq),o.Y36(o.Qsj))},a.\u0275dir=o.lG2({type:a,selectors:[["tab"],["","tab",""]],hostVars:7,hostBindings:function(l,p){2&l&&(o.uIk("id",p.id)("role",p.role)("aria-labelledby",p.ariaLabelledby),o.ekj("active",p.active)("tab-pane",p.addClass))},inputs:{heading:"heading",id:"id",disabled:"disabled",removable:"removable",customClass:"customClass",active:"active"},outputs:{selectTab:"selectTab",deselect:"deselect",removed:"removed"},exportAs:["tab"]}),a})(),I=(()=>{class a{constructor(l,p){p.headingRef=l}}return a.\u0275fac=function(l){return new(l||a)(o.Y36(o.Rgc),o.Y36(N))},a.\u0275dir=o.lG2({type:a,selectors:[["","tabHeading",""]]}),a})(),F=(()=>{class a{static forRoot(){return{ngModule:a,providers:[]}}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[_.ez]}),a})()}}]);