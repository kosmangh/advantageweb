{"version":3,"file":"bn-ng-idle.mjs","sources":["../../../projects/bn-ng-idle/src/lib/bn-ng-idle.service.ts","../../../projects/bn-ng-idle/src/lib/bn-ng-idle.module.ts","../../../projects/bn-ng-idle/src/public-api.ts","../../../projects/bn-ng-idle/src/bn-ng-idle.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, fromEvent, merge, Subject, timer, Subscription } from 'rxjs';\r\n​\r\n​\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BnNgIdleService {\r\n​\r\n  private idle$!: Observable<any>;\r\n  private timer$!: Subscription;\r\n  private timeOutMilliSeconds!: number;\r\n  private idleSubscription!: Subscription;\r\n​\r\n  public expired$: Subject<boolean> = new Subject<boolean>();\r\n​\r\n  constructor() {\r\n​\r\n  }\r\n​\r\n  public startWatching(timeOutSeconds: number): Observable<any> {\r\n    this.idle$ = merge(\r\n      fromEvent(document, 'mousemove'),\r\n      fromEvent(document, 'click'),\r\n      fromEvent(document, 'mousedown'),\r\n      fromEvent(document, 'keypress'),\r\n      fromEvent(document, 'DOMMouseScroll'),\r\n      fromEvent(document, 'mousewheel'),\r\n      fromEvent(document, 'touchmove'),\r\n      fromEvent(document, 'MSPointerMove'),\r\n      fromEvent(window, 'mousemove'),\r\n      fromEvent(window, 'resize'),\r\n    );\r\n​\r\n    this.timeOutMilliSeconds = timeOutSeconds * 1000;\r\n​\r\n    this.idleSubscription = this.idle$.subscribe((res) => {\r\n      this.resetTimer();\r\n    });\r\n​\r\n    this.startTimer();\r\n​\r\n    return this.expired$;\r\n  }\r\n​\r\n  private startTimer() {\r\n    this.timer$ = timer(this.timeOutMilliSeconds, this.timeOutMilliSeconds).subscribe((res) => {\r\n      this.expired$.next(true);\r\n    });\r\n  }\r\n​\r\n  public resetTimer(timeOutSeconds?: number) {\r\n    this.timer$.unsubscribe();\r\n    if (timeOutSeconds) {\r\n      this.timeOutMilliSeconds = timeOutSeconds * 1000;\r\n    }\r\n    this.startTimer();\r\n  }\r\n​\r\n  public stopTimer() {\r\n    this.timer$.unsubscribe();\r\n    this.idleSubscription.unsubscribe();\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { BnNgIdleService } from './bn-ng-idle.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n  ],\r\n  declarations: [],\r\n  providers: [BnNgIdleService],\r\n  exports: []\r\n})\r\nexport class BnNgIdleModule { }\r\n","/*\r\n * Public API Surface of bn-ng-idle\r\n */\r\n\r\nexport * from './lib/bn-ng-idle.service';\r\nexport * from './lib/bn-ng-idle.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}